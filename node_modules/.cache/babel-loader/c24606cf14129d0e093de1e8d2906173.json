{"ast":null,"code":"import _objectSpread from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/regenerator/index.js\";import{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{httpClient,nError}from\"../../funcs\";import{mapDispatchToProps,mapStateToProps}from\"../../store\";import\"../../styles/pages/common/entity-edit.sass\";import Select from\"../../components/Select\";import Checkbox from\"../../components/Checkbox\";import classNames from\"classnames\";import{useRoute}from\"react-router5\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ClientsPage_Item=connect(mapStateToProps,mapDispatchToProps)(function(props){var $router=useRoute();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),readyToSave=_useState2[0],setReadyToSave=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),editing=_useState4[0],setEditing=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),deleting=_useState6[0],setDeleting=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),readyToDelete=_useState8[0],setReadyToDelete=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),clientData=_useState10[0],setClientData=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),newClientData=_useState12[0],setNewClientData=_useState12[1];// Load info function\nfunction loadInfo(){return _loadInfo.apply(this,arguments);}// Load client data\nfunction _loadInfo(){_loadInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _ref4,_clientData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return httpClient.post('/clients/report');case 3:_ref4=_context.sent;_clientData=_ref4.data;setClientData(_clientData);setNewClientData(_clientData.client);setTimeout(function(){return setReadyToSave(false);},100);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);nError(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return _loadInfo.apply(this,arguments);}useEffect(function(){loadInfo();},[]);useEffect(function(){return setReadyToSave(true);},[newClientData]);// Render function\nreturn/*#__PURE__*/_jsx(_Fragment,{children:clientData&&newClientData?/*#__PURE__*/_jsxs(\"div\",{className:\"ClientsPage_Item entity-edit\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper flex-container sb\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Client\"}),clientData!==null&&clientData!==void 0&&clientData.permissions.edit_client&&!editing?/*#__PURE__*/_jsx(\"button\",{className:\"_wa _green\",onClick:function onClick(){return setEditing(true);},children:\"Edit\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Main\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"First Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:!editing,defaultValue:newClientData.firstname,onChange:function onChange(_ref){var value=_ref.target.value;return setNewClientData(_objectSpread(_objectSpread({},newClientData),{},{firstname:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Last Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:!editing,defaultValue:newClientData.lastname,onChange:function onChange(_ref2){var value=_ref2.target.value;return setNewClientData(_objectSpread(_objectSpread({},newClientData),{},{lastname:value}));}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Company:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:!editing,defaultValue:newClientData.company_name,onChange:function onChange(_ref3){var value=_ref3.target.value;return setNewClientData(_objectSpread(_objectSpread({},newClientData),{},{company_name:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Source:\"}),/*#__PURE__*/_jsx(Select,{disabled:!editing,options:clientData.edit.source.map(function(option){return{span:option,value:option};}),selectedOption:newClientData.source,onChange:function onChange(value){return setNewClientData(_objectSpread(_objectSpread({},newClientData),{},{source:value}));}})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Financial\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:true,defaultValue:newClientData.total})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Paid:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:true,defaultValue:newClientData.paid})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"__right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Unpaid:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:true,defaultValue:newClientData.unpaid})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Phones\"}),/*#__PURE__*/_jsxs(\"table\",{className:classNames('table','__hide-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone\"})]}),clientData.phones.map(function(phone,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:phone.name}),/*#__PURE__*/_jsx(\"td\",{children:phone.phone})]},i);})]}),/*#__PURE__*/_jsx(\"div\",{className:classNames('mobile-table','__show-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:/*#__PURE__*/_jsx(\"div\",{className:\"mobile-table-items\",children:clientData.phones.map(function(phone,i){return/*#__PURE__*/_jsx(\"div\",{className:\"item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"__top\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"strong\",{children:phone.phone})}),/*#__PURE__*/_jsx(\"div\",{children:phone.name})]})})},i);})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Addresses\"}),/*#__PURE__*/_jsxs(\"table\",{className:classNames('table','__hide-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Property Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Note\"})]}),clientData.addresses.map(function(address,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:address.address}),/*#__PURE__*/_jsx(\"td\",{children:address.property_type}),/*#__PURE__*/_jsx(\"td\",{children:address.note})]},i);})]}),/*#__PURE__*/_jsx(\"div\",{className:classNames('mobile-table','__show-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:/*#__PURE__*/_jsx(\"div\",{className:\"mobile-table-items\",children:clientData.addresses.map(function(address,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"__top\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"strong\",{children:address.address})}),/*#__PURE__*/_jsx(\"div\",{children:address.note})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"__bottom\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"__left\"}),/*#__PURE__*/_jsx(\"div\",{className:\"__right\",children:/*#__PURE__*/_jsx(\"div\",{children:address.property_type})})]})]},i);})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Comments\"}),/*#__PURE__*/_jsxs(\"table\",{className:classNames('table','__hide-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Comment\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User\"})]}),clientData.comments.map(function(comment,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:comment.created_at}),/*#__PURE__*/_jsx(\"td\",{children:comment.comment}),/*#__PURE__*/_jsx(\"td\",{children:comment.created_by})]},i);})]}),/*#__PURE__*/_jsx(\"div\",{className:classNames('mobile-table','__show-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:/*#__PURE__*/_jsx(\"div\",{className:\"mobile-table-items\",children:clientData.comments.map(function(comment,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"__top\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"strong\",{children:comment.created_at})}),/*#__PURE__*/_jsx(\"div\",{children:comment.comment})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"__bottom\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"__left\"}),/*#__PURE__*/_jsx(\"div\",{className:\"__right\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"b\",{children:comment.created_by})})})]})]},i);})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Info\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Date Created:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newClientData.created_at,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Created by:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newClientData.created_by,disabled:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Last Edited:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newClientData.last_edited_at,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Last Edited by:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newClientData.last_edited_by,disabled:true})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Appointments\"}),/*#__PURE__*/_jsxs(\"table\",{className:classNames('table','__show-on-wide',{__respectAsidePanel:props.store.navActive.is}),children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Property type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Area\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created by\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Schedule time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Service resource\"})]}),clientData.appointments.map(function(appointment,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return $router.router.navigate('appointments.item',{appointmentId:appointment.appointment_id},{reload:true});},children:[/*#__PURE__*/_jsx(\"td\",{children:appointment.created_at}),/*#__PURE__*/_jsx(\"td\",{children:appointment.name}),/*#__PURE__*/_jsx(\"td\",{children:appointment.type==='Recall'?/*#__PURE__*/_jsx(\"span\",{className:\"red\",children:appointment.type}):appointment.type==='Service call'?/*#__PURE__*/_jsx(\"span\",{className:\"green\",children:appointment.type}):/*#__PURE__*/_jsx(\"span\",{className:\"blue\",children:appointment.type})}),/*#__PURE__*/_jsx(\"td\",{children:appointment.status}),/*#__PURE__*/_jsx(\"td\",{children:appointment.property_type}),/*#__PURE__*/_jsx(\"td\",{children:appointment.area}),/*#__PURE__*/_jsx(\"td\",{children:appointment.created_by}),/*#__PURE__*/_jsx(\"td\",{children:appointment.schedule_time}),/*#__PURE__*/_jsx(\"td\",{children:appointment.service_resource})]},i);})]}),/*#__PURE__*/_jsxs(\"table\",{className:classNames('table','__hide-on-wide','__hide-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:[/*#__PURE__*/_jsx(\"tr\",{}),clientData.appointments.map(function(appointment,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return $router.router.navigate('appointments.item',{appointmentId:appointment.appointment_id},{reload:true});},children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"div\",{children:appointment.name}),/*#__PURE__*/_jsx(\"div\",{children:appointment.created_at})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"div\",{children:appointment.service_resource}),/*#__PURE__*/_jsx(\"div\",{children:appointment.created_by})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"div\",{children:appointment.area}),/*#__PURE__*/_jsx(\"div\",{children:appointment.type})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"div\",{children:appointment.property_type}),/*#__PURE__*/_jsx(\"div\",{children:appointment.status})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"div\",{children:appointment.schedule_time}),/*#__PURE__*/_jsx(\"div\",{children:\"\\xA0\"})]})]},i);})]}),/*#__PURE__*/_jsx(\"div\",{className:classNames('mobile-table','__show-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:/*#__PURE__*/_jsx(\"div\",{className:\"mobile-table-items\",children:clientData.appointments.map(function(appointment,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"item\",onClick:function onClick(){return $router.router.navigate('appointments.item',{appointmentId:appointment.appointment_id},{reload:true});},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__top\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-container\",children:/*#__PURE__*/_jsx(\"strong\",{children:appointment.name})}),/*#__PURE__*/_jsx(\"div\",{children:appointment.schedule_time})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsx(\"div\",{children:appointment.type==='Recall'?/*#__PURE__*/_jsx(\"span\",{className:\"red\",children:appointment.type}):appointment.type==='Service call'?/*#__PURE__*/_jsx(\"span\",{className:\"green\",children:appointment.type}):/*#__PURE__*/_jsx(\"span\",{className:\"blue\",children:appointment.type})}),/*#__PURE__*/_jsx(\"div\",{children:appointment.property_type}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"fw500\",children:appointment.status})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"gray\",children:\"Area:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",appointment.area]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"gray\",children:\"Service Resourse:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",appointment.service_resource]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right small\",children:[/*#__PURE__*/_jsx(\"div\",{children:appointment.created_at}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Created by \",appointment.created_by]})]})]})]},i);})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Estimates\"}),/*#__PURE__*/_jsxs(\"table\",{className:classNames('table','__hide-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Date\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Service Resource\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Area\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Total\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Comment\"})})]}),clientData.estimates.map(function(estimate,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:estimate.created_at}),/*#__PURE__*/_jsx(\"td\",{children:estimate.name}),/*#__PURE__*/_jsx(\"td\",{children:estimate.status}),/*#__PURE__*/_jsx(\"td\",{children:estimate.service_resource}),/*#__PURE__*/_jsx(\"td\",{children:estimate.area}),/*#__PURE__*/_jsx(\"td\",{children:estimate.total}),/*#__PURE__*/_jsx(\"td\",{children:estimate.comment})]},i);})]}),/*#__PURE__*/_jsx(\"div\",{className:classNames('mobile-table','__show-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:/*#__PURE__*/_jsx(\"div\",{className:\"mobile-table-items\",children:clientData.estimates.map(function(estimate,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__top\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"strong\",{children:estimate.name})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"strong\",{children:estimate.status})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"__right\",children:/*#__PURE__*/_jsxs(\"div\",{children:[\"Total: \",/*#__PURE__*/_jsx(\"b\",{children:estimate.total})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"gray\",children:\"Area:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",estimate.area]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"gray\",children:\"Service Resourse:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",estimate.service_resource]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"__right small\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"b\",{children:estimate.created_at})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:estimate.comment})]},i);})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Invoices\"}),/*#__PURE__*/_jsxs(\"table\",{className:classNames('table','__hide-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Date\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Name\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Service Resource\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Area\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Total\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Paid\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Unpaid\"})})]}),clientData.invoices.map(function(invoice,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:invoice.created_at}),/*#__PURE__*/_jsx(\"td\",{children:invoice.name}),/*#__PURE__*/_jsx(\"td\",{children:invoice.status}),/*#__PURE__*/_jsx(\"td\",{children:invoice.service_resource}),/*#__PURE__*/_jsx(\"td\",{children:invoice.area}),/*#__PURE__*/_jsx(\"td\",{children:invoice.total}),/*#__PURE__*/_jsx(\"td\",{children:invoice.paid}),/*#__PURE__*/_jsx(\"td\",{children:invoice.unpaid})]},i);})]}),/*#__PURE__*/_jsx(\"div\",{className:classNames('mobile-table','__show-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:/*#__PURE__*/_jsx(\"div\",{className:\"mobile-table-items\",children:clientData.invoices.map(function(invoice,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__top\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"b\",{children:invoice.name})}),/*#__PURE__*/_jsx(\"div\",{children:invoice.status})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Total: \",/*#__PURE__*/_jsx(\"b\",{children:invoice.total})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Paid: \",/*#__PURE__*/_jsx(\"b\",{children:invoice.paid})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Unpaid: \",/*#__PURE__*/_jsx(\"b\",{children:invoice.unpaid})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"gray\",children:\"Area:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",invoice.area]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"gray\",children:\"Service Resource:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",invoice.service_resource]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"__right small\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"b\",{children:invoice.created_at})})})]})]},i);})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Payments\"}),/*#__PURE__*/_jsxs(\"table\",{className:classNames('table','__hide-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Date\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Type\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Number\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Service\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Status\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Net\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Total\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{children:\"Fee\"})})]}),clientData.payments.map(function(payment,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:payment.created_at}),/*#__PURE__*/_jsx(\"td\",{children:payment.type}),/*#__PURE__*/_jsx(\"td\",{children:payment.number}),/*#__PURE__*/_jsx(\"td\",{children:payment.service}),/*#__PURE__*/_jsx(\"td\",{children:payment.status}),/*#__PURE__*/_jsx(\"td\",{children:payment.net}),/*#__PURE__*/_jsx(\"td\",{children:payment.total}),/*#__PURE__*/_jsx(\"td\",{children:payment.fee})]},i);})]}),/*#__PURE__*/_jsx(\"div\",{className:classNames('mobile-table','__show-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:/*#__PURE__*/_jsx(\"div\",{className:\"mobile-table-items\",children:clientData.payments.map(function(payment,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__top\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"strong\",{children:payment.number})}),/*#__PURE__*/_jsx(\"div\",{children:payment.service}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"b\",{children:payment.status})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Net: \",/*#__PURE__*/_jsx(\"b\",{children:payment.net})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Total: \",/*#__PURE__*/_jsx(\"b\",{children:payment.total})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Fee: \",/*#__PURE__*/_jsx(\"b\",{children:payment.fee})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__bottom\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"__left\"}),/*#__PURE__*/_jsx(\"div\",{className:\"__right small\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"b\",{children:payment.created_at})})})]})]},i);})})})]}),editing?/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper flex-container sb editing-buttons\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"_red\",onClick:function onClick(){return setDeleting(true);},children:\"Delete Client\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"_bordered _red\",onClick:function onClick(){return setEditing(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{disabled:!readyToSave,className:\"_bordered _green\",children:\"Save\"})]})]}):null,deleting?/*#__PURE__*/_jsx(\"div\",{className:\"item-delete-popup\",onClick:function onClick(){return setDeleting(false);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",onClick:function onClick(e){return e.stopPropagation();},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Delete Client\"}),/*#__PURE__*/_jsx(\"div\",{className:\"checkbox-wrapper\",children:/*#__PURE__*/_jsx(Checkbox,{contents:\"I understand that after deleting the client it will not be possible to recover.\",value:readyToDelete,onChange:function onChange(value){return setReadyToDelete(value);}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"_bordered _green\",onClick:function onClick(){return setDeleting(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{disabled:!readyToDelete,className:\"_bordered _red\",children:\"Delete\"})]})]})}):null]}):null});});export default ClientsPage_Item;","map":{"version":3,"sources":["/Users/nicole/rrrr/crm/src/pages/Clients/Item.tsx"],"names":["useEffect","useState","connect","httpClient","nError","mapDispatchToProps","mapStateToProps","Select","Checkbox","classNames","useRoute","ClientsPage_Item","props","$router","readyToSave","setReadyToSave","editing","setEditing","deleting","setDeleting","readyToDelete","setReadyToDelete","clientData","setClientData","newClientData","setNewClientData","loadInfo","post","data","client","setTimeout","permissions","edit_client","firstname","value","target","lastname","company_name","edit","source","map","option","span","total","paid","unpaid","__respectAsidePanel","store","navActive","is","phones","phone","i","name","addresses","address","property_type","note","comments","comment","created_at","created_by","last_edited_at","last_edited_by","appointments","appointment","router","navigate","appointmentId","appointment_id","reload","type","status","area","schedule_time","service_resource","estimates","estimate","invoices","invoice","payments","payment","number","service","net","fee","e","stopPropagation"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Icon from \"../../components/Icon\"\nimport {httpClient, nError} from \"../../funcs\"\nimport Client from \"../../models/Client\"\nimport { StoreDispatch, StoreState, mapDispatchToProps, mapStateToProps } from \"../../store\";\n\nimport \"../../styles/pages/common/entity-edit.sass\"\nimport Select from \"../../components/Select\"\nimport Appointment from \"../../models/Appointment\"\nimport Estimate from \"../../models/Estimate\"\nimport Invoice from \"../../models/Invoice\"\nimport Payment from \"../../models/Payments\"\nimport Checkbox from \"../../components/Checkbox\"\nimport classNames from \"classnames\"\nimport Job from \"../../models/Job\"\nimport { useRoute } from \"react-router5\"\n\ninterface Props {\n  store: StoreState,\n  dispatcher: StoreDispatch\n}\n\ninterface Phone {\n  name: string,\n  phone: string\n}\n\ninterface Address {\n  address: string,\n  property_type: string,\n  note: string\n}\n\ninterface Comment {\n  created_at: string,\n  comment: string,\n  created_by: string\n}\n\ninterface ClientData {\n  \n  permissions: {\n    \n    edit_client: boolean,\n    show_job: boolean,\n    show_appointment: boolean,\n    show_estimate: boolean,\n    show_invoice: boolean,\n    show_payment: boolean\n  },\n\n  client: Client,\n\n  phones: Phone[],\n  addresses: Address[],\n  comments: Comment[],\n  jobs: Job[],\n  appointments: Appointment[],\n  estimates: Estimate[],\n  invoices: Invoice[],\n  payments: Payment[]\n\n  edit: {\n    source: string[]\n  }\n}\n\nconst ClientsPage_Item = connect(mapStateToProps, mapDispatchToProps)(function(props: Props) {\n\n  const $router = useRoute()\n\n  const [readyToSave, setReadyToSave] = useState(false)\n\n  const [editing, setEditing] = useState(false)\n\n  const [deleting, setDeleting] = useState(false)\n  const [readyToDelete, setReadyToDelete] = useState(false)\n\n  const [clientData, setClientData] = useState<ClientData | null>(null)\n\n  const [newClientData, setNewClientData] = useState<Partial<Client> | null>(null)\n  \n  // Load info function\n  async function loadInfo() {\n    try {\n      const { data: clientData } = (await httpClient.post('/clients/report')) as {data: ClientData}\n\n      setClientData(clientData)\n      setNewClientData(clientData.client)\n\n      setTimeout(() => setReadyToSave(false), 100)\n    }\n    catch (error) {\n      nError(error)\n    }\n  }\n\n  // Load client data\n  useEffect(() => {\n    loadInfo()\n  }, [])\n\n  useEffect(() => setReadyToSave(true), [\n    newClientData\n  ])\n  \n  // Render function\n  return (<>\n    {clientData && newClientData ? (\n      <div className=\"ClientsPage_Item entity-edit\">\n\n        <div className=\"wrapper flex-container sb\">\n          <h1>Client</h1>\n\n          {clientData?.permissions.edit_client && !editing ? (\n            <button className=\"_wa _green\" onClick={() => setEditing(true)}>\n              Edit\n            </button>\n          ) : null}\n        </div>\n        \n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Main</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\">\n                <span>First Name:</span>\n                <input type=\"text\" disabled={!editing} defaultValue={newClientData.firstname} onChange={({target: {value}}) => setNewClientData({...newClientData, firstname: value})} />\n              </div>\n\n              <div className=\"field\">\n                <span>Last Name:</span>\n                <input type=\"text\" disabled={!editing} defaultValue={newClientData.lastname} onChange={({target: {value}}) => setNewClientData({...newClientData, lastname: value})} />\n              </div>\n            </div>\n\n            <div className=\"__right\">\n              <div className=\"field\">\n                <span>Company:</span>\n                <input type=\"text\" disabled={!editing} defaultValue={newClientData.company_name} onChange={({target: {value}}) => setNewClientData({...newClientData, company_name: value})} />\n              </div>\n\n              <div className=\"field\">\n                <span>Source:</span>\n                <Select disabled={!editing} options={clientData.edit.source.map((option) => ({\n                  span: option,\n                  value: option\n                }))} selectedOption={newClientData.source as string} onChange={(value) => setNewClientData({...newClientData, source: value as string})}/>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Financial</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\">\n                <span>Total:</span>\n                <input type=\"text\" disabled={true} defaultValue={newClientData.total} />\n              </div>\n\n              <div className=\"field\">\n                <span>Paid:</span>\n                <input type=\"text\" disabled={true} defaultValue={newClientData.paid} />\n              </div>\n            </div>\n\n            <div className=\"__right\">\n              <div className=\"field\">\n                <span>Unpaid:</span>\n                <input type=\"text\" disabled={true} defaultValue={newClientData.unpaid} />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"legend\">Phones</div>\n\n          <table className={classNames('table', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr>\n              <th>Name</th>\n              <th>Phone</th>\n            </tr>\n            {clientData.phones.map((phone, i) => (\n              <tr key={i}>\n                <td>{phone.name}</td>\n                <td>{phone.phone}</td>\n              </tr>\n            ))}\n          </table>\n\n          <div className={classNames('mobile-table', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n\n            <div className=\"mobile-table-items\">\n\n              {clientData.phones.map((phone, i: number) => (\n                <div className=\"item\" key={i}>\n\n                  <div className=\"__top\">\n\n                    <div className=\"__left\">\n                      <div><strong>{phone.phone}</strong></div>\n                      <div>\n                        {phone.name}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"legend\">Addresses</div>\n\n          <table className={classNames('table', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr>\n              <th>Address</th>\n              <th>Property Type</th>\n              <th>Note</th>\n            </tr>\n            {clientData.addresses.map((address, i) => (\n              <tr key={i}>\n                <td>{address.address}</td>\n                <td>{address.property_type}</td>\n                <td>{address.note}</td>\n              </tr>\n            ))}\n          </table>\n\n          <div className={classNames('mobile-table', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n\n            <div className=\"mobile-table-items\">\n\n              {clientData.addresses.map((address, i: number) => (\n                <div className=\"item\" key={i}>\n\n                  <div className=\"__top\">\n\n                    <div className=\"__left\">\n                      <div><strong>{address.address}</strong></div>\n                      <div>\n                        {address.note}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"__bottom\">\n\n                    <div className=\"__left\">\n\n                    </div>\n\n                    <div className=\"__right\">\n                      <div>\n                        {address.property_type}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"legend\">Comments</div>\n\n          <table className={classNames('table', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr>\n              <th>Date</th>\n              <th>Comment</th>\n              <th>User</th>\n            </tr>\n            {clientData.comments.map((comment, i) => (\n              <tr key={i}>\n                <td>{comment.created_at}</td>\n                <td>{comment.comment}</td>\n                <td>{comment.created_by}</td>\n              </tr>\n            ))}\n          </table>\n\n          <div className={classNames('mobile-table', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n\n            <div className=\"mobile-table-items\">\n\n              {clientData.comments.map((comment, i: number) => (\n                <div className=\"item\" key={i}>\n\n                  <div className=\"__top\">\n\n                    <div className=\"__left\">\n                      <div><strong>{comment.created_at}</strong></div>\n                      <div>\n                        {comment.comment}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"__bottom\">\n\n                    <div className=\"__left\">\n\n                    </div>\n\n                    <div className=\"__right\">\n                      <div>\n                        <b>{comment.created_by}</b>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Info</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n\n              <div className=\"field\">\n                <span>Date Created:</span>\n                <input type=\"text\" defaultValue={newClientData.created_at} disabled={ true } />\n              </div>\n\n              <div className=\"field\">\n                <span>Created by:</span>\n                <input type=\"text\" defaultValue={newClientData.created_by} disabled={ true } />\n              </div>\n            </div>\n\n            <div className=\"__right\">\n              <div className=\"field\">\n                <span>Last Edited:</span>\n                <input type=\"text\" defaultValue={newClientData.last_edited_at} disabled={ true } />\n              </div>\n              <div className=\"field\">\n                <span>Last Edited by:</span>\n                <input type=\"text\" defaultValue={newClientData.last_edited_by} disabled={ true } />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"legend\">Appointments</div>\n\n          <table className={classNames('table', '__show-on-wide', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr>\n              <th>Date</th>\n              <th>Name</th>\n              <th>Type</th>\n              <th>Status</th>\n              <th>Property type</th>\n              <th>Area</th>\n              <th>Created by</th>\n              <th>Schedule time</th>\n              <th>Service resource</th>\n            </tr>\n            {clientData.appointments.map((appointment, i) => (\n              <tr key={i} onClick={() => $router.router.navigate('appointments.item', {\n                appointmentId: appointment.appointment_id\n              }, {reload: true})}>\n                <td>{appointment.created_at}</td>\n                <td>{appointment.name}</td>\n                <td>\n                  {appointment.type === 'Recall' ? (\n                    <span className=\"red\">\n                      {appointment.type}\n                    </span>\n                  ) : appointment.type === 'Service call' ? (\n                    <span className=\"green\">\n                      {appointment.type}\n                    </span>\n                  ) : (\n                    <span className=\"blue\">\n                      {appointment.type}\n                    </span>\n                  )}\n                </td>\n                <td>{appointment.status}</td>\n                <td>{appointment.property_type}</td>\n                <td>{appointment.area}</td>\n                <td>{appointment.created_by}</td>\n                <td>{appointment.schedule_time}</td>\n                <td>{appointment.service_resource}</td>\n              </tr>\n            ))}\n          </table>\n\n          <table className={classNames('table', '__hide-on-wide', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr></tr>\n            {clientData.appointments.map((appointment, i) => (\n              <tr key={i} onClick={() => $router.router.navigate('appointments.item', {\n                appointmentId: appointment.appointment_id\n              }, {reload: true})}>\n                <td>\n                  <div>{appointment.name}</div>\n                  <div>{appointment.created_at}</div>\n                </td>\n                <td>\n                  <div>{appointment.service_resource}</div>\n                  <div>{appointment.created_by}</div>\n                </td>\n                <td>\n                  <div>{appointment.area}</div>\n                  <div>{appointment.type}</div>\n                </td>\n                <td>\n                  <div>{appointment.property_type}</div>\n                  <div>{appointment.status}</div>\n                </td>\n                <td>\n                  <div>{appointment.schedule_time}</div>\n                  <div>&nbsp;</div>\n                </td>\n              </tr>\n            ))}\n          </table>\n\n          <div className={classNames('mobile-table', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n\n            <div className=\"mobile-table-items\">\n\n              {clientData.appointments.map((appointment, i: number) => (\n                <div className=\"item\" key={i} onClick={() => $router.router.navigate('appointments.item', {\n                appointmentId: appointment.appointment_id\n              }, {reload: true})}>\n\n                  <div className=\"__top\">\n\n                    <div className=\"__left\">\n                      <div className=\"flex-container\">\n                        <strong>{appointment.name}</strong>\n                      </div>\n                      <div>\n                        {appointment.schedule_time}\n                      </div>\n                    </div>\n\n                    <div className=\"__right\">\n                      <div>\n                        {appointment.type === 'Recall' ? (\n                          <span className=\"red\">\n                            {appointment.type}\n                          </span>\n                        ) : appointment.type === 'Service call' ? (\n                          <span className=\"green\">\n                            {appointment.type}\n                          </span>\n                        ) : (\n                          <span className=\"blue\">\n                            {appointment.type}\n                          </span>\n                        )}\n                      </div>\n                      <div>\n                        {appointment.property_type}\n                      </div>\n                      <div>\n                        <div className=\"fw500\">{appointment.status}</div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"__bottom\">\n\n                    <div className=\"__left\">\n                      <div>\n                        <span className=\"gray\">Area:</span>\n                        <span> {appointment.area}</span>\n                      </div>\n                      <div>\n                        <span className=\"gray\">Service Resourse:</span>\n                        <span> {appointment.service_resource}</span>\n                      </div>\n                    </div>\n\n                    <div className=\"__right small\">\n                      <div>\n                        {appointment.created_at}\n                      </div>\n                      <div>\n                        Created by {appointment.created_by}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"legend\">Estimates</div>\n\n          <table className={classNames('table', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr>\n              <th><span>Date</span></th>\n              <th><span>Name</span></th>\n              <th><span>Status</span></th>\n              <th><span>Service Resource</span></th>\n              <th><span>Area</span></th>\n              <th><span>Total</span></th>\n              <th><span>Comment</span></th>\n            </tr>\n            {clientData.estimates.map((estimate, i) => (\n              <tr key={i}>\n                <td>{estimate.created_at}</td>\n                <td>{estimate.name}</td>\n                <td>{estimate.status}</td>\n                <td>{estimate.service_resource}</td>\n                <td>{estimate.area}</td>\n                <td>{estimate.total}</td>\n                <td>{estimate.comment}</td>\n              </tr>\n            ))}\n          </table>\n\n          <div className={classNames('mobile-table', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n\n            <div className=\"mobile-table-items\">\n\n              {clientData.estimates.map((estimate, i: number) => (\n                <div className=\"item\" key={i}>\n\n                  <div className=\"__top\">\n\n                    <div className=\"__left\">\n                      <div>\n                        <strong>{estimate.name}</strong>\n                      </div>\n                      <div>\n                        <strong>{estimate.status}</strong>\n                      </div>\n                    </div>\n\n                    <div className=\"__right\">\n                      <div>\n                        Total: <b>{estimate.total}</b>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"__bottom\">\n\n                    <div className=\"__left\">\n                      <div>\n                        <span className=\"gray\">Area:</span>\n                        <span> {estimate.area}</span>\n                      </div>\n                      <div>\n                        <span className=\"gray\">Service Resourse:</span>\n                        <span> {estimate.service_resource}</span>\n                      </div>\n                    </div>\n\n                    <div className=\"__right small\">\n                      <div>\n                        <b>{estimate.created_at}</b>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"text\">\n                    {estimate.comment}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"legend\">Invoices</div>\n\n          <table className={classNames('table', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr>\n              <th><span>Date</span></th>\n              <th><span>Name</span></th>\n              <th><span>Status</span></th>\n              <th><span>Service Resource</span></th>\n              <th><span>Area</span></th>\n              <th><span>Total</span></th>\n              <th><span>Paid</span></th>\n              <th><span>Unpaid</span></th>\n            </tr>\n\n            {clientData.invoices.map((invoice, i) => (\n              <tr key={i}>\n                <td>{invoice.created_at}</td>\n                <td>{invoice.name}</td>\n                <td>{invoice.status}</td>\n                <td>{invoice.service_resource}</td>\n                <td>{invoice.area}</td>\n                <td>{invoice.total}</td>\n                <td>{invoice.paid}</td>\n                <td>{invoice.unpaid}</td>\n              </tr>\n            ))}\n          </table>\n\n          <div className={classNames('mobile-table', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n\n            <div className=\"mobile-table-items\">\n\n              {clientData.invoices.map((invoice, i: number) => (\n                <div className=\"item\" key={i}>\n\n                  <div className=\"__top\">\n\n                    <div className=\"__left\">\n                      <div><b>{invoice.name}</b></div>\n                      <div>\n                        {invoice.status}\n                      </div>\n                    </div>\n\n                    <div className=\"__right\">\n                      <div>\n                        Total: <b>{invoice.total}</b>\n                      </div>\n                      <div>\n                        Paid: <b>{invoice.paid}</b>\n                      </div>\n                      <div>\n                        Unpaid: <b>{invoice.unpaid}</b>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"__bottom\">\n\n                    <div className=\"__left\">\n                      <div>\n                        <span className=\"gray\">Area:</span>\n                        <span> {invoice.area}</span>\n                      </div>\n                      <div>\n                        <span className=\"gray\">Service Resource:</span>\n                        <span> {invoice.service_resource}</span>\n                      </div>\n                    </div>\n\n                    <div className=\"__right small\">\n                      <div>\n                        <b>{invoice.created_at}</b>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"legend\">Payments</div>\n\n          <table className={classNames('table', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr>\n              <th><span>Date</span></th>\n              <th><span>Type</span></th>\n              <th><span>Number</span></th>\n              <th><span>Service</span></th>\n              <th><span>Status</span></th>\n              <th><span>Net</span></th>\n              <th><span>Total</span></th>\n              <th><span>Fee</span></th>\n            </tr>\n\n            {clientData.payments.map((payment, i) => (\n              <tr key={i}>\n                <td>{payment.created_at}</td>\n                <td>{payment.type}</td>\n                <td>{payment.number}</td>\n                <td>{payment.service}</td>\n                <td>{payment.status}</td>\n                <td>{payment.net}</td>\n                <td>{payment.total}</td>\n                <td>{payment.fee}</td>\n              </tr>\n            ))}\n          </table>\n\n          <div className={classNames('mobile-table', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n\n            <div className=\"mobile-table-items\">\n\n              {clientData.payments.map((payment, i: number) => (\n                <div className=\"item\" key={i}>\n\n                  <div className=\"__top\">\n\n                    <div className=\"__left\">\n                      <div><strong>{payment.number}</strong></div>\n                      <div>{payment.service}</div>\n                      <div>\n                        <b>{payment.status}</b>\n                      </div>\n                    </div>\n\n                    <div className=\"__right\">\n                      <div>\n                        Net: <b>{payment.net}</b>\n                      </div>\n                      <div>\n                        Total: <b>{payment.total}</b>\n                      </div>\n                      <div>\n                        Fee: <b>{payment.fee}</b>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"__bottom\">\n\n                    <div className=\"__left\">\n                      \n                    </div>\n\n                    <div className=\"__right small\">\n                      <div>\n                        <b>{payment.created_at}</b>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {editing ? (\n          <div className=\"wrapper flex-container sb editing-buttons\">\n            <div>\n              <button className=\"_red\" onClick={() => setDeleting(true)}>Delete Client</button>\n            </div>\n            <div className=\"buttons\">\n              <button className=\"_bordered _red\" onClick={() => setEditing(false)}>\n                Cancel\n              </button>\n              <button disabled={!readyToSave} className=\"_bordered _green\">\n                Save\n              </button>\n            </div>\n          </div>\n        ) : null}\n\n        {/* Item delete popup */}\n        {deleting ? (\n          <div className=\"item-delete-popup\" onClick={() => setDeleting(false)}>\n\n            <div className=\"wrapper\" onClick={(e) => e.stopPropagation()}>\n            \n              <div className=\"title\">\n                Delete Client\n              </div>\n\n              <div className=\"checkbox-wrapper\">\n                <Checkbox contents=\"I understand that after deleting the client it will not be possible to recover.\" value={readyToDelete} onChange={(value) => setReadyToDelete(value)} />\n              </div>\n\n              <div className=\"buttons\">\n\n                <button className=\"_bordered _green\" onClick={() => setDeleting(false)}>\n                  Cancel\n                </button>\n\n                <button disabled={!readyToDelete} className=\"_bordered _red\">\n                  Delete\n                </button>\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    ) : null}\n  </>)\n})\nexport default ClientsPage_Item\n"]},"metadata":{},"sourceType":"module"}