{"ast":null,"code":"import _objectSpread from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import Icon from\"../../../components/Icon\";import{nError}from\"../../../funcs\";import{mapDispatchToProps,mapStateToProps}from\"../../../store\";import\"../../../styles/pages/common/entity-edit.sass\";import Select from\"../../../components/Select\";import Checkbox from\"../../../components/Checkbox\";import classNames from\"classnames\";import{BaseLink,useRoute}from\"react-router5\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var emptyDispatcher={dispatcher_id:'',name:'',user:'',phone:'',is_phone:false,is_softphone:false,active:'Active',groups:'',\"created_at\":\"05/04/2021 09:32am\",\"created_by\":\"Alex\",\"last_edited_at\":\"05/04/2021 10:34am\",\"last_edited_by\":\"Alex\"};var CallCenter_CallGroupsPage_Item=connect(mapStateToProps,mapDispatchToProps)(function(props){var $router=useRoute();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),readyToSave=_useState2[0],setReadyToSave=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),editing=_useState4[0],setEditing=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),deleting=_useState6[0],setDeleting=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),readyToDelete=_useState8[0],setReadyToDelete=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),callGroupData=_useState10[0],setCallGroupData=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),dispatchers=_useState12[0],setDispatchers=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),availableDispatchers=_useState14[0],setAvailableDispatchers=_useState14[1];var _useState15=useState(emptyDispatcher),_useState16=_slicedToArray(_useState15,2),selectedDispatcher=_useState16[0],setSelectedDispatcher=_useState16[1];var _useState17=useState({name:'',dispatchers:[]}),_useState18=_slicedToArray(_useState17,2),newCallGroupData=_useState18[0],setNewCallGroupData=_useState18[1];// Load info function\nfunction loadInfo(){return _loadInfo.apply(this,arguments);}// Load callGroup data\nfunction _loadInfo(){_loadInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _ref2,_callGroupData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/json/call_center_call_group.json');case 3:_ref2=_context.sent;_callGroupData=_ref2.data;setCallGroupData(_callGroupData);setDispatchers(_callGroupData.edit.dispatchers);setAvailableDispatchers([emptyDispatcher].concat(_callGroupData.edit.dispatchers));setSelectedDispatcher([emptyDispatcher].concat(_callGroupData.edit.dispatchers)[0]);setNewCallGroupData({name:_callGroupData.call_group.name,dispatchers:_callGroupData.dispatchers});setTimeout(function(){return setReadyToSave(false);},100);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);nError(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return _loadInfo.apply(this,arguments);}useEffect(function(){loadInfo();},[]);useEffect(function(){return setReadyToSave(true);},[newCallGroupData]);// Add dispatcher function\nfunction addDispatcher(){if(!newCallGroupData.dispatchers||!newCallGroupData)return;var newDispatchersList=[].concat(_toConsumableArray(newCallGroupData.dispatchers),[selectedDispatcher]);setNewCallGroupData(_objectSpread(_objectSpread({},newCallGroupData),{},{dispatchers:newDispatchersList}));var _availableDispatchers=_toConsumableArray(availableDispatchers);_availableDispatchers=_availableDispatchers.filter(function($dispatcher){return newDispatchersList.findIndex(function(dispatcher){return dispatcher.name===$dispatcher.name;})===-1;});setAvailableDispatchers(_toConsumableArray(_availableDispatchers));setSelectedDispatcher(emptyDispatcher);setReadyToSave(true);}// Remove dispatcher function\nfunction removeDispatcher(i){var _callGroupDispatchers=_toConsumableArray(newCallGroupData.dispatchers);var _dispatcher=_callGroupDispatchers[i];_callGroupDispatchers.splice(i,1);setNewCallGroupData(_objectSpread(_objectSpread({},newCallGroupData),{},{dispatchers:_callGroupDispatchers}));setAvailableDispatchers([].concat(_toConsumableArray(availableDispatchers),[_dispatcher]));setReadyToSave(true);}// Render function\nreturn/*#__PURE__*/_jsx(_Fragment,{children:callGroupData&&newCallGroupData.name?/*#__PURE__*/_jsxs(\"div\",{className:\"CallCenter_CallGroupsPage_Item entity-edit\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-nav\",children:[/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.phoneNumbers\",className:classNames({_active:$router.route.name===\"call_center.phoneNumbers\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"phone-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Phone Numbers\"})]}),/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.dispatchers\",className:classNames({_active:$router.route.name===\"call_center.dispatchers\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"user-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Dispatchers\"})]}),/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.groups\",className:classNames({_active:$router.route.name===\"call_center.groups\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"user-29\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Groups\"})]}),/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.callFlows\",className:classNames({_active:$router.route.name===\"call_center.callFlows\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"share-7\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Call Flows\"})]}),/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.settings\",className:classNames({_active:$router.route.name===\"call_center.settings\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"gear-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Settings\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper flex-container sb\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Call Group\"}),callGroupData!==null&&callGroupData!==void 0&&callGroupData.permissions.edit_call_group&&!editing?/*#__PURE__*/_jsx(\"button\",{className:\"_wa _green\",onClick:function onClick(){return setEditing(true);},children:\"Edit\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Main\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fields\",children:/*#__PURE__*/_jsx(\"div\",{className:\"__left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newCallGroupData.name,onChange:function onChange(_ref){var value=_ref.target.value;return setNewCallGroupData(_objectSpread(_objectSpread({},newCallGroupData),{},{name:value}));}})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container sb wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Dispatchers\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-action-wrapper\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Dispatcher:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(Select,{options:availableDispatchers.map(function(dispatcher){return{span:dispatcher.name,value:dispatcher.name};}),selectedOption:selectedDispatcher.name,onChange:function onChange(value){return setSelectedDispatcher(availableDispatchers.find(function(_dispatcher){return _dispatcher.name===value;}));}}),/*#__PURE__*/_jsx(\"button\",{disabled:!selectedDispatcher.name,className:\"_green\",onClick:function onClick(){return addDispatcher();},children:\"Add\"})]})]})]}),/*#__PURE__*/_jsxs(\"table\",{className:classNames('table','__hide-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Softphone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Active\"}),/*#__PURE__*/_jsx(\"th\",{})]}),newCallGroupData.dispatchers.map(function(dispatcher,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:dispatcher.name}),/*#__PURE__*/_jsx(\"td\",{children:dispatcher.user}),/*#__PURE__*/_jsx(\"td\",{children:dispatcher.phone}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Checkbox,{contents:'',value:dispatcher.is_phone})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Checkbox,{contents:'',value:dispatcher.is_softphone})}),/*#__PURE__*/_jsx(\"td\",{className:classNames({'red-text':dispatcher.active==='Off','green-text':dispatcher.active==='On'}),children:dispatcher.active}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"_zeroed _iconed _red\",onClick:function onClick(){return removeDispatcher(i);},children:/*#__PURE__*/_jsx(Icon,{icon:\"x-mark-1\"})})})]},i);})]}),/*#__PURE__*/_jsx(\"div\",{className:classNames('mobile-table','__show-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:/*#__PURE__*/_jsx(\"div\",{className:\"mobile-table-items\",children:newCallGroupData.dispatchers.map(function(dispatcher,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"item\",onClick:function onClick(){return $router.router.navigate('call_center.dispatchers.item',{},{reload:true});},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__top\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"b\",{children:dispatcher.name})}),/*#__PURE__*/_jsx(\"div\",{children:dispatcher.user})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right small\",children:[/*#__PURE__*/_jsx(\"div\",{className:classNames({'red-text':dispatcher.active==='Inactive','green-text':dispatcher.active==='Active'}),children:dispatcher.active}),/*#__PURE__*/_jsx(\"div\",{children:dispatcher.phone})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"gray\",children:\"Phone:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",/*#__PURE__*/_jsx(Checkbox,{contents:\"\",value:dispatcher.is_phone})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"gray\",children:\"Softphone:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",/*#__PURE__*/_jsx(Checkbox,{contents:\"\",value:dispatcher.is_softphone})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"__right small\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"_zeroed _iconed _red\",onClick:function onClick(e){e.stopPropagation();removeDispatcher(i);},children:/*#__PURE__*/_jsx(Icon,{icon:\"x-mark-1\"})})})})]})]},i);})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Info\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Date Created:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:callGroupData.call_group.created_at,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Created by:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:callGroupData.call_group.created_by,disabled:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Last Edited:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:callGroupData.call_group.last_edited_at,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Last Edited By:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:callGroupData.call_group.last_edited_by,disabled:true})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Call Flows\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{children:\"Name\"})}),callGroupData.call_flows.map(function(callFlow,i){return/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:callFlow.name})},i);})]})]}),editing?/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper flex-container sb editing-buttons\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"_red\",onClick:function onClick(){return setDeleting(true);},children:\"Delete Call Group\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"_bordered _red\",onClick:function onClick(){return $router.router.navigate('call_center.callFlows',{},{reload:true});},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{disabled:!readyToSave,className:\"_bordered _green\",children:\"Save\"})]})]}):null,deleting?/*#__PURE__*/_jsx(\"div\",{className:\"item-delete-popup\",onClick:function onClick(){return setDeleting(false);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",onClick:function onClick(e){return e.stopPropagation();},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Delete CallGroup\"}),/*#__PURE__*/_jsx(\"div\",{className:\"checkbox-wrapper\",children:/*#__PURE__*/_jsx(Checkbox,{contents:\"I understand that after deleting the call group it will not be possible to recover.\",value:readyToDelete,onChange:function onChange(value){return setReadyToDelete(value);}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"_bordered _green\",onClick:function onClick(){return setDeleting(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{disabled:!readyToDelete,className:\"_bordered _red\",children:\"Delete\"})]})]})}):null]}):null});});export default CallCenter_CallGroupsPage_Item;","map":{"version":3,"sources":["/Users/nicole/rrrr/crm/src/pages/CallCenter/CallGroups/Item.tsx"],"names":["axios","React","useEffect","useState","connect","Icon","nError","mapDispatchToProps","mapStateToProps","Select","Checkbox","classNames","BaseLink","useRoute","emptyDispatcher","dispatcher_id","name","user","phone","is_phone","is_softphone","active","groups","CallCenter_CallGroupsPage_Item","props","$router","readyToSave","setReadyToSave","editing","setEditing","deleting","setDeleting","readyToDelete","setReadyToDelete","callGroupData","setCallGroupData","dispatchers","setDispatchers","availableDispatchers","setAvailableDispatchers","selectedDispatcher","setSelectedDispatcher","newCallGroupData","setNewCallGroupData","loadInfo","get","data","edit","concat","call_group","setTimeout","addDispatcher","newDispatchersList","_availableDispatchers","filter","$dispatcher","findIndex","dispatcher","removeDispatcher","i","_callGroupDispatchers","_dispatcher","splice","router","_active","route","permissions","edit_call_group","value","target","map","span","find","__respectAsidePanel","store","navActive","is","navigate","reload","e","stopPropagation","created_at","created_by","last_edited_at","last_edited_by","call_flows","callFlow"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Icon from \"../../../components/Icon\"\nimport { nError } from \"../../../funcs\"\nimport { StoreDispatch, StoreState, mapDispatchToProps, mapStateToProps } from \"../../../store\";\nimport Datetime from 'react-datetime'\n\nimport \"../../../styles/pages/common/entity-edit.sass\"\nimport moment from \"moment\"\nimport Select from \"../../../components/Select\"\nimport Checkbox from \"../../../components/Checkbox\"\nimport { CallCenter_CallFlow, CallCenter_CallGroup, CallCenter_Dispatcher } from \"../../../models/CallCenter\"\nimport Switcher from \"../../../components/Switcher\"\nimport classNames from \"classnames\"\nimport { BaseLink, useRoute } from \"react-router5\"\n\ninterface Props {\n  store: StoreState,\n  dispatcher: StoreDispatch\n}\n\ninterface CallGroupData {\n  \n  permissions: {\n    \n    edit_call_group: boolean,\n    show_dispatcher: boolean\n  },\n\n  call_group: CallCenter_CallGroup,\n  dispatchers: CallCenter_Dispatcher[],\n  call_flows: CallCenter_CallFlow[],\n\n  edit: {\n    \n    dispatchers: CallCenter_Dispatcher[]\n  }\n}\n\nconst emptyDispatcher: CallCenter_Dispatcher = {\n  dispatcher_id: '',\n  name: '',\n  user: '',\n  phone: '',\n  is_phone: false,\n  is_softphone: false,\n  active: 'Active',\n  groups: '',\n  \"created_at\": \"05/04/2021 09:32am\",\n  \"created_by\": \"Alex\",\n  \"last_edited_at\": \"05/04/2021 10:34am\",\n  \"last_edited_by\": \"Alex\"\n}\n\nconst CallCenter_CallGroupsPage_Item = connect(mapStateToProps, mapDispatchToProps)(function(props: Props) {\n\n  const $router = useRoute()\n\n  const [readyToSave, setReadyToSave] = useState(false)\n\n  const [editing, setEditing] = useState(true)\n\n  const [deleting, setDeleting] = useState(false)\n  const [readyToDelete, setReadyToDelete] = useState(false)\n  \n  const [callGroupData, setCallGroupData] = useState<CallGroupData | null>(null)\n\n  const [dispatchers, setDispatchers] = useState<CallCenter_Dispatcher[] | null>(null)\n  const [availableDispatchers, setAvailableDispatchers] = useState<CallCenter_Dispatcher[]>([])\n  const [selectedDispatcher, setSelectedDispatcher] = useState<CallCenter_Dispatcher>(emptyDispatcher)\n\n  const [newCallGroupData, setNewCallGroupData] = useState({\n    name: '',\n    dispatchers: [] as CallCenter_Dispatcher[]\n  })\n  \n  // Load info function\n  async function loadInfo() {\n    try {\n      const { data: callGroupData } = (await axios.get('/json/call_center_call_group.json')) as {data: CallGroupData}\n\n      setCallGroupData(callGroupData)\n\n      setDispatchers(callGroupData.edit.dispatchers)\n      setAvailableDispatchers([emptyDispatcher].concat(callGroupData.edit.dispatchers))\n      setSelectedDispatcher([emptyDispatcher].concat(callGroupData.edit.dispatchers)[0])\n\n      setNewCallGroupData({\n        name: callGroupData.call_group.name,\n\n        dispatchers: callGroupData.dispatchers\n      })\n\n      setTimeout(() => setReadyToSave(false), 100)\n    }\n    catch (error) {\n      nError(error)\n    }\n  }\n\n  // Load callGroup data\n  useEffect(() => {\n    loadInfo()\n  }, [])\n\n  useEffect(() => setReadyToSave(true), [\n    newCallGroupData\n  ])\n\n  // Add dispatcher function\n  function addDispatcher() {\n\n    if (!newCallGroupData.dispatchers || !newCallGroupData) return\n\n    const newDispatchersList = [\n      ...newCallGroupData.dispatchers,\n      selectedDispatcher\n    ]\n\n    setNewCallGroupData({\n      ...newCallGroupData,\n      dispatchers: newDispatchersList\n    })\n\n    let _availableDispatchers = [...availableDispatchers]\n\n    _availableDispatchers = _availableDispatchers.filter(($dispatcher) => {\n      \n      return newDispatchersList.findIndex((dispatcher) => {\n        return dispatcher.name === $dispatcher.name\n      }) === -1\n    })\n\n    setAvailableDispatchers([\n      ..._availableDispatchers\n    ])\n\n    setSelectedDispatcher(emptyDispatcher)\n\n    setReadyToSave(true)\n  }\n\n  // Remove dispatcher function\n  function removeDispatcher(i: number) {\n\n    let _callGroupDispatchers = [...newCallGroupData.dispatchers]\n\n    let _dispatcher = _callGroupDispatchers[i]\n    \n    _callGroupDispatchers.splice(i, 1)\n\n    setNewCallGroupData({\n      ...newCallGroupData,\n      dispatchers: _callGroupDispatchers\n    })\n\n    setAvailableDispatchers([\n      ...availableDispatchers,\n      _dispatcher\n    ])\n\n    setReadyToSave(true)\n  }\n  \n  // Render function\n  return (<>\n    {callGroupData && newCallGroupData.name ? (\n      <div className=\"CallCenter_CallGroupsPage_Item entity-edit\">\n\n        {/* Top navigation */}\n        <div className=\"top-nav\">\n          <BaseLink router={$router.router} routeName=\"call_center.phoneNumbers\" className={classNames({_active: $router.route.name === \"call_center.phoneNumbers\"})}>\n            <Icon icon=\"phone-1\" />\n            <span>Phone Numbers</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.dispatchers\" className={classNames({_active: $router.route.name === \"call_center.dispatchers\"})}>\n            <Icon icon=\"user-1\" />\n            <span>Dispatchers</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.groups\" className={classNames({_active: $router.route.name === \"call_center.groups\"})}>\n            <Icon icon=\"user-29\" />\n            <span>Groups</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.callFlows\" className={classNames({_active: $router.route.name === \"call_center.callFlows\"})}>\n            <Icon icon=\"share-7\" />\n            <span>Call Flows</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.settings\" className={classNames({_active: $router.route.name === \"call_center.settings\"})}>\n            <Icon icon=\"gear-1\" />\n            <span>Settings</span>\n          </BaseLink>\n        </div>\n\n        <div className=\"wrapper flex-container sb\">\n          <h1>Call Group</h1>\n\n          {callGroupData?.permissions.edit_call_group && !editing ? (\n            <button className=\"_wa _green\" onClick={() => setEditing(true)}>\n              Edit\n            </button>\n          ) : null}\n        </div>\n        \n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Main</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\">\n                <span>Name:</span>\n                <input type=\"text\" defaultValue={newCallGroupData.name} onChange={({target: {value}}) => setNewCallGroupData({...newCallGroupData, name: value})} />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"flex-container sb wrap\">\n            <div className=\"legend\">Dispatchers</div>\n\n            <div className=\"legend-action-wrapper\">\n              <label>Dispatcher:</label>\n              <div className=\"input-wrapper\">\n                <Select options={availableDispatchers.map((dispatcher) => ({\n                  span: dispatcher.name,\n                  value: dispatcher.name\n                }))} selectedOption={selectedDispatcher.name} onChange={(value) => setSelectedDispatcher(availableDispatchers.find((_dispatcher) => _dispatcher.name === value) as CallCenter_Dispatcher)}/>\n                <button disabled={!selectedDispatcher.name} className=\"_green\" onClick={() => addDispatcher()}>\n                  Add\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <table className={classNames('table', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr>\n              <th>Name</th>\n              <th>User</th>\n              <th>Phone</th>\n              <th>Phone</th>\n              <th>Softphone</th>\n              <th>Active</th>\n              <th></th>\n            </tr>\n            {(newCallGroupData.dispatchers as CallCenter_Dispatcher[]).map((dispatcher, i) => (\n              <tr key={i}>\n                <td>{dispatcher.name}</td>\n                <td>{dispatcher.user}</td>\n                <td>{dispatcher.phone}</td>\n                <td>\n                  <Checkbox contents={''} value={dispatcher.is_phone} />\n                </td>\n                <td>\n                  <Checkbox contents={''} value={dispatcher.is_softphone} />\n                </td>\n                <td className={classNames({\n                  'red-text': dispatcher.active === 'Off',\n                  'green-text': dispatcher.active === 'On',\n                })}>{dispatcher.active}</td>\n                <td>\n                  <button className=\"_zeroed _iconed _red\" onClick={() => removeDispatcher(i)}>\n                    <Icon icon=\"x-mark-1\" />\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </table>\n\n          <div className={classNames('mobile-table', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n\n            <div className=\"mobile-table-items\">\n\n              {newCallGroupData.dispatchers.map((dispatcher, i: number) => (\n              <div className=\"item\" key={i} onClick={() => $router.router.navigate('call_center.dispatchers.item', {}, {reload: true})}>\n\n                <div className=\"__top\">\n\n                  <div className=\"__left\">\n                    <div><b>{dispatcher.name}</b></div>\n                    <div>\n                      {dispatcher.user}\n                    </div>\n                  </div>\n\n                  <div className=\"__right small\">\n                    <div className={classNames({\n                      'red-text': dispatcher.active === 'Inactive',\n                      'green-text': dispatcher.active === 'Active',\n                    })}>\n                      {dispatcher.active}\n                    </div>\n                    <div>\n                      {dispatcher.phone}\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"__bottom\">\n\n                  <div className=\"__left\">\n                    <div className=\"flex-container\">\n                      <span className=\"gray\">Phone:</span>\n                      <span> <Checkbox contents='' value={dispatcher.is_phone} /></span>\n                    </div>\n                    <div className=\"flex-container\">\n                      <span className=\"gray\">Softphone:</span>\n                      <span> <Checkbox contents='' value={dispatcher.is_softphone} /></span>\n                    </div>\n                  </div>\n\n                  <div className=\"__right small\">\n                    <div>\n                      <button className=\"_zeroed _iconed _red\" onClick={(e) => { e.stopPropagation(); removeDispatcher(i) }}>\n                        <Icon icon=\"x-mark-1\" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Info</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\">\n                <span>Date Created:</span>\n                <input type=\"text\" defaultValue={callGroupData.call_group.created_at} disabled={ true } />\n              </div>\n\n              <div className=\"field\">\n                <span>Created by:</span>\n                <input type=\"text\" defaultValue={callGroupData.call_group.created_by} disabled={ true } />\n              </div>\n            </div>\n\n            \n            <div className=\"__right\">\n\n              <div className=\"field\">\n                <span>Last Edited:</span>\n                <input type=\"text\" defaultValue={callGroupData.call_group.last_edited_at} disabled={ true } />\n              </div>\n\n              <div className=\"field\">\n                <span>Last Edited By:</span>\n                <input type=\"text\" defaultValue={callGroupData.call_group.last_edited_by} disabled={ true } />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"legend\">Call Flows</div>\n\n          <table className=\"table\">\n\n            <tr>\n              <th>Name</th>\n            </tr>\n\n            {callGroupData.call_flows.map((callFlow, i) => (\n              <tr key={i}>\n                <td>{callFlow.name}</td>\n              </tr>\n            ))}\n          </table>\n        </div>\n\n        {editing ? (\n          <div className=\"wrapper flex-container sb editing-buttons\">\n            <div>\n              <button className=\"_red\" onClick={() => setDeleting(true)}>Delete Call Group</button>\n            </div>\n            <div className=\"buttons\">\n              <button className=\"_bordered _red\" onClick={() => $router.router.navigate('call_center.callFlows', {}, {\n                reload: true\n              })}>\n                Cancel\n              </button>\n              <button disabled={!readyToSave} className=\"_bordered _green\">\n                Save\n              </button>\n            </div>\n          </div>\n        ) : null}\n\n        {/* Item deleting popup */}\n        {deleting ? (\n          <div className=\"item-delete-popup\" onClick={() => setDeleting(false)}>\n\n            <div className=\"wrapper\" onClick={(e) => e.stopPropagation()}>\n            \n              <div className=\"title\">\n                Delete CallGroup\n              </div>\n\n              <div className=\"checkbox-wrapper\">\n                <Checkbox contents=\"I understand that after deleting the call group it will not be possible to recover.\" value={readyToDelete} onChange={(value) => setReadyToDelete(value)} />\n              </div>\n\n              <div className=\"buttons\">\n\n                <button className=\"_bordered _green\" onClick={() => setDeleting(false)}>\n                  Cancel\n                </button>\n\n                <button disabled={!readyToDelete} className=\"_bordered _red\">\n                  Delete\n                </button>\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    ) : null}\n  </>)\n})\nexport default CallCenter_CallGroupsPage_Item\n"]},"metadata":{},"sourceType":"module"}