{"ast":null,"code":"import _defineProperty from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _toConsumableArray from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/regenerator/index.js\";import classNames from\"classnames\";import moment from\"moment\";import{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{useRoute}from\"react-router5\";import{Transition}from\"react-transition-group\";import AudioPlayer from\"../../components/AudioPlayer\";import Checkbox from\"../../components/Checkbox\";import Icon from\"../../components/Icon\";import ReportFilters from\"../../components/reports/Filters\";import ReportTableControls from\"../../components/reports/TableControls\";import ReportTableField from\"../../components/reports/TableField\";import Select from\"../../components/Select\";import{nError}from\"../../funcs/base\";import{getDateRangeByPreset}from\"../../funcs/reports\";import{mapDispatchToProps,mapStateToProps}from\"../../store\";import\"../../styles/pages/common/report-list.sass\";import{getActiveAccount,httpClient}from\"../../funcs\";import qs from\"qs\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar CallsPage_List=connect(mapStateToProps,mapDispatchToProps)(function(props){var $router=useRoute();var activeAccount=getActiveAccount(props.store);var _useState=useState(Math.random()),_useState2=_slicedToArray(_useState,2),$updater=_useState2[0],$setUpdater=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),topFilterShown=_useState4[0],setTopFilterShown=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),hashtagFilterShown=_useState6[0],setHashtagFilterShown=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),reportIsDeprecated=_useState8[0],setReportIsDeprecated=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),reportData=_useState10[0],setReportData=_useState10[1];var _useState11=useState({search:'',callListenPopup:null,dateRangeCalendarShown:false,dateRangePreset:\"custom\",min_date:new Date(),max_date:new Date(),page:1,filter_words:{dispatcher:[],friendly_name:[],status:[]},tag_words:[],searchFilters:[[\"source\",\"system\"],[\"inboud\",\"outbound\"]],selectedSearchFilters:{type:['source'],direction:[]},sort:{field:'created_at',direction:'up'},sortFields:[{span:'Date',value:'created_at'},{span:'Dispatcher',value:'dispatcher'},{span:'Caller Name',value:'caller_name'},{span:'Client',value:'client'},{span:'From',value:'call_from'},{span:'Friendly Name',value:'friendly_name'},{span:'Extension',value:'extension'},{span:'Status',value:'status'},{span:'Duration',value:'duration'}]}),_useState12=_slicedToArray(_useState11,2),localInterface=_useState12[0],setLocalInterface=_useState12[1];console.log(localInterface.min_date);console.log(localInterface.max_date);// Watch date range preset\nuseEffect(function(){if(!reportData)return;setLocalInterface(_objectSpread(_objectSpread({},localInterface),getDateRangeByPreset(localInterface.dateRangePreset,reportData===null||reportData===void 0?void 0:reportData.interface.min_date,reportData===null||reportData===void 0?void 0:reportData.interface.max_date)));},[localInterface.dateRangePreset]);// Load calls function\nfunction loadCalls(){return _loadCalls.apply(this,arguments);}// Watch for deprecated\nfunction _loadCalls(){_loadCalls=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var activeFilters,reqData,_ref,calls;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:httpClient.defaults.headers['Authorization']=\"Bearer \".concat(props.store.accessToken);activeFilters=_objectSpread({},localInterface.filter_words);Object.keys(localInterface.filter_words).forEach(function(key){return!activeFilters[key].length&&delete activeFilters[key];});reqData=_objectSpread({account_id:activeAccount.account_id,limit_rows:JSON.stringify(props.store.reportsMaxRows),page:JSON.stringify(localInterface.page),date_start:localInterface.min_date,date_end:localInterface.max_date,filter_tag:JSON.stringify(localInterface.tag_words),main_filter:JSON.stringify(localInterface.selectedSearchFilters),sort_field:localInterface.sort.field,sort_type:localInterface.sort.direction==='up'?'asc':'desc',filter_field:JSON.stringify(activeFilters)},localInterface.search?{search:localInterface.search}:{});_context.prev=4;_context.next=7;return httpClient.post('/calls/report/calls',qs.stringify(reqData));case 7:_ref=_context.sent;calls=_ref.data;setReportData(_objectSpread(_objectSpread({},calls),{},{interface:_objectSpread(_objectSpread({},calls.interface),{},{min_date:moment(calls.interface.min_date).startOf('day').toDate(),max_date:moment(calls.interface.max_date).endOf('day').toDate()})}));setTimeout(function(){setReportIsDeprecated(false);},100);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](4);nError(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[4,13]]);}));return _loadCalls.apply(this,arguments);}useEffect(function(){console.log('2');if(!reportData)return;setReportIsDeprecated(true);},[localInterface.min_date,localInterface.max_date]);// Load calls on page mount\nuseEffect(function(){loadCalls();},[$updater,localInterface.page]);// Is filter selected function\nfunction isFilterSelected(field,value){return localInterface.filter_words[field].includes(value);}// Is all filters selected function\nfunction isAllFiltersSelected(field){return localInterface.filter_words[field].length===0;}// Filter switch function\nfunction switchFilter(field,value,toggle){var _arr=_toConsumableArray(localInterface.filter_words[field]);if(toggle&&value===\"All\"){_arr=[];}else if(!toggle){while(true){var i=_arr.findIndex(function(filter){return filter===value;});if(i===-1)break;_arr.splice(i,1);}}else{if(reportData!==null&&reportData!==void 0&&reportData.interface.filter_words[field].every(function(option){return _arr.concat([value]).includes(option);}))_arr=[];else if(_arr.findIndex(function(filter){return filter===value;})===-1)_arr.push(value);}setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{filter_words:_objectSpread(_objectSpread({},localInterface.filter_words),{},_defineProperty({},field,_arr))}));}// Is tag_word selected function\nfunction isTagWordSelected(value){return localInterface.tag_words.includes(value);}// Is all tag words selected function\nfunction isAllTagWordsSelected(){return localInterface.tag_words.length===0;}// Toggle tagword function\nfunction switchTagWord(value,toggle){var _arr=_toConsumableArray(localInterface.tag_words);if(toggle&&value===\"All\"){_arr=[];}else if(!toggle){while(true){var i=_arr.findIndex(function(filter){return filter===value;});if(i===-1)break;_arr.splice(i,1);}}else{if(reportData!==null&&reportData!==void 0&&reportData.interface.tag_words.every(function(option){return _arr.concat([value]).includes(option);})){_arr=[];}else if(_arr.findIndex(function(filter){return filter===value;})===-1)_arr.push(value);}setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{tag_words:_arr}));}// Is search field selected function\nfunction isSearchFilterSelected(i,value,field){if(field=='type'){return localInterface.selectedSearchFilters.type.includes(value);}if(field=='direction'){return localInterface.selectedSearchFilters.direction.includes(value);}}// Is all search fields selected function\nfunction isAllSearchFiltersSelected(i,field){if(field=='type'){return localInterface.selectedSearchFilters.type.length===0;}else if(field=='direction'){return localInterface.selectedSearchFilters.direction.length===0;}}// Toggle search filter function\nfunction switchSearchFilter(i,value,toggle,field,$arr){var $arrType=$arr;var $object=localInterface.selectedSearchFilters;if(toggle&&value===\"All\"){$arrType=[];}else if(toggle==false){for(var _i=0;_i<$arrType.length;_i++){$arrType.map(function(v,index){if(v==value){$arrType.splice(index,1);}});}}else{$arrType.push(value);}if(field=='type'){if($arrType.length==localInterface.searchFilters[0].length){$arrType=[];}$object.type=$arrType;}if(field=='direction'){if($arrType.length==localInterface.searchFilters[1].length){$arrType=[];}$object.direction=$arrType;}setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{selectedSearchFilters:$object}));}// Render function\nreturn/*#__PURE__*/_jsx(_Fragment,{children:reportData?/*#__PURE__*/_jsxs(\"div\",{className:\"CallsPage_List\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reports-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"amount\",children:reportData.dashboard.calls}),/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Calls\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"amount\",children:reportData.dashboard.callers}),/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Callers\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"amount\",children:reportData.dashboard.missed_calls}),/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Missed Calls\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cell\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"amount\",children:reportData.dashboard.active_calls}),/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Active Calls\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"page-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Calls\"})}),/*#__PURE__*/_jsx(ReportFilters,{onSearchInputChange:function onSearchInputChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{search:value}));},dateRangePreset:localInterface.dateRangePreset,onDateRangePresetChange:function onDateRangePresetChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{dateRangePreset:value}));},minDate:localInterface.min_date,onMinDateChange:function onMinDateChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{min_date:value}));},maxDate:localInterface.max_date,onMaxDateChange:function onMaxDateChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{max_date:value}));},updateButtonActive:reportIsDeprecated,onUpdate:function onUpdate(){setReportIsDeprecated(false);$setUpdater(Math.random());},childrenAfterSearch:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{tabIndex:-1,className:\"filter-button\",onFocus:function onFocus(){return setTopFilterShown(true);},onBlur:function onBlur(e){return!e.currentTarget.contains(e.relatedTarget)&&setTopFilterShown(false);},children:[/*#__PURE__*/_jsx(\"button\",{className:classNames(\"_wa\",\"_rounded\",\"_iconed\",{_blue:!isAllSearchFiltersSelected(0,'type')||!isAllSearchFiltersSelected(1,'direction')}),children:/*#__PURE__*/_jsx(Icon,{icon:\"filter-8\"})}),/*#__PURE__*/_jsx(Transition,{in:topFilterShown,mountOnEnter:true,unmountOnExit:true,timeout:210,children:function children(state){return/*#__PURE__*/_jsxs(\"div\",{className:classNames(\"filter-wrapper\",\"transition-fade-\".concat(state)),children:[/*#__PURE__*/_jsx(Checkbox,{contents:\"All\",value:isAllSearchFiltersSelected(0,'type'),onChange:function onChange(value){return switchSearchFilter(0,\"All\",value,'type',localInterface.selectedSearchFilters.type);}}),localInterface.searchFilters[0].map(function(option,index){return/*#__PURE__*/_jsx(Checkbox,{contents:option,value:isSearchFilterSelected(0,option,'type'),onChange:function onChange(value){return switchSearchFilter(1,option,value,'type',localInterface.selectedSearchFilters.type);}});}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Checkbox,{contents:\"All\",value:isAllSearchFiltersSelected(1,'direction'),onChange:function onChange(value){return switchSearchFilter(1,\"All\",value,'direction',localInterface.selectedSearchFilters.direction);}}),localInterface.searchFilters[1].map(function(option,index){return/*#__PURE__*/_jsx(Checkbox,{contents:option,value:isSearchFilterSelected(1,option,'direction'),onChange:function onChange(value){return switchSearchFilter(1,option,value,'direction',localInterface.selectedSearchFilters.direction);}});}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){$setUpdater(Math.random());},className:\"_bordered _blue _wa\",children:\"Filter\"})]});}})]}),/*#__PURE__*/_jsxs(\"div\",{tabIndex:-1,className:\"filter-button\",onFocus:function onFocus(){return setHashtagFilterShown(true);},onBlur:function onBlur(e){return!e.currentTarget.contains(e.relatedTarget)&&setHashtagFilterShown(false);},children:[/*#__PURE__*/_jsx(\"button\",{className:classNames(\"_wa\",\"_rounded\",\"_iconed\",{_blue:!isAllTagWordsSelected()}),children:/*#__PURE__*/_jsx(Icon,{icon:\"hashtag-1\"})}),/*#__PURE__*/_jsx(Transition,{in:hashtagFilterShown,mountOnEnter:true,unmountOnExit:true,timeout:210,children:function children(state){return/*#__PURE__*/_jsxs(\"div\",{className:classNames(\"filter-wrapper\",\"transition-fade-\".concat(state)),children:[/*#__PURE__*/_jsx(Checkbox,{contents:\"All\",value:isAllTagWordsSelected(),onChange:function onChange(value){return switchTagWord(\"All\",value);}}),reportData.interface.tag_words.map(function(option,i){return/*#__PURE__*/_jsx(Checkbox,{contents:option,value:isTagWordSelected(option),onChange:function onChange(value){return switchTagWord(option,value);}},i);}),/*#__PURE__*/_jsx(\"button\",{className:\"_bordered _blue _wa\",children:\"Filter\"})]});}})]})]}),childrenBeforeDateType:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Select,{zeroed:true,options:[{span:'Calls',value:'calls'},{span:'Sources',value:'calls.sources'},{span:'Area',value:'calls.areas'},{span:'Numbers',value:'calls.numbers'}],selectedOption:\"calls\",onChange:function onChange(value){return $router.router.navigate(value,{},{reload:true});}})})})}),/*#__PURE__*/_jsx(ReportTableControls,{zIndex:5,onMaxRowsChange:function onMaxRowsChange(){$setUpdater(Math.random());},amount:{total:reportData.interface.rows_all,start:reportData.interface.rows_start,end:reportData.interface.rows_end},page:localInterface.page,maxPages:reportData.interface.max_pages,onPagesStart:function onPagesStart(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:1}));},onPrevPage:function onPrevPage(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:localInterface.page-1}));},onNextPage:function onNextPage(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:localInterface.page+1}));},onPagesEnd:function onPagesEnd(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:reportData.interface.max_pages}));},sort:localInterface.sort,sortFields:localInterface.sortFields,onSortFieldChange:function onSortFieldChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:_objectSpread(_objectSpread({},localInterface.sort),{},{field:value})}));},onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:_objectSpread(_objectSpread({},localInterface.sort),{},{direction:value})}));},onSortFire:function onSortFire(){return 0;}}),/*#__PURE__*/_jsxs(\"div\",{className:\"contents\",children:[/*#__PURE__*/_jsxs(\"table\",{className:classNames('table','__show-on-wide',{__respectAsidePanel:props.store.navActive.is}),children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(ReportTableField,{contents:/*#__PURE__*/_jsx(\"span\",{children:\"Date\"}),sortDirection:localInterface.sort.field==='created_at'?localInterface.sort.direction:undefined,onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:{field:'created_at',direction:value}}));},onFilterFire:function onFilterFire(){return $setUpdater(Math.random());}}),/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(ReportTableField,{contents:/*#__PURE__*/_jsx(\"span\",{children:\"Dispatcher\"}),allFiltersSelected:isAllFiltersSelected(\"dispatcher\"),onAllFiltersChange:function onAllFiltersChange(value){return switchFilter(\"dispatcher\",\"All\",value);},filterWords:reportData.interface.filter_words.dispatcher.map(function(filterWord){return{word:filterWord,selected:isFilterSelected(\"dispatcher\",filterWord)};}),onFilterChange:function onFilterChange(value){return switchFilter(\"dispatcher\",value.word,value.selected);},sortDirection:localInterface.sort.field==='dispatcher'?localInterface.sort.direction:undefined,onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:{field:'dispatcher',direction:value}}));},onFilterFire:function onFilterFire(){return $setUpdater(Math.random());}}),/*#__PURE__*/_jsx(ReportTableField,{contents:/*#__PURE__*/_jsx(\"span\",{children:\"Caller Name\"}),sortDirection:localInterface.sort.field==='caller_name'?localInterface.sort.direction:undefined,onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:{field:'caller_name',direction:value}}));},onFilterFire:function onFilterFire(){return $setUpdater(Math.random());}}),/*#__PURE__*/_jsx(ReportTableField,{contents:/*#__PURE__*/_jsx(\"span\",{children:\"Client\"}),sortDirection:localInterface.sort.field==='client'?localInterface.sort.direction:undefined,onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:{field:'client',direction:value}}));},onFilterFire:function onFilterFire(){return $setUpdater(Math.random());}}),/*#__PURE__*/_jsx(ReportTableField,{contents:/*#__PURE__*/_jsx(\"span\",{children:\"From\"}),sortDirection:localInterface.sort.field==='call_from'?localInterface.sort.direction:undefined,onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:{field:'call_from',direction:value}}));},onFilterFire:function onFilterFire(){return $setUpdater(Math.random());}}),/*#__PURE__*/_jsx(ReportTableField,{contents:/*#__PURE__*/_jsx(\"span\",{children:\"Friendly name\"}),allFiltersSelected:isAllFiltersSelected(\"friendly_name\"),onAllFiltersChange:function onAllFiltersChange(value){return switchFilter(\"friendly_name\",\"All\",value);},filterWords:reportData.interface.filter_words.friendly_name.map(function(filterWord){return{word:filterWord,selected:isFilterSelected(\"friendly_name\",filterWord)};}),onFilterChange:function onFilterChange(value){return switchFilter(\"friendly_name\",value.word,value.selected);},sortDirection:localInterface.sort.field==='friendly_name'?localInterface.sort.direction:undefined,onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:{field:'friendly_name',direction:value}}));},onFilterFire:function onFilterFire(){return $setUpdater(Math.random());}}),/*#__PURE__*/_jsx(ReportTableField,{contents:/*#__PURE__*/_jsx(\"span\",{children:\"To\"}),sortDirection:localInterface.sort.field==='call_to'?localInterface.sort.direction:undefined,onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:{field:'call_to',direction:value}}));},onFilterFire:function onFilterFire(){return $setUpdater(Math.random());}}),/*#__PURE__*/_jsx(ReportTableField,{contents:/*#__PURE__*/_jsx(\"span\",{children:\"Extension\"}),sortDirection:localInterface.sort.field==='extension'?localInterface.sort.direction:undefined,onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:{field:'extension',direction:value}}));},onFilterFire:function onFilterFire(){return $setUpdater(Math.random());}}),/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(ReportTableField,{contents:/*#__PURE__*/_jsx(\"span\",{children:\"Status\"}),allFiltersSelected:isAllFiltersSelected(\"status\"),onAllFiltersChange:function onAllFiltersChange(value){return switchFilter(\"status\",\"All\",value);},filterWords:reportData.interface.filter_words.status.map(function(filterWord){return{word:filterWord,selected:isFilterSelected(\"status\",filterWord)};}),onFilterChange:function onFilterChange(value){return switchFilter(\"status\",value.word,value.selected);},sortDirection:localInterface.sort.field==='status'?localInterface.sort.direction:undefined,onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:{field:'status',direction:value}}));},onFilterFire:function onFilterFire(){return $setUpdater(Math.random());}}),/*#__PURE__*/_jsx(ReportTableField,{contents:/*#__PURE__*/_jsx(\"span\",{children:\"Duration\"}),sortDirection:localInterface.sort.field==='avg_duration'?localInterface.sort.direction:undefined,onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:{field:'avg_duration',direction:value}}));},onFilterFire:function onFilterFire(){return $setUpdater(Math.random());}}),/*#__PURE__*/_jsx(\"th\",{})]}),reportData.calls.map(function(call,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:call.created_at}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:classNames('_zeroed','_iconed',{_red:call.status==='Canceled',_green:call.status==='Completed'&&call.direction==='inbound',_blue:call.status==='Completed'&&call.direction==='outbound'||call.status==='Active'}),children:/*#__PURE__*/_jsx(Icon,{icon:\"arrow-20\",className:classNames({'_rotated-180':call.direction==='outbound'})})})}),/*#__PURE__*/_jsx(\"td\",{children:call.dispatcher}),/*#__PURE__*/_jsx(\"td\",{children:call.caller_name}),/*#__PURE__*/_jsx(\"td\",{children:call.client?/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container\",style:{gap:'5px'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"_zeroed _iconed _gray\",children:/*#__PURE__*/_jsx(Icon,{icon:\"user-32\"})}),/*#__PURE__*/_jsx(\"span\",{children:call.client})]}):null}),/*#__PURE__*/_jsx(\"td\",{children:call.call_from}),/*#__PURE__*/_jsx(\"td\",{children:call.friendly_name}),/*#__PURE__*/_jsx(\"td\",{children:call.call_to}),/*#__PURE__*/_jsx(\"td\",{children:call.extension}),/*#__PURE__*/_jsx(\"td\",{children:call.is_appointment?/*#__PURE__*/_jsx(\"button\",{className:classNames('_zeroed','_iconed',{_green:call.is_appointment==='main',_blue:call.is_appointment==='lead'}),children:/*#__PURE__*/_jsx(Icon,{icon:\"clipboard-5\"})}):null}),/*#__PURE__*/_jsx(\"td\",{className:classNames({'red-text':call.status==='Canceled','green-text':call.status==='Completed','blue-text':!['Canceled','Completed'].includes(call.status)}),children:call.status}),/*#__PURE__*/_jsx(\"td\",{children:call.duration}),/*#__PURE__*/_jsx(\"td\",{children:call.call_url?/*#__PURE__*/_jsx(\"button\",{className:\"_zeroed _iconed\",onClick:function onClick(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{callListenPopup:call.call_url}));},children:/*#__PURE__*/_jsx(Icon,{icon:\"media-control-48\"})}):null})]},i);})]}),/*#__PURE__*/_jsxs(\"table\",{className:classNames('table','__hide-on-wide','__hide-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:[/*#__PURE__*/_jsx(\"tr\",{}),reportData.calls.map(function(call,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"2675NSM-A-01X\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container _gap-narrow\",children:[/*#__PURE__*/_jsx(\"button\",{className:classNames('_zeroed','_iconed',{_red:call.status==='Canceled',_green:call.status==='Completed'&&call.direction==='inbound',_blue:call.status==='Completed'&&call.direction==='outbound'||call.status==='Active'}),children:/*#__PURE__*/_jsx(Icon,{icon:\"arrow-20\",className:classNames({'_rotated-180':call.direction==='outbound'})})}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Dispatcher: \",call.dispatcher]})]})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"div\",{children:call.caller_name}),call.client?/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container\",style:{gap:'5px'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"_zeroed _iconed _gray\",children:/*#__PURE__*/_jsx(Icon,{icon:\"user-32\"})}),/*#__PURE__*/_jsx(\"span\",{children:call.client})]}):/*#__PURE__*/_jsx(\"span\",{children:\"\\xA0\"})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"From: \",call.call_from]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"To: \",call.call_to]})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"div\",{children:call.friendly_name}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Extension: \",call.extension]})]}),/*#__PURE__*/_jsx(\"td\",{children:call.is_appointment?/*#__PURE__*/_jsx(\"button\",{className:classNames('_zeroed','_iconed',{_green:call.is_appointment==='main',_blue:call.is_appointment==='lead'}),children:/*#__PURE__*/_jsx(Icon,{icon:\"clipboard-5\"})}):null}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"div\",{className:classNames({'red-text':call.status==='Canceled','green-text':call.status==='Completed','blue-text':!['Canceled','Completed'].includes(call.status)}),children:call.status}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container _gap-narrow\",children:[/*#__PURE__*/_jsx(\"div\",{children:call.duration}),call.call_url?/*#__PURE__*/_jsx(\"button\",{className:\"_zeroed _iconed\",onClick:function onClick(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{callListenPopup:call.call_url}));},children:/*#__PURE__*/_jsx(Icon,{icon:\"media-control-48\"})}):null]})]})]},i);})]}),/*#__PURE__*/_jsx(\"div\",{className:classNames('mobile-table-items','__show-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:reportData.calls.map(function(call,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__top\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:classNames('_zeroed','_iconed',{_red:call.status==='Canceled',_green:call.status==='Completed'&&call.direction==='inbound',_blue:call.status==='Completed'&&call.direction==='outbound'||call.status==='Active'}),children:/*#__PURE__*/_jsx(Icon,{icon:\"arrow-20\",className:classNames({'_rotated-180':call.direction==='outbound'})})}),/*#__PURE__*/_jsx(\"strong\",{children:call.friendly_name})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"strong\",{children:call.caller_name})}),call.client?/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container\",style:{gap:'5px'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"_zeroed _iconed _gray\",children:/*#__PURE__*/_jsx(Icon,{icon:\"user-32\"})}),/*#__PURE__*/_jsx(\"span\",{children:call.client})]}):/*#__PURE__*/_jsx(\"span\",{children:\"\\xA0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsx(\"div\",{className:classNames({'red-text':call.status==='Canceled','green-text':call.status==='Completed','blue-text':!['Canceled','Completed'].includes(call.status)}),children:call.status}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container\",children:[/*#__PURE__*/_jsx(\"span\",{children:call.duration}),call.call_url?/*#__PURE__*/_jsx(\"button\",{className:\"_zeroed _iconed\",onClick:function onClick(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{callListenPopup:call.call_url}));},children:/*#__PURE__*/_jsx(Icon,{icon:\"media-control-48\"})}):null]}),call.is_appointment?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:classNames('_zeroed','_iconed',{_green:call.is_appointment==='main',_blue:call.is_appointment==='lead'}),children:/*#__PURE__*/_jsx(Icon,{icon:\"clipboard-5\"})})}):null]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"gray\",children:\"From:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",call.call_from]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"gray\",children:\"To:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",call.call_to]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"gray\",children:\"Extension:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",call.extension]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsx(\"div\",{children:call.created_at}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Dispatcher: \",call.dispatcher]})]})]})]},i);})})]}),/*#__PURE__*/_jsx(ReportTableControls,{isUnder:true,onMaxRowsChange:function onMaxRowsChange(){return $setUpdater(Math.random());},amount:{total:reportData.interface.rows_all,start:reportData.interface.rows_start,end:reportData.interface.rows_end},page:localInterface.page,maxPages:reportData.interface.max_pages,onPagesStart:function onPagesStart(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:1}));},onPrevPage:function onPrevPage(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:localInterface.page-1}));},onNextPage:function onNextPage(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:localInterface.page+1}));},onPagesEnd:function onPagesEnd(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:reportData.interface.max_pages}));},sort:localInterface.sort,sortFields:localInterface.sortFields,onSortFieldChange:function onSortFieldChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:_objectSpread(_objectSpread({},localInterface.sort),{},{field:value})}));},onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:_objectSpread(_objectSpread({},localInterface.sort),{},{direction:value})}));},onSortFire:function onSortFire(){return 0;}}),localInterface.callListenPopup?/*#__PURE__*/_jsx(\"div\",{className:\"popup callListenPopup\",onClick:function onClick(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{callListenPopup:null}));},children:/*#__PURE__*/_jsx(\"div\",{className:\"wrapper\",onClick:function onClick(e){return e.stopPropagation();},children:/*#__PURE__*/_jsx(\"div\",{className:\"call-player\",children:/*#__PURE__*/_jsx(AudioPlayer,{audioSrc:localInterface.callListenPopup})})})}):null]}):null});});export default CallsPage_List;","map":{"version":3,"sources":["/Users/nicole/rrrr/crm/src/pages/Calls/List.tsx"],"names":["classNames","moment","useEffect","useState","connect","useRoute","Transition","AudioPlayer","Checkbox","Icon","ReportFilters","ReportTableControls","ReportTableField","Select","nError","getDateRangeByPreset","mapDispatchToProps","mapStateToProps","getActiveAccount","httpClient","qs","CallsPage_List","props","$router","activeAccount","store","Math","random","$updater","$setUpdater","topFilterShown","setTopFilterShown","hashtagFilterShown","setHashtagFilterShown","reportIsDeprecated","setReportIsDeprecated","reportData","setReportData","search","callListenPopup","dateRangeCalendarShown","dateRangePreset","min_date","Date","max_date","page","filter_words","dispatcher","friendly_name","status","tag_words","searchFilters","selectedSearchFilters","type","direction","sort","field","sortFields","span","value","localInterface","setLocalInterface","console","log","interface","loadCalls","defaults","headers","accessToken","activeFilters","Object","keys","forEach","key","length","reqData","account_id","limit_rows","JSON","stringify","reportsMaxRows","date_start","date_end","filter_tag","main_filter","sort_field","sort_type","filter_field","post","calls","data","startOf","toDate","endOf","setTimeout","isFilterSelected","includes","isAllFiltersSelected","switchFilter","toggle","_arr","i","findIndex","filter","splice","every","option","concat","push","isTagWordSelected","isAllTagWordsSelected","switchTagWord","isSearchFilterSelected","isAllSearchFiltersSelected","switchSearchFilter","$arr","$arrType","$object","map","v","index","dashboard","callers","missed_calls","active_calls","e","currentTarget","contains","relatedTarget","_blue","state","router","navigate","reload","total","rows_all","start","rows_start","end","rows_end","max_pages","__respectAsidePanel","navActive","is","undefined","filterWord","word","selected","call","created_at","_red","_green","caller_name","client","gap","call_from","call_to","extension","is_appointment","duration","call_url","stopPropagation"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport classNames from \"classnames\"\nimport moment from \"moment\"\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useRoute } from \"react-router5\"\nimport { Transition } from \"react-transition-group\"\nimport AudioPlayer from \"../../components/AudioPlayer\"\nimport Checkbox from \"../../components/Checkbox\"\nimport Icon from \"../../components/Icon\"\nimport ReportFilters from \"../../components/reports/Filters\"\nimport ReportTableControls from \"../../components/reports/TableControls\"\nimport ReportTableField from \"../../components/reports/TableField\"\nimport Select from \"../../components/Select\"\nimport { nError } from \"../../funcs/base\"\nimport { getDateRangeByPreset } from \"../../funcs/reports\"\nimport { Call } from \"../../models/Calls\"\nimport { DateRangePreset } from \"../../models/Misc\"\nimport { StoreDispatch, StoreState, mapDispatchToProps, mapStateToProps } from \"../../store\";\n\nimport \"../../styles/pages/common/report-list.sass\"\nimport {getActiveAccount, httpClient} from \"../../funcs\";\nimport Account from \"../../models/Account\";\nimport qs from \"qs\";\nimport filters from \"../../components/reports/Filters\";\n\ninterface Props {\n  store: StoreState,\n  dispatcher: StoreDispatch\n}\n\ntype FilterWord = 'dispatcher' | 'friendly_name' | 'status'\n\ninterface CallsReport {\n\n  interface: {\n\n    filter_words: {\n\n      dispatcher: string[],\n      friendly_name: string[],\n      status: string[]\n    },\n\n    tag_words: string[],\n\n    max_pages: number,\n\n    rows_start: number,\n    rows_end: number,\n    rows_all: number,\n\n    min_date: Date,\n    max_date: Date\n  },\n\n  permissions: {\n    \n    listen_call: boolean,\n    show_client: boolean,\n    show_appointment: boolean\n  },\n\n  dashboard: {\n    calls: string,\n    callers: string,\n    missed_calls: string,\n    active_calls: string\n  },\n\n  calls: Call[]\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst CallsPage_List = connect(mapStateToProps, mapDispatchToProps)(function(props: Props) {\n\n  const $router = useRoute()\n\n  const activeAccount = getActiveAccount(props.store) as Account;\n  const [$updater, $setUpdater] = useState<any>(Math.random())\n\n  const [topFilterShown, setTopFilterShown] = useState(false)\n  const [hashtagFilterShown, setHashtagFilterShown] = useState(false)\n\n  const [reportIsDeprecated, setReportIsDeprecated] = useState(false)\n\n  const [reportData, setReportData] = useState<CallsReport | null>(null)\n  const [localInterface, setLocalInterface] = useState({\n\n    search: '',\n\n    callListenPopup: null as string | null,\n    \n    dateRangeCalendarShown: false,\n    dateRangePreset: \"custom\" as DateRangePreset,\n\n    min_date: new Date,\n    max_date: new Date,\n\n    page: 1,\n\n    filter_words: {\n\n      dispatcher: [] as string[],\n      friendly_name: [] as string[],\n      status: [] as string[],\n    },\n\n    tag_words: [] as string[],\n\n    searchFilters: [ [\"source\", \"system\"], [\"inboud\", \"outbound\"]],\n    selectedSearchFilters: {type:['source'] as string[], direction:[] as string[]},\n\n    sort: {\n      field: 'created_at',\n      direction: 'up' as 'up' | 'down'\n    },\n    sortFields: [{\n      span: 'Date',\n      value: 'created_at'\n    },{\n      span: 'Dispatcher',\n      value: 'dispatcher'\n    },{\n      span: 'Caller Name',\n      value: 'caller_name'\n    },{\n      span: 'Client',\n      value: 'client'\n    },{\n      span: 'From',\n      value: 'call_from'\n    },{\n      span: 'Friendly Name',\n      value: 'friendly_name'\n    },{\n      span: 'Extension',\n      value: 'extension'\n    },{\n      span: 'Status',\n      value: 'status'\n    },{\n      span: 'Duration',\n      value: 'duration'\n    }]\n\n  })\n  console.log(localInterface.min_date);\n  console.log(localInterface.max_date);\n  // Watch date range preset\n  useEffect(() => {\n\n    if(!reportData) return\n\n    setLocalInterface({\n      ...localInterface,\n      ...(getDateRangeByPreset(localInterface.dateRangePreset, reportData?.interface.min_date, reportData?.interface.max_date))\n    })\n\n  }, [localInterface.dateRangePreset])\n\n  // Load calls function\n  async function loadCalls() {\n    httpClient.defaults.headers['Authorization'] = `Bearer ${props.store.accessToken}`\n\n    let activeFilters: any = {...localInterface.filter_words}\n    Object.keys(localInterface.filter_words).forEach((key: any) => !activeFilters[key].length && delete activeFilters[key]);\n\n    let reqData = {\n      account_id: activeAccount.account_id,\n      limit_rows: JSON.stringify(props.store.reportsMaxRows),\n      page: JSON.stringify(localInterface.page),\n      date_start: localInterface.min_date,\n      date_end: localInterface.max_date,\n      filter_tag: JSON.stringify(localInterface.tag_words),\n      main_filter: JSON.stringify(localInterface.selectedSearchFilters),\n      sort_field: localInterface.sort.field,\n      sort_type: localInterface.sort.direction === 'up' ? 'asc' : 'desc',\n      filter_field: JSON.stringify(activeFilters),\n      ...(localInterface.search ? {search: localInterface.search} : {})\n    };\n\n    try {\n      const { data: calls } = (await httpClient.post('/calls/report/calls',qs.stringify(reqData) )) as {data: CallsReport}\n\n      setReportData({\n        ...calls,\n\n        interface: {\n\n          ...calls.interface,\n          min_date: moment(calls.interface.min_date).startOf('day').toDate(),\n          max_date: moment(calls.interface.max_date).endOf('day').toDate(),\n        }\n      })\n\n\n      setTimeout(() => {\n        setReportIsDeprecated(false)\n      }, 100)\n    }\n    catch (error) {\n      nError(error)\n    }\n\n  }\n\n  // Watch for deprecated\n  useEffect(() => {\n    console.log('2')\n    if(!reportData) return\n    setReportIsDeprecated(true)\n  }, [\n    localInterface.min_date,\n    localInterface.max_date\n  ])\n\n  // Load calls on page mount\n  useEffect(() => { loadCalls() }, [\n    $updater,\n    localInterface.page,\n  ])\n\n  // Is filter selected function\n  function isFilterSelected(field: FilterWord, value: string) {\n    return localInterface.filter_words[field].includes(value)\n  }\n\n  // Is all filters selected function\n  function isAllFiltersSelected(field: FilterWord) {\n    return localInterface.filter_words[field].length === 0\n  }\n\n  // Filter switch function\n  function switchFilter(field: FilterWord, value: string, toggle: boolean) {\n\n    let _arr = [...localInterface.filter_words[field]]\n\n    if (toggle && value === \"All\") { _arr = [] }\n    \n    else if (!toggle) {\n\n      while (true) {\n        let i = _arr.findIndex((filter) => filter === value)\n        if(i === -1) break\n        _arr.splice(i, 1)\n      }\n    }\n      \n    else {\n\n      if (reportData?.interface.filter_words[field].every((option) => _arr.concat([value]).includes(option)))\n        _arr = []\n\n      else if(_arr.findIndex((filter) => filter === value) === -1)\n        _arr.push(value)\n    }\n\n    setLocalInterface({...localInterface, filter_words: {...localInterface.filter_words, [field]: _arr}})\n  }\n\n  // Is tag_word selected function\n  function isTagWordSelected(value: string) {\n    return localInterface.tag_words.includes(value)\n  }\n  \n  // Is all tag words selected function\n  function isAllTagWordsSelected() {\n    return localInterface.tag_words.length === 0\n  }\n\n  // Toggle tagword function\n  function switchTagWord(value: string, toggle: boolean) {\n\n    let _arr = [...localInterface.tag_words]\n\n    if (toggle && value === \"All\") {\n      _arr = []\n    }\n    else if (!toggle) {\n\n      while (true) {\n        let i = _arr.findIndex((filter) => filter === value)\n        if(i === -1) break\n        _arr.splice(i, 1)\n      }\n    }\n    else {\n\n      if (reportData?.interface.tag_words.every((option) => _arr.concat([value]).includes(option))) {\n        _arr = []\n      }\n\n      else if(_arr.findIndex((filter) => filter === value) === -1)\n        _arr.push(value)\n    }\n\n    setLocalInterface({...localInterface, tag_words: _arr})\n  }\n\n  // Is search field selected function\n\n  function isSearchFilterSelected(i:number, value: string, field: string) {\n\n    if (field == 'type'){\n      return localInterface.selectedSearchFilters.type.includes(value);\n    }\n    if (field == 'direction'){\n      return localInterface.selectedSearchFilters.direction.includes(value);\n    }\n  }\n\n  // Is all search fields selected function\n  function isAllSearchFiltersSelected(i: number, field: string) {\n    if (field == 'type'){\n      return localInterface.selectedSearchFilters.type.length === 0\n    }else if (field == 'direction'){\n      return localInterface.selectedSearchFilters.direction.length === 0\n    }\n\n  }\n\n  // Toggle search filter function\n  function switchSearchFilter(i: number, value: string, toggle: boolean, field: string, $arr: string[] ) {\n    let $arrType = $arr;\n    let $object = localInterface.selectedSearchFilters;\n      if (toggle && value === \"All\") {\n        $arrType = [];\n      }\n      else if (toggle == false) {\n        for (let i = 0; i < $arrType.length; i++){\n          $arrType.map((v, index) => {\n            if (v == value ){\n              $arrType.splice(index, 1)\n            }\n          })\n        }\n      } else {\n        $arrType.push(value);\n      }\n\n    if (field == 'type'){\n      if ($arrType.length == localInterface.searchFilters[0].length) {\n        $arrType = [];\n      }\n      $object.type = $arrType;\n    }\n    if (field == 'direction'){\n      if ($arrType.length == localInterface.searchFilters[1].length) {\n        $arrType = [];\n      }\n      $object.direction = $arrType;\n    }\n      setLocalInterface({...localInterface, selectedSearchFilters: $object})\n  }\n\n  // Render function\n  return (<>\n    {reportData ? (\n      <div className=\"CallsPage_List\" >\n      \n        { /* Reports grid */}\n        <div className=\"reports-grid\">\n        \n          <div className=\"cell\">\n\n            <div className=\"amount\">{reportData.dashboard.calls}</div>\n            <div className=\"legend\">Calls</div>\n          </div>\n\n          <div className=\"cell\">\n\n            <div className=\"amount\">{reportData.dashboard.callers}</div>\n            <div className=\"legend\">Callers</div>\n          </div>\n\n          <div className=\"cell\">\n\n            <div className=\"amount\">{reportData.dashboard.missed_calls}</div>\n            <div className=\"legend\">Missed Calls</div>\n          </div>\n\n          <div className=\"cell\">\n\n            <div className=\"amount\">{reportData.dashboard.active_calls}</div>\n            <div className=\"legend\">Active Calls</div>\n          </div>\n        </div>\n\n        { /* Page header */}\n        <div className=\"page-header\">\n          <h1>Calls</h1>\n        </div>\n\n        { /* List filters */}\n        <ReportFilters\n          onSearchInputChange={(value) => setLocalInterface({...localInterface, search: value})}\n\n          dateRangePreset={localInterface.dateRangePreset}\n          onDateRangePresetChange={(value) => setLocalInterface({ ...localInterface, dateRangePreset: value })}\n\n          minDate={localInterface.min_date}\n          onMinDateChange={(value) => setLocalInterface({...localInterface, min_date: value})}\n\n          maxDate={localInterface.max_date}\n          onMaxDateChange={(value) => setLocalInterface({...localInterface, max_date: value})}\n\n          updateButtonActive={reportIsDeprecated}\n          onUpdate={() => {\n            setReportIsDeprecated(false);\n            $setUpdater(Math.random());\n          }}\n      \n          childrenAfterSearch={(<>\n            <div tabIndex={-1} className=\"filter-button\" onFocus={() => setTopFilterShown(true)} onBlur={(e) => !e.currentTarget.contains(e.relatedTarget as any) && setTopFilterShown(false)}>\n              <button className={classNames(\"_wa\", \"_rounded\", \"_iconed\", {\n                _blue: !isAllSearchFiltersSelected(0, 'type') || !isAllSearchFiltersSelected(1, 'direction')\n              })}>\n                <Icon icon=\"filter-8\" />\n              </button>\n\n              <Transition in={topFilterShown} mountOnEnter={true} unmountOnExit={true} timeout={210}>\n                {(state) => (\n                  <div className={ classNames(\"filter-wrapper\", `transition-fade-${state}`) }>\n                    <Checkbox contents=\"All\" value={isAllSearchFiltersSelected(0, 'type')} onChange={(value) => switchSearchFilter(0, \"All\", value, 'type', localInterface.selectedSearchFilters.type )} />\n                    {localInterface.searchFilters[0].map((option, index) => (\n                        <Checkbox contents={option} value={isSearchFilterSelected(0, option, 'type')} onChange={(value) => switchSearchFilter(1, option, value, 'type', localInterface.selectedSearchFilters.type)} />\n                    ))}\n                    <hr />\n                    <Checkbox contents=\"All\" value={isAllSearchFiltersSelected(1, 'direction')} onChange={(value) => switchSearchFilter(1, \"All\", value, 'direction', localInterface.selectedSearchFilters.direction )} />\n                    {localInterface.searchFilters[1].map((option, index) => (\n                      <Checkbox contents={option} value={isSearchFilterSelected(1, option, 'direction')} onChange={(value) => switchSearchFilter(1, option, value, 'direction', localInterface.selectedSearchFilters.direction )} />\n                    ))}\n                    <button onClick={()=>{\n                      $setUpdater(Math.random());\n                    }} className=\"_bordered _blue _wa\">\n                      Filter\n                    </button>\n                  </div>\n                )}\n              </Transition>\n            </div>\n            \n            <div tabIndex={-1} className=\"filter-button\" onFocus={() => setHashtagFilterShown(true)} onBlur={(e) => !e.currentTarget.contains(e.relatedTarget as any) && setHashtagFilterShown(false)}>\n              <button className={classNames(\"_wa\", \"_rounded\", \"_iconed\", {\n                _blue: !isAllTagWordsSelected()\n              })}>\n                <Icon icon=\"hashtag-1\" />\n              </button>\n\n              <Transition in={hashtagFilterShown} mountOnEnter={true} unmountOnExit={true} timeout={210}>\n                {(state) => (\n                  <div className={ classNames(\"filter-wrapper\", `transition-fade-${state}`) }>\n                    <Checkbox contents=\"All\" value={isAllTagWordsSelected()} onChange={(value) => switchTagWord(\"All\", value)} />\n                    {reportData.interface.tag_words.map((option, i) => (\n                      <Checkbox contents={option} key={i} value={isTagWordSelected(option)} onChange={(value) => switchTagWord(option, value)} />\n                    ))}\n                    <button className=\"_bordered _blue _wa\">\n                      Filter\n                    </button>\n                  </div>\n                )}\n              </Transition>\n            </div>\n          </>)}\n\n          childrenBeforeDateType={(<>\n            <div>\n              <Select zeroed={true} options={[{\n                span: 'Calls',\n                value: 'calls'\n              }, {\n                span: 'Sources',\n                value: 'calls.sources'\n              },{\n                span: 'Area',\n                value: 'calls.areas'\n              },{\n                span: 'Numbers',\n                value: 'calls.numbers'\n              }]} selectedOption=\"calls\" onChange={(value) => $router.router.navigate(value as string, {}, {reload: true})} />\n            </div>\n          </>)}\n        />\n\n        {/* Table controls */}\n        <ReportTableControls\n          zIndex={5}\n          \n          onMaxRowsChange={() => {\n            $setUpdater(Math.random())\n          }}\n\n          amount={{\n            total: reportData.interface.rows_all,\n            start: reportData.interface.rows_start,\n            end: reportData.interface.rows_end\n          }}\n\n          page={localInterface.page}\n          maxPages={reportData.interface.max_pages}\n          onPagesStart={() => setLocalInterface({...localInterface, page: 1})}\n          onPrevPage={() => setLocalInterface({...localInterface, page: localInterface.page-1})}\n          onNextPage={() => setLocalInterface({...localInterface, page: localInterface.page+1})}\n          onPagesEnd={() => setLocalInterface({...localInterface, page: reportData.interface.max_pages})}\n          \n          sort={localInterface.sort}\n          sortFields={localInterface.sortFields}\n          onSortFieldChange={(value) => setLocalInterface({...localInterface, sort: {...localInterface.sort, field: value}})}\n          onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {...localInterface.sort, direction: value}})}\n          onSortFire={() => 0}\n        />\n\n        <div className=\"contents\">\n\n          {/* Wide desktop table */}\n          <table className={classNames('table', '__show-on-wide', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr>\n              <ReportTableField\n                contents={(<span>Date</span>)}\n              \n                sortDirection={localInterface.sort.field === 'created_at' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'created_at', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <th></th>\n              <ReportTableField\n                contents={(<span>Dispatcher</span>)}\n\n                allFiltersSelected={isAllFiltersSelected(\"dispatcher\")}\n                onAllFiltersChange={(value) => switchFilter(\"dispatcher\", \"All\", value)}\n\n                filterWords={reportData.interface.filter_words.dispatcher.map((filterWord) => ({\n                  word: filterWord,\n                  selected: isFilterSelected(\"dispatcher\", filterWord)\n                }))}\n                onFilterChange={(value) => switchFilter(\"dispatcher\", value.word, value.selected)}\n\n                sortDirection={localInterface.sort.field === 'dispatcher' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'dispatcher', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Caller Name</span>)}\n\n                sortDirection={localInterface.sort.field === 'caller_name' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'caller_name', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Client</span>)}\n\n                sortDirection={localInterface.sort.field === 'client' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'client', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>From</span>)}\n\n                sortDirection={localInterface.sort.field === 'call_from' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'call_from', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Friendly name</span>)}\n\n                allFiltersSelected={isAllFiltersSelected(\"friendly_name\")}\n                onAllFiltersChange={(value) => switchFilter(\"friendly_name\", \"All\", value)}\n\n                filterWords={reportData.interface.filter_words.friendly_name.map((filterWord) => ({\n                  word: filterWord,\n                  selected: isFilterSelected(\"friendly_name\", filterWord)\n                }))}\n                onFilterChange={(value) => switchFilter(\"friendly_name\", value.word, value.selected)}\n\n                sortDirection={localInterface.sort.field === 'friendly_name' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'friendly_name', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>To</span>)}\n\n                sortDirection={localInterface.sort.field === 'call_to' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'call_to', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Extension</span>)}\n\n                sortDirection={localInterface.sort.field === 'extension' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'extension', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <th></th>\n              <ReportTableField\n                contents={(<span>Status</span>)}\n\n                allFiltersSelected={isAllFiltersSelected(\"status\")}\n                onAllFiltersChange={(value) => switchFilter(\"status\", \"All\", value)}\n\n                filterWords={reportData.interface.filter_words.status.map((filterWord) => ({\n                  word: filterWord,\n                  selected: isFilterSelected(\"status\", filterWord)\n                }))}\n                onFilterChange={(value) => switchFilter(\"status\", value.word, value.selected)}\n\n                sortDirection={localInterface.sort.field === 'status' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'status', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Duration</span>)}\n\n                sortDirection={localInterface.sort.field === 'avg_duration' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'avg_duration', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <th></th>\n            </tr>\n            {reportData.calls.map((call, i) => (\n              <tr key={i}>\n                <td>{call.created_at}</td>\n                <td>\n                  <button className={classNames('_zeroed', '_iconed', {\n                    _red: call.status === 'Canceled',\n                    _green: call.status === 'Completed' && call.direction === 'inbound',\n                    _blue: (\n                      call.status === 'Completed' && call.direction === 'outbound'\n                    ) || (\n                      call.status === 'Active'\n                    )\n                  })}>\n                    <Icon icon=\"arrow-20\" className={classNames({\n                      '_rotated-180': call.direction === 'outbound'\n                    })} />\n                  </button>\n                </td>\n                <td>{call.dispatcher}</td>\n                <td>{call.caller_name}</td>\n                <td>{call.client ? (\n                  <div className=\"flex-container\" style={{gap: '5px'}}>\n                    <button className=\"_zeroed _iconed _gray\">\n                      <Icon icon=\"user-32\" />\n                    </button>\n                    <span>{call.client}</span>\n                  </div>\n                ) : null}</td>\n                <td>{call.call_from}</td>\n                <td>{call.friendly_name}</td>\n                <td>{call.call_to}</td>\n                <td>{call.extension}</td>\n                <td>\n                  {call.is_appointment ? (\n                    <button className={classNames('_zeroed', '_iconed', {\n                      _green: call.is_appointment === 'main',\n                      _blue: call.is_appointment === 'lead'\n                    })}>\n                      <Icon icon=\"clipboard-5\" />\n                    </button>\n                  ) : null}\n                </td>\n                <td className={classNames({\n                  'red-text': call.status === 'Canceled',\n                  'green-text': call.status === 'Completed',\n                  'blue-text': !['Canceled', 'Completed'].includes(call.status),\n                })}>{call.status}</td>\n                <td>{call.duration}</td>\n                <td>\n                  {call.call_url ? (\n                    <button className=\"_zeroed _iconed\" onClick={() => setLocalInterface({...localInterface, callListenPopup: call.call_url})}>\n                      <Icon icon=\"media-control-48\" />\n                    </button>\n                  ) : null}\n                </td>\n              </tr>\n            ))}\n          </table>\n\n          {/* Medium screen table */}\n          <table className={classNames('table', '__hide-on-wide', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr></tr>\n            {reportData.calls.map((call, i) => (\n              <tr key={i}>\n                <td>\n                  <div>2675NSM-A-01X</div>\n                  <div className=\"flex-container _gap-narrow\">\n                    <button className={classNames('_zeroed', '_iconed', {\n                      _red: call.status === 'Canceled',\n                      _green: call.status === 'Completed' && call.direction === 'inbound',\n                      _blue: (\n                        call.status === 'Completed' && call.direction === 'outbound'\n                      ) || (\n                        call.status === 'Active'\n                      )\n                    })}>\n                      <Icon icon=\"arrow-20\" className={classNames({\n                        '_rotated-180': call.direction === 'outbound'\n                      })} />\n                    </button>\n                    <span>Dispatcher: {call.dispatcher}</span>\n                  </div>\n                </td>\n                <td>\n                  <div>\n                    {call.caller_name}\n                  </div>\n                  {call.client ? (\n                    <div className=\"flex-container\" style={{gap: '5px'}}>\n                      <button className=\"_zeroed _iconed _gray\">\n                        <Icon icon=\"user-32\" />\n                      </button>\n                      <span>{call.client}</span>\n                    </div>\n                  ) : <span>&nbsp;</span>}\n                </td>\n                <td>\n                  <div>From: {call.call_from}</div>\n                  <div>To: {call.call_to}</div>\n                </td>\n                <td>\n                  <div>{call.friendly_name}</div>\n                  <div>Extension: {call.extension}</div>\n                </td>\n                <td>\n                  {call.is_appointment ? (\n                    <button className={classNames('_zeroed', '_iconed', {\n                      _green: call.is_appointment === 'main',\n                      _blue: call.is_appointment === 'lead'\n                    })}>\n                      <Icon icon=\"clipboard-5\" />\n                    </button>\n                  ) : null}\n                </td>\n                <td>\n                  <div className={classNames({\n                    'red-text': call.status === 'Canceled',\n                    'green-text': call.status === 'Completed',\n                    'blue-text': !['Canceled', 'Completed'].includes(call.status),\n                  })}>{call.status}</div>\n                  <div className=\"flex-container _gap-narrow\">\n                    <div>{call.duration}</div>\n                    {call.call_url ? (\n                      <button className=\"_zeroed _iconed\" onClick={() => setLocalInterface({...localInterface, callListenPopup: call.call_url})}>\n                        <Icon icon=\"media-control-48\" />\n                      </button>\n                    ) : null}\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </table>\n\n          {/* Mobile table items */}\n          <div className={classNames('mobile-table-items', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n\n            {reportData.calls.map((call, i: number) => (\n              <div className=\"item\" key={i}>\n\n                <div className=\"__top\">\n\n                  <div className=\"__left\">\n                    <div className=\"flex-container\">\n                      <button className={classNames('_zeroed', '_iconed', {\n                        _red: call.status === 'Canceled',\n                        _green: call.status === 'Completed' && call.direction === 'inbound',\n                        _blue: (\n                          call.status === 'Completed' && call.direction === 'outbound'\n                        ) || (\n                          call.status === 'Active'\n                        )\n                      })}>\n                        <Icon icon=\"arrow-20\" className={classNames({\n                          '_rotated-180': call.direction === 'outbound'\n                        })} />\n                      </button>\n                      <strong>{call.friendly_name}</strong>\n                    </div>\n                    <div>\n                      <strong>{call.caller_name}</strong>\n                    </div>\n                    {call.client ? (\n                      <div className=\"flex-container\" style={{gap: '5px'}}>\n                        <button className=\"_zeroed _iconed _gray\">\n                          <Icon icon=\"user-32\" />\n                        </button>\n                        <span>{call.client}</span>\n                      </div>\n                    ) : (<span>&nbsp;</span>)}\n                  </div>\n\n                  <div className=\"__right\">\n                    <div className={classNames({\n                      'red-text': call.status === 'Canceled',\n                      'green-text': call.status === 'Completed',\n                      'blue-text': !['Canceled', 'Completed'].includes(call.status),\n                    })}>\n                      {call.status}\n                    </div>\n                    <div className=\"flex-container\">\n                      <span>{call.duration}</span>\n                      {call.call_url ? (\n                        <button className=\"_zeroed _iconed\" onClick={() => setLocalInterface({...localInterface, callListenPopup: call.call_url})}>\n                          <Icon icon=\"media-control-48\" />\n                        </button>\n                      ) : null}\n                    </div>\n                    {call.is_appointment ? (\n                      <div>\n                        <button className={classNames('_zeroed', '_iconed', {\n                          _green: call.is_appointment === 'main',\n                          _blue: call.is_appointment === 'lead'\n                        })}>\n                          <Icon icon=\"clipboard-5\" />\n                        </button>\n                      </div>\n                    ) : null}\n                  </div>\n                </div>\n\n                <div className=\"__bottom\">\n\n                  <div className=\"__left\">\n                    <div>\n                      <span className=\"gray\">From:</span>\n                      <span> {call.call_from}</span>\n                    </div>\n                    <div>\n                      <span className=\"gray\">To:</span>\n                      <span> {call.call_to}</span>\n                    </div>\n                    <div>\n                      <span className=\"gray\">Extension:</span>\n                      <span> {call.extension}</span>\n                    </div>\n                  </div>\n\n                  <div className=\"__right\">\n                    <div>\n                      {call.created_at}\n                    </div>\n                    <div>\n                      Dispatcher: {call.dispatcher}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Table controls */}\n        <ReportTableControls\n          isUnder={true}\n\n          onMaxRowsChange={() => $setUpdater(Math.random())}\n\n          amount={{\n            total: reportData.interface.rows_all,\n            start: reportData.interface.rows_start,\n            end: reportData.interface.rows_end\n          }}\n\n          page={localInterface.page}\n          maxPages={reportData.interface.max_pages}\n          onPagesStart={() => setLocalInterface({...localInterface, page: 1})}\n          onPrevPage={() => setLocalInterface({...localInterface, page: localInterface.page-1})}\n          onNextPage={() => setLocalInterface({...localInterface, page: localInterface.page+1})}\n          onPagesEnd={() => setLocalInterface({...localInterface, page: reportData.interface.max_pages})}\n          \n          sort={localInterface.sort}\n          sortFields={localInterface.sortFields}\n          onSortFieldChange={(value) => setLocalInterface({...localInterface, sort: {...localInterface.sort, field: value}})}\n          onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {...localInterface.sort, direction: value}})}\n          onSortFire={() => 0}\n        />\n\n        {/* Call listen popup */}\n        {localInterface.callListenPopup ? (\n          <div className=\"popup callListenPopup\" onClick={() => setLocalInterface({...localInterface, callListenPopup: null})}>\n\n            <div className=\"wrapper\" onClick={(e) => e.stopPropagation()}>\n            \n              <div className=\"call-player\">\n                <AudioPlayer audioSrc={localInterface.callListenPopup} />\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    ) : null}\n  </>)\n})\nexport default CallsPage_List\n"]},"metadata":{},"sourceType":"module"}