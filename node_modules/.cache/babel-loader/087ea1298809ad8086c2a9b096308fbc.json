{"ast":null,"code":"var _jsxFileName = \"/Users/nicole/rrrr/crm/src/pages/Permissions/Item.tsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Icon from \"../../components/Icon\";\nimport { nError } from \"../../funcs\";\nimport { mapDispatchToProps, mapStateToProps } from \"../../store\";\nimport \"../../styles/pages/common/entity-edit.sass\";\nimport Select from \"../../components/Select\";\nimport Checkbox from \"../../components/Checkbox\";\nimport { useRoute } from \"react-router5\";\nimport classNames from \"classnames\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PermissionsPage_Item = connect(mapStateToProps, mapDispatchToProps)(_s(function (props) {\n  _s();\n\n  const [readyToSave, setReadyToSave] = useState(false);\n  const $router = useRoute();\n  const [deleting, setDeleting] = useState(false);\n  const [readyToDelete, setReadyToDelete] = useState(false);\n  const [permissionData, setPermissionData] = useState(null);\n  const [selectedAction, setSelectedAction] = useState('');\n  const [newPermissionData, setNewPermissionData] = useState({\n    name: '',\n    users: '',\n    actions: []\n  });\n  const [availableActions, setAvailableActions] = useState([]); // Load info function\n\n  async function loadInfo() {\n    try {\n      const {\n        data: permissionData\n      } = await axios.get('/json/permission.json');\n\n      let _availableActions = [''].concat(permissionData.edit.actions.filter(action => !permissionData.permission.actions.includes(action)));\n\n      setPermissionData(permissionData);\n      setAvailableActions(_availableActions);\n      setSelectedAction(_availableActions[0]);\n      setNewPermissionData({ ...newPermissionData,\n        actions: permissionData.permission.actions\n      });\n      setTimeout(() => setReadyToSave(false), 100);\n    } catch (error) {\n      nError(error);\n    }\n  } // Load permission data\n\n\n  useEffect(() => {\n    loadInfo();\n  }, []); // Add action function\n\n  function addAction() {\n    if (!newPermissionData.actions || !permissionData || !newPermissionData) return;\n    setNewPermissionData({ ...newPermissionData,\n      actions: [...newPermissionData.actions, selectedAction]\n    });\n    let _availableActions = [...(permissionData === null || permissionData === void 0 ? void 0 : permissionData.edit.actions)];\n    _availableActions = permissionData.edit.actions.filter(action => !newPermissionData.actions.includes(action));\n\n    _availableActions.splice(_availableActions.findIndex(_action => selectedAction === _action), 1);\n\n    setAvailableActions([..._availableActions]);\n    setSelectedAction('');\n    setReadyToSave(true);\n  } // Remove action function\n\n\n  function removeAction(i) {\n    let _permissionActions = [...newPermissionData.actions];\n    let _action = _permissionActions[i];\n\n    _permissionActions.splice(i, 1);\n\n    setNewPermissionData({ ...newPermissionData,\n      actions: _permissionActions\n    });\n    setAvailableActions([...availableActions, _action]);\n    setReadyToSave(true);\n  }\n\n  useEffect(() => setReadyToSave(true), [newPermissionData]); // Render function\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: permissionData && newPermissionData ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"PermissionsPage_Item entity-edit\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrapper flex-container sb\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-container _gap-narrow\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Permission:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"item-name\",\n            children: permissionData.permission.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fieldset\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend\",\n          children: \"Main\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fields\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"__left\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Name:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                defaultValue: permissionData.permission.name,\n                onChange: _ref => {\n                  let {\n                    target: {\n                      value\n                    }\n                  } = _ref;\n                  return setNewPermissionData({ ...newPermissionData,\n                    name: value\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fieldset\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-container sb wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend\",\n            children: \"Actions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-action-wrapper\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Action:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(Select, {\n                options: availableActions.map(action => ({\n                  span: action,\n                  value: action\n                })),\n                selectedOption: selectedAction,\n                onChange: value => setSelectedAction(value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                disabled: !selectedAction,\n                className: \"_green\",\n                onClick: () => addAction(),\n                children: \"Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table som\",\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: '100%'\n              },\n              children: \"Action\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Allow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this), newPermissionData.actions.map((action, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: action\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                contents: '',\n                value: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"_zeroed _iconed _red\",\n                onClick: () => removeAction(i),\n                children: /*#__PURE__*/_jsxDEV(Icon, {\n                  icon: \"x-mark-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fieldset\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend\",\n          children: \"Info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fields\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"__left\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Date Created:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                defaultValue: '',\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Created by:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                defaultValue: '',\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"__right\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Last Edited:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                defaultValue: '',\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Last Edited By:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                defaultValue: '',\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fieldset\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend\",\n          children: \"Users\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table\",\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"First Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Last Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Function\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Active\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this), permissionData.users.map((user, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: user.firstname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: user.lastname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: user.function\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: classNames({\n                'red-text': user.active === 'Inactive',\n                'green-text': user.active === 'Active',\n                'blue-text': !['Inactive', 'Active'].includes(user.active)\n              }),\n              children: user.active\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrapper flex-container sb editing-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"_red\",\n            onClick: () => setDeleting(true),\n            children: \"Delete Permission\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"_bordered _red\",\n            onClick: () => $router.router.navigate('permissions', {}, {\n              reload: true\n            }),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !readyToSave,\n            className: \"_bordered _green\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), deleting ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item-delete-popup\",\n        onClick: () => setDeleting(false),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wrapper\",\n          onClick: e => e.stopPropagation(),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"title\",\n            children: \"Delete Permission\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"checkbox-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(Checkbox, {\n              contents: \"I understand that after deleting the permission it will not be possible to recover.\",\n              value: readyToDelete,\n              onChange: value => setReadyToDelete(value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"_bordered _green\",\n              onClick: () => setDeleting(false),\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              disabled: !readyToDelete,\n              className: \"_bordered _red\",\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this) : null\n  }, void 0, false);\n}, \"Cl3UC544zoosIUr4kdaIlMksMOg=\", false, function () {\n  return [useRoute];\n}));\nexport default PermissionsPage_Item;","map":{"version":3,"sources":["/Users/nicole/rrrr/crm/src/pages/Permissions/Item.tsx"],"names":["axios","React","useEffect","useState","connect","Icon","nError","mapDispatchToProps","mapStateToProps","Select","Checkbox","useRoute","classNames","PermissionsPage_Item","props","readyToSave","setReadyToSave","$router","deleting","setDeleting","readyToDelete","setReadyToDelete","permissionData","setPermissionData","selectedAction","setSelectedAction","newPermissionData","setNewPermissionData","name","users","actions","availableActions","setAvailableActions","loadInfo","data","get","_availableActions","concat","edit","filter","action","permission","includes","setTimeout","error","addAction","splice","findIndex","_action","removeAction","i","_permissionActions","target","value","map","span","width","user","firstname","lastname","function","active","router","navigate","reload","e","stopPropagation"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Icon from \"../../components/Icon\"\nimport { nError } from \"../../funcs\"\nimport Permission from \"../../models/Permission\"\nimport { StoreDispatch, StoreState, mapDispatchToProps, mapStateToProps } from \"../../store\";\nimport Datetime from 'react-datetime'\n\nimport \"../../styles/pages/common/entity-edit.sass\"\nimport moment from \"moment\"\nimport Select from \"../../components/Select\"\nimport Checkbox from \"../../components/Checkbox\"\nimport { useRoute } from \"react-router5\"\nimport PermissionUser from \"../../models/PermissionUser\"\nimport classNames from \"classnames\"\n\ninterface Props {\n  store: StoreState,\n  dispatcher: StoreDispatch\n}\n\ninterface PermissionData {\n\tpermissions: {\n\t\tedit_permission: boolean,\n\t\tshow_user: boolean\n\t},\n\tpermission: Permission,\n\tusers: PermissionUser[],\n\tedit: {\n\t\tactions: string[]\n\t}\n}\n\nconst PermissionsPage_Item = connect(mapStateToProps, mapDispatchToProps)(function(props: Props) {\n\n  const [readyToSave, setReadyToSave] = useState(false)\n\n  const $router = useRoute()\n\n  const [deleting, setDeleting] = useState(false)\n  const [readyToDelete, setReadyToDelete] = useState(false)\n  \n  const [permissionData, setPermissionData] = useState<PermissionData | null>(null)\n\n  const [selectedAction, setSelectedAction] = useState<string>('')\n\n  const [newPermissionData, setNewPermissionData] = useState<Partial<Permission>>({\n    name: '',\n    users: '',\n    actions: [] as string[]\n  })\n\n  const [availableActions, setAvailableActions] = useState<string[]>([])\n\n  // Load info function\n  async function loadInfo() {\n    try {\n      const { data: permissionData } = (await axios.get('/json/permission.json')) as {data: PermissionData}\n\n      let _availableActions = [''].concat(permissionData.edit.actions.filter((action) => !permissionData.permission.actions.includes(action)))\n\n      setPermissionData(permissionData)\n      setAvailableActions(_availableActions)\n      setSelectedAction(_availableActions[0])\n      setNewPermissionData({\n        ...newPermissionData,\n        actions: permissionData.permission.actions\n      })\n\n      setTimeout(() => setReadyToSave(false), 100)\n    }\n    catch (error) {\n      nError(error)\n    }\n  }\n\n  // Load permission data\n  useEffect(() => {\n    loadInfo()\n  }, [])\n\n  // Add action function\n  function addAction() {\n\n    if(!newPermissionData.actions || !permissionData || !newPermissionData) return\n\n    setNewPermissionData({\n      ...newPermissionData,\n      actions: [\n        ...newPermissionData.actions,\n        selectedAction\n      ]\n    })\n\n    let _availableActions = [...permissionData?.edit.actions]\n\n    _availableActions = permissionData.edit.actions.filter((action) => !(newPermissionData.actions as string[]).includes(action))\n    _availableActions.splice(_availableActions.findIndex((_action) => selectedAction === _action), 1)\n\n    setAvailableActions([\n      ..._availableActions\n    ])\n\n    setSelectedAction('')\n\n    setReadyToSave(true)\n  }\n\n  // Remove action function\n  function removeAction(i: number) {\n\n    let _permissionActions = [...(newPermissionData.actions as string[])]\n\n    let _action = _permissionActions[i]\n    \n    _permissionActions.splice(i, 1)\n\n    setNewPermissionData({\n      ...newPermissionData,\n      actions: _permissionActions\n    })\n\n    setAvailableActions([\n      ...availableActions,\n      _action\n    ])\n\n    setReadyToSave(true)\n  }\n\n  useEffect(() => setReadyToSave(true), [\n    newPermissionData\n  ])\n  \n  // Render function\n  return (<>\n    {permissionData && newPermissionData ? (\n      <div className=\"PermissionsPage_Item entity-edit\">\n\n        <div className=\"wrapper flex-container sb\">\n          <div className=\"flex-container _gap-narrow\">\n            <h1>Permission:</h1>\n            <div className=\"item-name\">\n              {permissionData.permission.name}\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Main</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\">\n                <span>Name:</span>\n                <input type=\"text\" defaultValue={permissionData.permission.name} onChange={({target: {value}}) => setNewPermissionData({...newPermissionData, name: value})} />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"flex-container sb wrap\">\n            <div className=\"legend\">Actions</div>\n\n            <div className=\"legend-action-wrapper\">\n              <label>Action:</label>\n              <div className=\"input-wrapper\">\n                <Select options={availableActions.map((action) => ({\n                  span: action,\n                  value: action\n                }))} selectedOption={selectedAction} onChange={(value) => setSelectedAction(value as string)}/>\n                <button disabled={!selectedAction} className=\"_green\" onClick={() => addAction()}>\n                  Add\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <table className=\"table som\">\n            <tr>\n              <th style={{width: '100%'}}>Action</th>\n              <th>Allow</th>\n              <th></th>\n            </tr>\n            {(newPermissionData.actions as string[]).map((action, i) => (\n              <tr key={i}>\n                <td>{action}</td>\n                <td>\n                  <Checkbox contents={''} value={true} />\n                </td>\n                <td>\n                  <button className=\"_zeroed _iconed _red\" onClick={() => removeAction(i)}>\n                    <Icon icon=\"x-mark-1\" />\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </table>\n        </div>\n\n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Info</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\">\n                <span>Date Created:</span>\n                <input type=\"text\" defaultValue={''} disabled={ true } />\n              </div>\n\n              <div className=\"field\">\n                <span>Created by:</span>\n                <input type=\"text\" defaultValue={''} disabled={ true } />\n              </div>\n            </div>\n\n            \n            <div className=\"__right\">\n\n              <div className=\"field\">\n                <span>Last Edited:</span>\n                <input type=\"text\" defaultValue={''} disabled={ true } />\n              </div>\n\n              <div className=\"field\">\n                <span>Last Edited By:</span>\n                <input type=\"text\" defaultValue={''} disabled={ true } />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"legend\">Users</div>\n\n          <table className=\"table\">\n            <tr>\n              <th>First Name</th>\n              <th>Last Name</th>\n              <th>Function</th>\n              <th>Active</th>\n            </tr>\n            {permissionData.users.map((user, i) => (\n              <tr key={i}>\n                <td>{user.firstname}</td>\n                <td>{user.lastname}</td>\n                <td>{user.function}</td>\n                <td className={classNames({\n                  'red-text': user.active === 'Inactive',\n                  'green-text': user.active === 'Active',\n                  'blue-text': !['Inactive', 'Active'].includes(user.active)\n                })}>{user.active}</td>\n              </tr>\n            ))}\n          </table>\n        </div>\n\n        <div className=\"wrapper flex-container sb editing-buttons\">\n          <div>\n            <button className=\"_red\" onClick={() => setDeleting(true)}>Delete Permission</button>\n          </div>\n          <div className=\"buttons\">\n            <button className=\"_bordered _red\" onClick={() => $router.router.navigate('permissions', {}, {\n              reload: true\n            })}>\n              Cancel\n            </button>\n            <button disabled={!readyToSave} className=\"_bordered _green\">\n              Save\n            </button>\n          </div>\n        </div>\n\n        {/* Item delete popup */}\n        {deleting ? (\n          <div className=\"item-delete-popup\" onClick={() => setDeleting(false)}>\n\n            <div className=\"wrapper\" onClick={(e) => e.stopPropagation()}>\n            \n              <div className=\"title\">\n                Delete Permission\n              </div>\n\n              <div className=\"checkbox-wrapper\">\n                <Checkbox contents=\"I understand that after deleting the permission it will not be possible to recover.\" value={readyToDelete} onChange={(value) => setReadyToDelete(value)} />\n              </div>\n\n              <div className=\"buttons\">\n\n                <button className=\"_bordered _green\" onClick={() => setDeleting(false)}>\n                  Cancel\n                </button>\n\n                <button disabled={!readyToDelete} className=\"_bordered _red\">\n                  Delete\n                </button>\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    ) : null}\n  </>)\n})\nexport default PermissionsPage_Item\n"]},"metadata":{},"sourceType":"module"}