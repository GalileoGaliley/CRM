{"ast":null,"code":"import { DateTime } from \"luxon\";\nexport function getDateRangeByPreset(preset, min_date, max_date) {\n  const now = DateTime.now().startOf('day');\n  min_date = DateTime.fromJSDate(min_date).startOf('day').toJSDate();\n  max_date = DateTime.fromJSDate(max_date).endOf('day').toJSDate();\n  if (preset === 'last_7_days') return {\n    min_date: now.minus({\n      days: 6\n    }).toJSDate(),\n    max_date: now.endOf('day').toJSDate()\n  };\n  if (preset === 'last_14_days') return {\n    min_date: now.minus({\n      days: 13\n    }).toJSDate(),\n    max_date: now.endOf('day').toJSDate()\n  };\n  if (preset === 'last_30_days') return {\n    min_date: now.minus({\n      days: 29\n    }).toJSDate(),\n    max_date: now.endOf('day').toJSDate()\n  };\n  if (preset === 'last_business_week') return {\n    min_date: now.minus({\n      weeks: 1\n    }).set({\n      weekday: 1\n    }).toJSDate(),\n    max_date: now.minus({\n      weeks: 1\n    }).set({\n      weekday: 5\n    }).endOf('day').toJSDate()\n  };\n  if (preset === 'last_month') return {\n    min_date: now.minus({\n      months: 1\n    }).startOf('month').toJSDate(),\n    max_date: now.minus({\n      months: 1\n    }).endOf('month').endOf('day').toJSDate()\n  };\n  if (preset === 'this_month') return {\n    min_date: now.startOf('month').toJSDate(),\n    max_date: now.endOf('month').toJSDate()\n  };\n  if (preset === 'this_week_mon_today') return {\n    min_date: now.minus({\n      weeks: 1\n    }).set({\n      weekday: 1\n    }).toJSDate(),\n    max_date: now.endOf('day').toJSDate()\n  };\n  if (preset === 'this_week_sun_today') return {\n    min_date: now.set({\n      weekday: 0\n    }).toJSDate(),\n    max_date: now.endOf('day').toJSDate()\n  };\n  if (preset === 'today') return {\n    min_date: now.startOf('day').toJSDate(),\n    max_date: now.endOf('day').toJSDate()\n  };\n  if (preset === 'tomorrow') return {\n    min_date: now.plus({\n      days: 1\n    }).startOf('day').toJSDate(),\n    max_date: now.plus({\n      days: 1\n    }).endOf('day').toJSDate()\n  };\n  if (preset === 'tomorrow_and_next') return {\n    min_date: now.plus({\n      days: 1\n    }).toJSDate(),\n    max_date: (() => {\n      if (DateTime.fromJSDate(max_date) < now.plus({\n        days: 1\n      })) return now.plus({\n        days: 1\n      }).endOf('day').toJSDate();\n      return max_date;\n    })()\n  };\n  if (preset === 'yesterday') return {\n    min_date: now.minus({\n      days: 1\n    }).startOf('day').toJSDate(),\n    max_date: now.minus({\n      days: 1\n    }).endOf('day').toJSDate()\n  };\n  if (preset === 'last_week_sun_sat') return {\n    min_date: now.minus({\n      weeks: 1\n    }).set({\n      weekday: 0\n    }).toJSDate(),\n    max_date: now.minus({\n      weeks: 1\n    }).set({\n      weekday: 6\n    }).endOf('day').toJSDate()\n  };\n  if (preset === 'last_week_mon_sun') return {\n    min_date: now.minus({\n      weeks: 1\n    }).set({\n      weekday: 1\n    }).toJSDate(),\n    max_date: now.set({\n      weekday: 0\n    }).endOf('day').toJSDate()\n  };\n  return {\n    min_date,\n    max_date\n  };\n}","map":{"version":3,"sources":["/Users/nicole/rrrr/crm/src/funcs/reports.ts"],"names":["DateTime","getDateRangeByPreset","preset","min_date","max_date","now","startOf","fromJSDate","toJSDate","endOf","minus","days","weeks","set","weekday","months","plus"],"mappings":"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","sourcesContent":["import {DateTime} from \"luxon\"\nimport { DateRangePreset } from \"../models/Misc\"\n\nexport function getDateRangeByPreset(preset: DateRangePreset, min_date: Date, max_date: Date): {\n  min_date: Date,\n  max_date: Date\n} {\n  \n  const now = DateTime.now().startOf('day')\n\n  min_date = DateTime.fromJSDate(min_date).startOf('day').toJSDate()\n  max_date = DateTime.fromJSDate(max_date).endOf('day').toJSDate()\n\n  if (preset === 'last_7_days')\n    return {\n      min_date: now.minus({days: 6}).toJSDate(),\n      max_date: now.endOf('day').toJSDate(),\n    }\n  \n  if (preset === 'last_14_days')\n    return {\n      min_date: now.minus({days: 13}).toJSDate(),\n      max_date: now.endOf('day').toJSDate(),\n    }\n  \n  if (preset === 'last_30_days')\n    return {\n      min_date: now.minus({days: 29}).toJSDate(),\n      max_date: now.endOf('day').toJSDate(),\n    }\n  \n  if (preset === 'last_business_week')\n    return {\n      min_date: now.minus({weeks: 1}).set({weekday: 1}).toJSDate(),\n      max_date: now.minus({weeks: 1}).set({weekday: 5}).endOf('day').toJSDate(),\n    }\n  \n  if (preset === 'last_month')\n    return {\n      min_date: now.minus({months: 1}).startOf('month').toJSDate(),\n      max_date: now.minus({months: 1}).endOf('month').endOf('day').toJSDate(),\n    }\n  \n  if (preset === 'this_month')\n    return {\n      min_date: now.startOf('month').toJSDate(),\n      max_date: now.endOf('month').toJSDate(),\n    }\n  \n  if (preset === 'this_week_mon_today')\n    return {\n      min_date: now.minus({weeks: 1}).set({weekday: 1}).toJSDate(),\n      max_date: now.endOf('day').toJSDate(),\n    }\n  \n  if (preset === 'this_week_sun_today')\n    return {\n      min_date: now.set({weekday: 0}).toJSDate(),\n      max_date: now.endOf('day').toJSDate(),\n    }\n  \n  if (preset === 'today')\n    return {\n      min_date: now.startOf('day').toJSDate(),\n      max_date: now.endOf('day').toJSDate(),\n    }\n  \n  if (preset === 'tomorrow')\n    return {\n      min_date: now.plus({days: 1}).startOf('day').toJSDate(),\n      max_date: now.plus({days: 1}).endOf('day').toJSDate(),\n    }\n  \n  if (preset === 'tomorrow_and_next')\n    return {\n      min_date: now.plus({days: 1}).toJSDate(),\n      max_date: (() => {\n\n        if (DateTime.fromJSDate(max_date) < now.plus({days: 1}))\n          return now.plus({ days: 1 }).endOf('day').toJSDate()\n        \n        return max_date\n      })(),\n    }\n  \n  if (preset === 'yesterday')\n    return {\n      min_date: now.minus({days: 1}).startOf('day').toJSDate(),\n      max_date: now.minus({days: 1}).endOf('day').toJSDate(),\n    }\n  \n  if (preset === 'last_week_sun_sat')\n    return {\n      min_date: now.minus({weeks: 1}).set({weekday: 0}).toJSDate(),\n      max_date: now.minus({weeks: 1}).set({weekday: 6}).endOf('day').toJSDate(),\n    }\n  \n  if (preset === 'last_week_mon_sun')\n    return {\n      min_date: now.minus({weeks: 1}).set({weekday: 1}).toJSDate(),\n      max_date: now.set({weekday: 0}).endOf('day').toJSDate(),\n    }\n  \n  return {min_date, max_date}\n}\n"]},"metadata":{},"sourceType":"module"}