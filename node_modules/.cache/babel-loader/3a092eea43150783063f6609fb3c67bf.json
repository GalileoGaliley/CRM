{"ast":null,"code":"import _objectSpread from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{nError}from\"../../funcs\";import{mapDispatchToProps,mapStateToProps}from\"../../store\";import\"../../styles/pages/common/entity-edit.sass\";import Select from\"../../components/Select\";import{useRoute}from\"react-router5\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ClientsPage_New=connect(mapStateToProps,mapDispatchToProps)(function(props){var $router=useRoute();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),readyToSave=_useState2[0],setReadyToSave=_useState2[1];var _useState3=useState({firstname:'',lastname:'',company_name:'',source:''}),_useState4=_slicedToArray(_useState3,2),newClientData=_useState4[0],setNewClientData=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),clientDataEdit=_useState6[0],setNewClientDataEdit=_useState6[1];// Load info function\nfunction loadInfo(){return _loadInfo.apply(this,arguments);}// Load client data\nfunction _loadInfo(){_loadInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,clientData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/json/client.json');case 3:_yield$axios$get=_context.sent;clientData=_yield$axios$get.data;setNewClientDataEdit(clientData.edit);setTimeout(function(){return setReadyToSave(false);},100);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);nError(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return _loadInfo.apply(this,arguments);}useEffect(function(){loadInfo();},[]);useEffect(function(){return setReadyToSave(true);},[newClientData]);// Render function\nreturn/*#__PURE__*/_jsx(_Fragment,{children:clientDataEdit?/*#__PURE__*/_jsxs(\"div\",{className:\"ClientsPage_Item ClientPage_New entity-edit\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"wrapper flex-container sb\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"New Client\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Main\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"First Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newClientData.firstname,onChange:function onChange(_ref){var value=_ref.target.value;return setNewClientData(_objectSpread(_objectSpread({},newClientData),{},{firstname:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Last Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newClientData.lastname,onChange:function onChange(_ref2){var value=_ref2.target.value;return setNewClientData(_objectSpread(_objectSpread({},newClientData),{},{lastname:value}));}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Company:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newClientData.company_name,onChange:function onChange(_ref3){var value=_ref3.target.value;return setNewClientData(_objectSpread(_objectSpread({},newClientData),{},{company_name:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Source:\"}),/*#__PURE__*/_jsx(Select,{options:clientDataEdit.source.map(function(option){return{span:option,value:option};}),selectedOption:newClientData.source,onChange:function onChange(value){return setNewClientData(_objectSpread(_objectSpread({},newClientData),{},{source:value}));}})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper flex-container sb editing-buttons\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"_bordered _red\",onClick:function onClick(){return $router.router.navigate('clients',{},{reload:true});},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{disabled:!readyToSave,className:\"_bordered _green\",children:\"Save\"})]})]})]}):null});});export default ClientsPage_New;","map":{"version":3,"sources":["/Users/nicole/rrrr/crm/src/pages/Clients/New.tsx"],"names":["axios","React","useEffect","useState","connect","nError","mapDispatchToProps","mapStateToProps","Select","useRoute","ClientsPage_New","props","$router","readyToSave","setReadyToSave","firstname","lastname","company_name","source","newClientData","setNewClientData","clientDataEdit","setNewClientDataEdit","loadInfo","get","clientData","data","edit","setTimeout","value","target","map","option","span","router","navigate","reload"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Icon from \"../../components/Icon\"\nimport { nError } from \"../../funcs\"\nimport Client from \"../../models/Client\"\nimport { StoreDispatch, StoreState, mapDispatchToProps, mapStateToProps } from \"../../store\";\n\nimport \"../../styles/pages/common/entity-edit.sass\"\nimport moment from \"moment\"\nimport Select from \"../../components/Select\"\nimport Checkbox from \"../../components/Checkbox\"\nimport { useRoute } from \"react-router5\"\nimport { DateTime } from \"luxon\"\n\nimport DateTimeComponent from \"react-datetime\"\n\ninterface Props {\n  store: StoreState,\n  dispatcher: StoreDispatch\n}\n\nconst ClientsPage_New = connect(mapStateToProps, mapDispatchToProps)(function(props: Props) {\n\n  const $router = useRoute()\n\n  const [readyToSave, setReadyToSave] = useState(false)\n  \n  const [newClientData, setNewClientData] = useState<Partial<Client>>({\n    firstname: '',\n    lastname: '',\n    company_name: '',\n    source: ''\n  })\n\n  const [clientDataEdit, setNewClientDataEdit] = useState<{\n    source: string[],\n  } | null>(null)\n  \n  // Load info function\n  async function loadInfo() {\n    try {\n      const { data: clientData } = (await axios.get('/json/client.json'))\n\n      setNewClientDataEdit(clientData.edit)\n\n      setTimeout(() => setReadyToSave(false), 100)\n    }\n    catch (error) {\n      nError(error)\n    }\n  }\n\n  // Load client data\n  useEffect(() => {\n    loadInfo()\n  }, [])\n\n  useEffect(() => setReadyToSave(true), [\n    newClientData\n  ])\n  \n  // Render function\n  return (<>\n    {clientDataEdit ? (\n      <div className=\"ClientsPage_Item ClientPage_New entity-edit\">\n\n        <div className=\"wrapper flex-container sb\">\n          <h1>New Client</h1>\n        </div>\n        \n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Main</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\">\n                <span>First Name:</span>\n                <input type=\"text\" defaultValue={newClientData.firstname} onChange={({target: {value}}) => setNewClientData({...newClientData, firstname: value})} />\n              </div>\n\n              <div className=\"field\">\n                <span>Last Name:</span>\n                <input type=\"text\" defaultValue={newClientData.lastname} onChange={({target: {value}}) => setNewClientData({...newClientData, lastname: value})} />\n              </div>\n            </div>\n\n            <div className=\"__right\">\n              <div className=\"field\">\n                <span>Company:</span>\n                <input type=\"text\" defaultValue={newClientData.company_name} onChange={({target: {value}}) => setNewClientData({...newClientData, company_name: value})} />\n              </div>\n\n              <div className=\"field\">\n                <span>Source:</span>\n                <Select options={clientDataEdit.source.map((option) => ({\n                  span: option,\n                  value: option\n                }))} selectedOption={newClientData.source as string} onChange={(value) => setNewClientData({...newClientData, source: value as string})}/>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"wrapper flex-container sb editing-buttons\">\n          <div></div>\n          <div className=\"buttons\">\n            <button className=\"_bordered _red\" onClick={() => $router.router.navigate('clients', {}, {reload: true})}>\n              Cancel\n            </button>\n            <button disabled={!readyToSave} className=\"_bordered _green\">\n              Save\n            </button>\n          </div>\n        </div>\n      </div>\n    ) : null}\n  </>)\n})\nexport default ClientsPage_New\n"]},"metadata":{},"sourceType":"module"}