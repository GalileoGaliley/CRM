{"ast":null,"code":"var _jsxFileName = \"/Users/nicole/rrrr/crm/src/pages/Absences/List.tsx\",\n    _s = $RefreshSig$();\n\nimport classNames from \"classnames\";\nimport { DateTime } from \"luxon\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useRoute } from \"react-router5\";\nimport Icon from \"../../components/Icon\";\nimport ReportFilters from \"../../components/reports/Filters\";\nimport ReportTableControls from \"../../components/reports/TableControls\";\nimport ReportTableField from \"../../components/reports/TableField\";\nimport { httpClient, nError } from \"../../funcs/base\";\nimport { getDateRangeByPreset } from \"../../funcs/reports\";\nimport { mapDispatchToProps, mapStateToProps } from \"../../store\";\nimport \"../../styles/pages/common/report-list.sass\";\nimport qs from \"qs\";\nimport { getActiveAccount } from \"../../funcs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AbsencesPage_List = connect(mapStateToProps, mapDispatchToProps)(_s(function (props) {\n  _s();\n\n  const $router = useRoute();\n  const activeAccount = getActiveAccount(props.store);\n  const [reportIsDeprecated, setReportIsDeprecated] = useState(false);\n  const [$updater, $setUpdater] = useState(Math.random());\n  const [reportData, setReportData] = useState(null);\n  const [localInterface, setLocalInterface] = useState({\n    search: '',\n    dateRangeCalendarShown: false,\n    dateRangeType: \"schedule\",\n    dateRangePreset: \"custom\",\n    min_date: DateTime.now().startOf('day').toJSDate(),\n    max_date: DateTime.now().endOf('day').toJSDate(),\n    page: 1,\n    filter_words: {\n      area: [],\n      created_by: [],\n      service_resource: []\n    },\n    sort: {\n      field: 'created_at',\n      direction: 'up'\n    },\n    sortFields: [{\n      span: 'Date',\n      value: 'created_at'\n    }, {\n      span: 'Area',\n      value: 'area'\n    }, {\n      span: 'Service Resource',\n      value: 'service_resource'\n    }, {\n      span: 'Absence Start',\n      value: 'absence_start'\n    }, {\n      span: 'Absence End',\n      value: 'absence_end'\n    }, {\n      span: 'Created by',\n      value: 'created_by'\n    }]\n  }); // Watch date range preset\n\n  useEffect(() => {\n    if (!reportData) return;\n    if (localInterface.dateRangePreset === 'custom') return;\n    setLocalInterface({ ...localInterface,\n      ...getDateRangeByPreset(localInterface.dateRangePreset, reportData === null || reportData === void 0 ? void 0 : reportData.interface.min_date, reportData === null || reportData === void 0 ? void 0 : reportData.interface.max_date)\n    });\n  }, [localInterface.dateRangePreset]); // Load absences function\n\n  async function loadAbsences() {\n    httpClient.defaults.headers['Authorization'] = `Bearer ${props.store.accessToken}`;\n    let activeFilters = { ...localInterface.filter_words\n    };\n    Object.keys(localInterface.filter_words).forEach(key => !activeFilters[key].length && delete activeFilters[key]);\n\n    try {\n      const {\n        data: absencesReport\n      } = await httpClient.post('/absences/report', qs.stringify({\n        account_id: activeAccount.account_id,\n        limit_rows: props.store.reportsMaxRows,\n        page: localInterface.page,\n        date_type: localInterface.dateRangeType,\n        date_start: localInterface.min_date.toISOString(),\n        date_end: localInterface.max_date.toISOString(),\n        sort_field: localInterface.sort.field,\n        sort_type: localInterface.sort.direction === 'up' ? 'asc' : 'desc',\n        filter_field: JSON.stringify(activeFilters),\n        ...(localInterface.search ? {\n          search: localInterface.search\n        } : {})\n      }));\n      setReportData({ ...absencesReport,\n        interface: { ...absencesReport.interface,\n          min_date: DateTime.fromISO(absencesReport.interface.min_date).startOf('day').toJSDate(),\n          max_date: DateTime.fromISO(absencesReport.interface.max_date).endOf('day').toJSDate()\n        }\n      });\n      setTimeout(() => {\n        setReportIsDeprecated(false);\n      }, 100);\n    } catch (error) {\n      nError(error);\n    }\n  } // Load absences on page mount\n\n\n  useEffect(() => {\n    loadAbsences();\n  }, [$updater, localInterface.page]); // Watch for deprecated\n\n  useEffect(() => {\n    if (!reportData) return;\n    setReportIsDeprecated(true);\n  }, [localInterface.min_date, localInterface.max_date, localInterface.dateRangeType]); // Is filter selected function\n\n  function isFilterSelected(field, value) {\n    return localInterface.filter_words[field].includes(value);\n  } // Is all filters selected function\n\n\n  function isAllFiltersSelected(field) {\n    return localInterface.filter_words[field].length === 0;\n  } // Filter switch function\n\n\n  function switchFilter(field, value, toggle) {\n    let _arr = [...localInterface.filter_words[field]];\n\n    if (toggle && value === \"All\") {\n      _arr = [];\n    } else if (!toggle) {\n      while (true) {\n        let i = _arr.findIndex(filter => filter === value);\n\n        if (i === -1) break;\n\n        _arr.splice(i, 1);\n      }\n    } else {\n      if (reportData !== null && reportData !== void 0 && reportData.interface.filter_words[field].every(option => _arr.concat([value]).includes(option))) _arr = [];else if (_arr.findIndex(filter => filter === value) === -1) _arr.push(value);\n    }\n\n    setLocalInterface({ ...localInterface,\n      filter_words: { ...localInterface.filter_words,\n        [field]: _arr\n      }\n    });\n  } // Render function\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: reportData ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"AbsencesPage_List\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Absences\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReportFilters, {\n        onSearchInputChange: value => setLocalInterface({ ...localInterface,\n          search: value\n        }),\n        dateRangeType: localInterface.dateRangeType,\n        onDateRangeTypeChange: value => setLocalInterface({ ...localInterface,\n          dateRangeType: value\n        }),\n        dateRangePreset: localInterface.dateRangePreset,\n        onDateRangePresetChange: value => setLocalInterface({ ...localInterface,\n          dateRangePreset: value\n        }),\n        minDate: localInterface.min_date,\n        onMinDateChange: value => setLocalInterface({ ...localInterface,\n          min_date: value,\n          dateRangePreset: 'custom'\n        }),\n        maxDate: localInterface.max_date,\n        onMaxDateChange: value => setLocalInterface({ ...localInterface,\n          max_date: value,\n          dateRangePreset: 'custom'\n        }),\n        updateButtonActive: reportIsDeprecated,\n        onUpdate: () => $setUpdater(Math.random())\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReportTableControls, {\n        zIndex: 5,\n        onMaxRowsChange: () => {\n          $setUpdater(Math.random());\n        },\n        amount: {\n          total: reportData.interface.rows_all,\n          start: reportData.interface.rows_start,\n          end: reportData.interface.rows_end\n        },\n        page: localInterface.page,\n        maxPages: reportData.interface.max_pages,\n        onPagesStart: () => setLocalInterface({ ...localInterface,\n          page: 1\n        }),\n        onPrevPage: () => setLocalInterface({ ...localInterface,\n          page: localInterface.page - 1\n        }),\n        onNextPage: () => setLocalInterface({ ...localInterface,\n          page: localInterface.page + 1\n        }),\n        onPagesEnd: () => setLocalInterface({ ...localInterface,\n          page: reportData.interface.max_pages\n        }),\n        sort: localInterface.sort,\n        sortFields: localInterface.sortFields,\n        onSortFieldChange: value => setLocalInterface({ ...localInterface,\n          sort: { ...localInterface.sort,\n            field: value\n          }\n        }),\n        onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n          sort: { ...localInterface.sort,\n            direction: value\n          }\n        }),\n        onSortFire: () => $setUpdater(Math.random()),\n        addButton: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-button-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"_iconed _rounded add-button\",\n            onClick: () => $router.router.navigate('absences.new'),\n            children: [/*#__PURE__*/_jsxDEV(Icon, {\n              icon: \"plus-thin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Add Absence\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Icon, {\n              icon: \"time-16\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"contents\",\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          className: classNames('table', '__show-on-wide', {\n            __respectAsidePanel: props.store.navActive.is\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 28\n              }, this),\n              sortDirection: localInterface.sort.field === 'created_at' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'created_at',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Service resource\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 28\n              }, this),\n              allFiltersSelected: isAllFiltersSelected(\"service_resource\"),\n              onAllFiltersChange: value => switchFilter(\"service_resource\", \"All\", value),\n              filterWords: reportData.interface.filter_words.service_resource.map(filterWord => ({\n                word: filterWord,\n                selected: isFilterSelected(\"service_resource\", filterWord)\n              })),\n              onFilterChange: value => switchFilter(\"service_resource\", value.word, value.selected),\n              sortDirection: localInterface.sort.field === 'service_resource' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'service_resource',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Area\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 28\n              }, this),\n              allFiltersSelected: isAllFiltersSelected(\"area\"),\n              onAllFiltersChange: value => switchFilter(\"area\", \"All\", value),\n              filterWords: reportData.interface.filter_words.area.map(filterWord => ({\n                word: filterWord,\n                selected: isFilterSelected(\"area\", filterWord)\n              })),\n              onFilterChange: value => switchFilter(\"area\", value.word, value.selected),\n              sortDirection: localInterface.sort.field === 'area' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'area',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Absence Start\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 28\n              }, this),\n              sortDirection: localInterface.sort.field === 'absence_start' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'absence_start',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Absence End\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 28\n              }, this),\n              sortDirection: localInterface.sort.field === 'absence_end' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'absence_end',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Created by\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 28\n              }, this),\n              allFiltersSelected: isAllFiltersSelected(\"created_by\"),\n              onAllFiltersChange: value => switchFilter(\"created_by\", \"All\", value),\n              filterWords: reportData.interface.filter_words.created_by.map(filterWord => ({\n                word: filterWord,\n                selected: isFilterSelected(\"created_by\", filterWord)\n              })),\n              onFilterChange: value => switchFilter(\"created_by\", value.word, value.selected),\n              sortDirection: localInterface.sort.field === 'created_by' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'created_by',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this), reportData.absences.map((absence, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            onClick: () => $router.router.navigate('absences.item', {\n              absenceId: absence.absence_id\n            }, {\n              reload: true\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: absence.created_at\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: absence.service_resource\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: absence.area\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: absence.absence_start\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: absence.absence_end\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: absence.created_by\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: classNames('table', '__hide-on-wide', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 13\n          }, this), reportData.absences.map((absence, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            onClick: () => $router.router.navigate('absences.item', {\n              absenceId: absence.absence_id\n            }, {\n              reload: true\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: absence.created_at\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: absence.area\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: absence.service_resource\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: absence.created_by\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: absence.absence_start\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: absence.absence_end\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classNames('mobile-table-items', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          }),\n          children: reportData.absences.map((absence, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"item\",\n            onClick: () => $router.router.navigate('absences.item', {\n              absenceId: absence.absence_id\n            }, {\n              reload: true\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"__top\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"__left\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"gray\",\n                  children: \"Service resource:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 422,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\" \", absence.service_resource]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 423,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"__right\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"gray\",\n                  children: \"Area:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 427,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\" \", absence.area]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 428,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"__bottom\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"__left\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"Start: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: absence.absence_start\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 436,\n                    columnNumber: 30\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"End: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: absence.absence_end\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 28\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"__right small\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: absence.created_at\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 444,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"Created by \", absence.created_by]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReportTableControls, {\n        isUnder: true,\n        onMaxRowsChange: () => $setUpdater(Math.random()),\n        onPagesStart: () => setLocalInterface({ ...localInterface,\n          page: 1\n        }),\n        onPrevPage: () => setLocalInterface({ ...localInterface,\n          page: localInterface.page - 1\n        }),\n        onNextPage: () => setLocalInterface({ ...localInterface,\n          page: localInterface.page + 1\n        }),\n        onPagesEnd: () => setLocalInterface({ ...localInterface,\n          page: reportData.interface.max_pages\n        }),\n        amount: {\n          total: reportData.interface.rows_all,\n          start: reportData.interface.rows_start,\n          end: reportData.interface.rows_end\n        },\n        page: localInterface.page,\n        maxPages: reportData.interface.max_pages,\n        sort: localInterface.sort,\n        sortFields: localInterface.sortFields,\n        onSortFieldChange: value => setLocalInterface({ ...localInterface,\n          sort: { ...localInterface.sort,\n            field: value\n          }\n        }),\n        onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n          sort: { ...localInterface.sort,\n            direction: value\n          }\n        }),\n        onSortFire: () => $setUpdater(Math.random())\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this) : null\n  }, void 0, false);\n}, \"i3cFfVRL4XiMlOwPDoWxWCDNaaQ=\", false, function () {\n  return [useRoute];\n}));\nexport default AbsencesPage_List;","map":{"version":3,"sources":["/Users/nicole/rrrr/crm/src/pages/Absences/List.tsx"],"names":["classNames","DateTime","useEffect","useState","connect","useRoute","Icon","ReportFilters","ReportTableControls","ReportTableField","httpClient","nError","getDateRangeByPreset","mapDispatchToProps","mapStateToProps","qs","getActiveAccount","AbsencesPage_List","props","$router","activeAccount","store","reportIsDeprecated","setReportIsDeprecated","$updater","$setUpdater","Math","random","reportData","setReportData","localInterface","setLocalInterface","search","dateRangeCalendarShown","dateRangeType","dateRangePreset","min_date","now","startOf","toJSDate","max_date","endOf","page","filter_words","area","created_by","service_resource","sort","field","direction","sortFields","span","value","interface","loadAbsences","defaults","headers","accessToken","activeFilters","Object","keys","forEach","key","length","data","absencesReport","post","stringify","account_id","limit_rows","reportsMaxRows","date_type","date_start","toISOString","date_end","sort_field","sort_type","filter_field","JSON","fromISO","setTimeout","error","isFilterSelected","includes","isAllFiltersSelected","switchFilter","toggle","_arr","i","findIndex","filter","splice","every","option","concat","push","total","rows_all","start","rows_start","end","rows_end","max_pages","router","navigate","__respectAsidePanel","navActive","is","undefined","map","filterWord","word","selected","absences","absence","absenceId","absence_id","reload","created_at","absence_start","absence_end"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport classNames from \"classnames\"\nimport { DateTime } from \"luxon\"\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useRoute } from \"react-router5\"\nimport Icon from \"../../components/Icon\"\nimport ReportFilters from \"../../components/reports/Filters\"\nimport ReportTableControls from \"../../components/reports/TableControls\"\nimport ReportTableField from \"../../components/reports/TableField\"\nimport { httpClient, nError } from \"../../funcs/base\"\nimport { getDateRangeByPreset } from \"../../funcs/reports\"\nimport Absence from \"../../models/Absence\"\nimport { DateRangePreset } from \"../../models/Misc\"\nimport { StoreDispatch, StoreState, mapDispatchToProps, mapStateToProps } from \"../../store\";\n\nimport \"../../styles/pages/common/report-list.sass\"\nimport qs from \"qs\";\nimport {getActiveAccount} from \"../../funcs\";\nimport Account from \"../../models/Account\";\n\ninterface Props {\n  store: StoreState,\n  dispatcher: StoreDispatch\n}\n\ntype FilterWord = 'area' | 'created_by' | 'service_resource'\n\ninterface AbsencesReport {\n\n  interface: {\n\n    filter_words: {\n\n      area: string[],\n      created_by: string[],\n      service_resource: string[]\n    },\n\n    max_pages: number,\n    rows_start: number,\n    rows_end: number,\n    rows_all: number,\n    \n    min_date: Date,\n    max_date: Date\n  },\n\n  permissions: {\n    show_absence: boolean,\n  },\n\n  absences: Absence[]\n}\n\nconst AbsencesPage_List = connect(mapStateToProps, mapDispatchToProps)(function(props: Props) {\n\n  const $router = useRoute()\n\n  const activeAccount = getActiveAccount(props.store) as Account\n  const [reportIsDeprecated, setReportIsDeprecated] = useState(false)\n\n  const [$updater, $setUpdater] = useState<any>(Math.random())\n\n  const [reportData, setReportData] = useState<AbsencesReport | null>(null)\n  const [localInterface, setLocalInterface] = useState({\n\n    search: '',\n\n    dateRangeCalendarShown: false,\n    dateRangeType: \"schedule\" as \"created\" | \"schedule\",\n    dateRangePreset: \"custom\" as DateRangePreset,\n\n    min_date: DateTime.now().startOf('day').toJSDate(),\n    max_date: DateTime.now().endOf('day').toJSDate(),\n\n    page: 1,\n\n    filter_words: {\n      area: [] as string[],\n      created_by: [] as string[],\n      service_resource: [] as string[]\n    },\n\n    sort: {\n      field: 'created_at',\n      direction: 'up' as 'up' | 'down'\n    },\n    sortFields: [{\n      span: 'Date',\n      value: 'created_at'\n    },{\n      span: 'Area',\n      value: 'area'\n    },{\n      span: 'Service Resource',\n      value: 'service_resource'\n    },{\n      span: 'Absence Start',\n      value: 'absence_start'\n    },{\n      span: 'Absence End',\n      value: 'absence_end'\n    },{\n      span: 'Created by',\n      value: 'created_by'\n    }]\n\n  })\n\n  // Watch date range preset\n  useEffect(() => {\n\n    if(!reportData) return\n\n    if(localInterface.dateRangePreset === 'custom') return\n\n    setLocalInterface({\n      ...localInterface,\n      ...(getDateRangeByPreset(localInterface.dateRangePreset, reportData?.interface.min_date, reportData?.interface.max_date))\n    })\n\n  }, [localInterface.dateRangePreset])\n\n  // Load absences function\n  async function loadAbsences() {\n\n    httpClient.defaults.headers['Authorization'] = `Bearer ${props.store.accessToken}`\n    \n    let activeFilters: any = {...localInterface.filter_words}\n    Object.keys(localInterface.filter_words).forEach((key: any) => !activeFilters[key].length && delete activeFilters[key])\n\n    try {\n      const { data: absencesReport } = (await httpClient.post('/absences/report', qs.stringify({\n        account_id:activeAccount.account_id,\n        limit_rows: props.store.reportsMaxRows,\n        page: localInterface.page,\n        date_type: localInterface.dateRangeType,\n        date_start: localInterface.min_date.toISOString(),\n        date_end:localInterface.max_date.toISOString(),\n        sort_field: localInterface.sort.field,\n        sort_type: localInterface.sort.direction === 'up' ? 'asc' : 'desc',\n        filter_field: JSON.stringify(activeFilters),\n        ...(localInterface.search ? {search: localInterface.search} : {})\n\n      }))) as {data: AbsencesReport}\n\n      setReportData({\n        ...absencesReport,\n\n        interface: {\n\n          ...absencesReport.interface,\n          min_date: DateTime.fromISO(absencesReport.interface.min_date as unknown as string).startOf('day').toJSDate(),\n          max_date: DateTime.fromISO(absencesReport.interface.max_date as unknown as string).endOf('day').toJSDate(),\n        }\n      })\n\n      setTimeout(() => {\n        setReportIsDeprecated(false)\n      }, 100)\n    }\n    catch (error) {\n      nError(error)\n    }\n  }\n\n  // Load absences on page mount\n  useEffect(() => { loadAbsences() }, [\n    $updater,\n    localInterface.page,\n  ])\n\n  // Watch for deprecated\n  useEffect(() => {\n    if(!reportData) return\n    setReportIsDeprecated(true)\n  }, [\n    localInterface.min_date,\n    localInterface.max_date,\n    localInterface.dateRangeType,\n  ])\n\n  // Is filter selected function\n  function isFilterSelected(field: FilterWord, value: string) {\n    return localInterface.filter_words[field].includes(value)\n  }\n\n  // Is all filters selected function\n  function isAllFiltersSelected(field: FilterWord) {\n    return localInterface.filter_words[field].length === 0\n  }\n\n  // Filter switch function\n  function switchFilter(field: FilterWord, value: string, toggle: boolean) {\n\n    let _arr = [...localInterface.filter_words[field]]\n\n    if (toggle && value === \"All\") { _arr = [] }\n    \n    else if (!toggle) {\n\n      while (true) {\n        let i = _arr.findIndex((filter) => filter === value)\n        if(i === -1) break\n        _arr.splice(i, 1)\n      }\n    }\n      \n    else {\n\n      if (reportData?.interface.filter_words[field].every((option) => _arr.concat([value]).includes(option)))\n        _arr = []\n\n      else if(_arr.findIndex((filter) => filter === value) === -1)\n        _arr.push(value)\n    }\n\n    setLocalInterface({...localInterface, filter_words: {...localInterface.filter_words, [field]: _arr}})\n  }\n\n  // Render function\n  return (<>\n    {reportData ? (\n      <div className=\"AbsencesPage_List\" >\n\n        { /* Page header */}\n        <div className=\"page-header\">\n          <h1>Absences</h1>\n        </div>\n\n        { /* List filters */}\n        <ReportFilters\n          onSearchInputChange={(value) => setLocalInterface({...localInterface, search: value})}\n\n          dateRangeType={localInterface.dateRangeType}\n          onDateRangeTypeChange={(value) => setLocalInterface({...localInterface, dateRangeType: value as any})}\n\n          dateRangePreset={localInterface.dateRangePreset}\n          onDateRangePresetChange={(value) => setLocalInterface({ ...localInterface, dateRangePreset: value })}\n\n          minDate={localInterface.min_date}\n          onMinDateChange={(value) => setLocalInterface({...localInterface, min_date: value, dateRangePreset: 'custom'})}\n\n          maxDate={localInterface.max_date}\n          onMaxDateChange={(value) => setLocalInterface({...localInterface, max_date: value, dateRangePreset: 'custom'})}\n\n          updateButtonActive={reportIsDeprecated}\n          onUpdate={() => $setUpdater(Math.random())}\n        />\n\n        {/* Table controls */}\n        <ReportTableControls\n          zIndex={5}\n          \n          onMaxRowsChange={() => {$setUpdater(Math.random());}}\n\n          amount={{\n            total: reportData.interface.rows_all,\n            start: reportData.interface.rows_start,\n            end: reportData.interface.rows_end\n          }}\n\n          page={localInterface.page}\n          maxPages={reportData.interface.max_pages}\n          onPagesStart={() => setLocalInterface({...localInterface, page: 1})}\n          onPrevPage={() => setLocalInterface({...localInterface, page: localInterface.page-1})}\n          onNextPage={() => setLocalInterface({...localInterface, page: localInterface.page+1})}\n          onPagesEnd={() => setLocalInterface({...localInterface, page: reportData.interface.max_pages})}\n          \n          sort={localInterface.sort}\n          sortFields={localInterface.sortFields}\n          onSortFieldChange={(value) => setLocalInterface({...localInterface, sort: {...localInterface.sort, field: value}})}\n          onSortDirectionChange={(value) => setLocalInterface({ ...localInterface, sort: { ...localInterface.sort, direction: value } })}\n          onSortFire={() => $setUpdater(Math.random())}\n\n          addButton={(\n            <div className=\"add-button-wrapper\">\n              <button className=\"_iconed _rounded add-button\" onClick={() => $router.router.navigate('absences.new')}>\n                <Icon icon=\"plus-thin\" />\n                <span>Add Absence</span>\n                <Icon icon=\"time-16\" />\n              </button>\n            </div>\n          )}\n        />\n\n        <div className=\"contents\">\n\n          {/* Wide desktop table */}\n          <table className={classNames('table', '__show-on-wide', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr>\n              <ReportTableField\n                contents={(<span>Date</span>)}\n\n                sortDirection={localInterface.sort.field === 'created_at' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'created_at', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Service resource</span>)}\n\n                allFiltersSelected={isAllFiltersSelected(\"service_resource\")}\n                onAllFiltersChange={(value) => switchFilter(\"service_resource\", \"All\", value)}\n\n                filterWords={reportData.interface.filter_words.service_resource.map((filterWord) => ({\n                  word: filterWord,\n                  selected: isFilterSelected(\"service_resource\", filterWord)\n                }))}\n                onFilterChange={(value) => switchFilter(\"service_resource\", value.word, value.selected)}\n\n                sortDirection={localInterface.sort.field === 'service_resource' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'service_resource', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Area</span>)}\n\n                allFiltersSelected={isAllFiltersSelected(\"area\")}\n                onAllFiltersChange={(value) => switchFilter(\"area\", \"All\", value)}\n\n                filterWords={reportData.interface.filter_words.area.map((filterWord) => ({\n                  word: filterWord,\n                  selected: isFilterSelected(\"area\", filterWord)\n                }))}\n                onFilterChange={(value) => switchFilter(\"area\", value.word, value.selected)}\n                sortDirection={localInterface.sort.field === 'area' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'area', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Absence Start</span>)}\n\n                sortDirection={localInterface.sort.field === 'absence_start' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'absence_start', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Absence End</span>)}\n              \n                sortDirection={localInterface.sort.field === 'absence_end' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'absence_end', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Created by</span>)}\n\n                allFiltersSelected={isAllFiltersSelected(\"created_by\")}\n                onAllFiltersChange={(value) => switchFilter(\"created_by\", \"All\", value)}\n\n                filterWords={reportData.interface.filter_words.created_by.map((filterWord) => ({\n                  word: filterWord,\n                  selected: isFilterSelected(\"created_by\", filterWord)\n                }))}\n                onFilterChange={(value) => switchFilter(\"created_by\", value.word, value.selected)}\n\n                sortDirection={localInterface.sort.field === 'created_by' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'created_by', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n            </tr>\n            {reportData.absences.map((absence, i) => (\n              <tr key={i} onClick={() => $router.router.navigate('absences.item', {\n                absenceId: absence.absence_id\n              }, {reload: true})}>\n                <td>{absence.created_at}</td>\n                <td>{absence.service_resource}</td>\n                <td>{absence.area}</td>\n                <td>{absence.absence_start}</td>\n                <td>{absence.absence_end}</td>\n                <td>{absence.created_by}</td>\n              </tr>\n            ))}\n          </table>\n\n          {/* Medium desktop table */}\n          <table className={classNames('table', '__hide-on-wide', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr></tr>\n            {reportData.absences.map((absence, i) => (\n              <tr key={i} onClick={() => $router.router.navigate('absences.item', {\n                absenceId: absence.absence_id\n              }, {reload: true})}>\n                <td>\n                  <div>{absence.created_at}</div>\n                  <div>{absence.area}</div>\n                </td>\n                <td>\n                  <div>{absence.service_resource}</div>\n                  <div>{absence.created_by}</div>\n                </td>\n                <td>\n                  <div>{absence.absence_start}</div>\n                  <div>{absence.absence_end}</div>\n                </td>\n              </tr>\n            ))}\n          </table>\n\n          {/* Mobile table items */}\n          <div className={classNames('mobile-table-items', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n\n            {reportData.absences.map((absence, i: number) => (\n              <div className=\"item\" key={i} onClick={() => $router.router.navigate('absences.item', {\n                absenceId: absence.absence_id\n              }, {reload: true})}>\n\n                <div className=\"__top\">\n\n                  <div className=\"__left\">\n                    <span className=\"gray\">Service resource:</span>\n                    <span> {absence.service_resource}</span>\n                  </div>\n\n                  <div className=\"__right\">\n                    <span className=\"gray\">Area:</span>\n                    <span> {absence.area}</span>\n                  </div>\n                </div>\n\n                <div className=\"__bottom\">\n\n                  <div className=\"__left\">\n                    <div>\n                      Start: <b>{absence.absence_start}</b>\n                    </div>\n                    <div>\n                      End: <b>{absence.absence_end}</b>\n                    </div>\n                  </div>\n\n                  <div className=\"__right small\">\n                    <div>\n                      {absence.created_at}\n                    </div>\n                    <div>\n                      Created by {absence.created_by}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Table controls */}\n        <ReportTableControls\n          isUnder={true}\n\n          onMaxRowsChange={() => $setUpdater(Math.random())}\n\n          onPagesStart={() => setLocalInterface({...localInterface, page: 1})}\n          onPrevPage={() => setLocalInterface({...localInterface, page: localInterface.page-1})}\n          onNextPage={() => setLocalInterface({...localInterface, page: localInterface.page+1})}\n          onPagesEnd={() => setLocalInterface({...localInterface, page: reportData.interface.max_pages})}\n\n          amount={{\n            total: reportData.interface.rows_all,\n            start: reportData.interface.rows_start,\n            end: reportData.interface.rows_end\n          }}\n\n          page={localInterface.page}\n          maxPages={reportData.interface.max_pages}\n          \n          sort={localInterface.sort}\n          sortFields={localInterface.sortFields}\n          onSortFieldChange={(value) => setLocalInterface({...localInterface, sort: {...localInterface.sort, field: value}})}\n          onSortDirectionChange={(value) => setLocalInterface({ ...localInterface, sort: { ...localInterface.sort, direction: value } })}\n          onSortFire={() => $setUpdater(Math.random())}\n        />\n      </div>\n    ) : null}\n  </>)\n})\nexport default AbsencesPage_List\n"]},"metadata":{},"sourceType":"module"}