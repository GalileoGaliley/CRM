{"ast":null,"code":"import _objectSpread from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import Icon from\"../../../components/Icon\";import{nError}from\"../../../funcs\";import{mapDispatchToProps,mapStateToProps}from\"../../../store\";import\"../../../styles/pages/common/entity-edit.sass\";import Select from\"../../../components/Select\";import Checkbox from\"../../../components/Checkbox\";import Switcher from\"../../../components/Switcher\";import{BaseLink,useRoute}from\"react-router5\";import classNames from\"classnames\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CallCenter_PhoneNumbersPage_Item=connect(mapStateToProps,mapDispatchToProps)(function(props){var $router=useRoute();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),readyToSave=_useState2[0],setReadyToSave=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),editing=_useState4[0],setEditing=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),deleting=_useState6[0],setDeleting=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),readyToDelete=_useState8[0],setReadyToDelete=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),phoneNumberData=_useState10[0],setPhoneNumberData=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),newPhoneNumberData=_useState12[0],setNewPhoneNumberData=_useState12[1];// Load info function\nfunction loadInfo(){return _loadInfo.apply(this,arguments);}// Load phoneNumber data\nfunction _loadInfo(){_loadInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _ref2,_phoneNumberData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/json/call_center_phone_number.json');case 3:_ref2=_context.sent;_phoneNumberData=_ref2.data;setPhoneNumberData(_phoneNumberData);setNewPhoneNumberData({phone:'',active:'On',type:_phoneNumberData.edit.types[0],source:_phoneNumberData.edit.sources[0],company:_phoneNumberData.edit.companies[0],area:_phoneNumberData.edit.areas[0],call_flow:_phoneNumberData.edit.call_flows[0]});setTimeout(function(){return setReadyToSave(false);},100);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);nError(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return _loadInfo.apply(this,arguments);}useEffect(function(){loadInfo();},[]);useEffect(function(){return setReadyToSave(true);},[newPhoneNumberData]);// Render function\nreturn/*#__PURE__*/_jsx(_Fragment,{children:phoneNumberData&&newPhoneNumberData.active?/*#__PURE__*/_jsxs(\"div\",{className:\"CallCenter_PhoneNumbersPage_Item entity-edit\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-nav\",children:[/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.phoneNumbers\",className:classNames({_active:$router.route.name===\"call_center.phoneNumbers\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"phone-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Phone Numbers\"})]}),/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.dispatchers\",className:classNames({_active:$router.route.name===\"call_center.dispatchers\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"user-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Dispatchers\"})]}),/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.groups\",className:classNames({_active:$router.route.name===\"call_center.groups\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"user-29\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Groups\"})]}),/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.callFlows\",className:classNames({_active:$router.route.name===\"call_center.callFlows\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"share-7\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Call Flows\"})]}),/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.settings\",className:classNames({_active:$router.route.name===\"call_center.settings\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"gear-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Settings\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper flex-container sb\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Phone Number\"}),phoneNumberData!==null&&phoneNumberData!==void 0&&phoneNumberData.permissions.edit_phone_number&&!editing?/*#__PURE__*/_jsx(\"button\",{className:\"_wa _green\",onClick:function onClick(){return setEditing(true);},children:\"Edit\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Main\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"__left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{zIndex:6},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Phone Number:\"}),/*#__PURE__*/_jsx(\"input\",{disabled:true,type:\"text\",defaultValue:phoneNumberData.phone_number.phone,onChange:function onChange(_ref){var value=_ref.target.value;return setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{phone:value}));}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"__right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{zIndex:6},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Active:\"}),/*#__PURE__*/_jsx(Switcher,{checked:newPhoneNumberData.active==='On',onChange:function onChange(value){return setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{active:value?'On':'Off'}));}})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{zIndex:6},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Types:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-wrapper\",children:/*#__PURE__*/_jsx(Select,{disabled:!editing,options:phoneNumberData.edit.types.map(function(type){return{span:type,value:type};}),selectedOption:newPhoneNumberData.type,onChange:function onChange(value){return setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{type:value}));}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Sources:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-wrapper\",children:/*#__PURE__*/_jsx(Select,{disabled:!editing,options:phoneNumberData.edit.sources.map(function(source){return{span:source,value:source};}),selectedOption:newPhoneNumberData.source,onChange:function onChange(value){return setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{source:value}));}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{zIndex:6},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Company:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-wrapper\",children:/*#__PURE__*/_jsx(Select,{disabled:!editing,options:phoneNumberData.edit.companies.map(function(company){return{span:company,value:company};}),selectedOption:newPhoneNumberData.company,onChange:function onChange(value){return setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{company:value}));}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{zIndex:5},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Area:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-wrapper\",children:/*#__PURE__*/_jsx(Select,{disabled:!editing,options:phoneNumberData.edit.areas.map(function(area){return{span:area,value:area};}),selectedOption:newPhoneNumberData.area,onChange:function onChange(value){return setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{area:value}));}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Call Flow:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-wrapper\",children:/*#__PURE__*/_jsx(Select,{disabled:!editing,options:phoneNumberData.edit.call_flows.map(function(call_flow){return{span:call_flow,value:call_flow};}),selectedOption:newPhoneNumberData.call_flow,onChange:function onChange(value){return setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{call_flow:value}));}})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Info\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Date Created:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:phoneNumberData.phone_number.created_at,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Created by:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:phoneNumberData.phone_number.created_by,disabled:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Last Edited:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:phoneNumberData.phone_number.last_edited_at,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Last Edited By:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:phoneNumberData.phone_number.last_edited_by,disabled:true})]})]})]})]}),editing?/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper flex-container sb editing-buttons\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"_red\",onClick:function onClick(){return setDeleting(true);},children:\"Delete Phone Number\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"_bordered _red\",onClick:function onClick(){return setEditing(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{disabled:!readyToSave,className:\"_bordered _green\",children:\"Save\"})]})]}):null,deleting?/*#__PURE__*/_jsx(\"div\",{className:\"item-delete-popup\",onClick:function onClick(){return setDeleting(false);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",onClick:function onClick(e){return e.stopPropagation();},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Delete PhoneNumber\"}),/*#__PURE__*/_jsx(\"div\",{className:\"checkbox-wrapper\",children:/*#__PURE__*/_jsx(Checkbox,{contents:\"I understand that after deleting the phone number it will not be possible to recover.\",value:readyToDelete,onChange:function onChange(value){return setReadyToDelete(value);}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"_bordered _green\",onClick:function onClick(){return setDeleting(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{disabled:!readyToDelete,className:\"_bordered _red\",children:\"Delete\"})]})]})}):null]}):null});});export default CallCenter_PhoneNumbersPage_Item;","map":{"version":3,"sources":["/Users/nicole/rrrr/crm/src/pages/CallCenter/PhoneNumbers/Item.tsx"],"names":["axios","React","useEffect","useState","connect","Icon","nError","mapDispatchToProps","mapStateToProps","Select","Checkbox","Switcher","BaseLink","useRoute","classNames","CallCenter_PhoneNumbersPage_Item","props","$router","readyToSave","setReadyToSave","editing","setEditing","deleting","setDeleting","readyToDelete","setReadyToDelete","phoneNumberData","setPhoneNumberData","newPhoneNumberData","setNewPhoneNumberData","loadInfo","get","data","phone","active","type","edit","types","source","sources","company","companies","area","areas","call_flow","call_flows","setTimeout","router","_active","route","name","permissions","edit_phone_number","zIndex","phone_number","value","target","map","span","created_at","created_by","last_edited_at","last_edited_by","e","stopPropagation"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Icon from \"../../../components/Icon\"\nimport { nError } from \"../../../funcs\"\nimport { StoreDispatch, StoreState, mapDispatchToProps, mapStateToProps } from \"../../../store\";\nimport Datetime from 'react-datetime'\n\nimport \"../../../styles/pages/common/entity-edit.sass\"\nimport moment from \"moment\"\nimport Select from \"../../../components/Select\"\nimport Checkbox from \"../../../components/Checkbox\"\nimport { CallCenter_PhoneNumber } from \"../../../models/CallCenter\"\nimport Switcher from \"../../../components/Switcher\"\nimport { BaseLink, useRoute } from \"react-router5\"\nimport classNames from \"classnames\"\n\ninterface Props {\n  store: StoreState,\n  dispatcher: StoreDispatch\n}\n\ninterface PhoneNumberData {\n  \n  permissions: {\n    \n    edit_phone_number: boolean,\n  },\n\n  phone_number: CallCenter_PhoneNumber,\n\n  edit: {\n    types: string[],\n    sources: string[],\n    companies: string[],\n    areas: string[],\n    call_flows: string[]\n  }\n}\n\nconst CallCenter_PhoneNumbersPage_Item = connect(mapStateToProps, mapDispatchToProps)(function(props: Props) {\n\n  const $router = useRoute()\n\n  const [readyToSave, setReadyToSave] = useState(false)\n\n  const [editing, setEditing] = useState(false)\n\n  const [deleting, setDeleting] = useState(false)\n  const [readyToDelete, setReadyToDelete] = useState(false)\n  \n  const [phoneNumberData, setPhoneNumberData] = useState<PhoneNumberData | null>(null)\n\n  const [newPhoneNumberData, setNewPhoneNumberData] = useState<Partial<CallCenter_PhoneNumber>>({\n    \n  })\n  \n  // Load info function\n  async function loadInfo() {\n    try {\n      const { data: phoneNumberData } = (await axios.get('/json/call_center_phone_number.json')) as {data: PhoneNumberData}\n\n      setPhoneNumberData(phoneNumberData)\n\n      setNewPhoneNumberData({\n        \n        phone: '',\n        active: 'On',\n\n        type: phoneNumberData.edit.types[0],\n        source: phoneNumberData.edit.sources[0],\n        company: phoneNumberData.edit.companies[0],\n        area: phoneNumberData.edit.areas[0],\n        call_flow: phoneNumberData.edit.call_flows[0],\n      })\n\n      setTimeout(() => setReadyToSave(false), 100)\n    }\n    catch (error) {\n      nError(error)\n    }\n  }\n\n  // Load phoneNumber data\n  useEffect(() => {\n    loadInfo()\n  }, [])\n\n  useEffect(() => setReadyToSave(true), [\n    newPhoneNumberData\n  ])\n  \n  // Render function\n  return (<>\n    {phoneNumberData && newPhoneNumberData.active ? (\n      <div className=\"CallCenter_PhoneNumbersPage_Item entity-edit\">\n\n        {/* Top navigation */}\n        <div className=\"top-nav\">\n          <BaseLink router={$router.router} routeName=\"call_center.phoneNumbers\" className={classNames({_active: $router.route.name === \"call_center.phoneNumbers\"})}>\n            <Icon icon=\"phone-1\" />\n            <span>Phone Numbers</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.dispatchers\" className={classNames({_active: $router.route.name === \"call_center.dispatchers\"})}>\n            <Icon icon=\"user-1\" />\n            <span>Dispatchers</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.groups\" className={classNames({_active: $router.route.name === \"call_center.groups\"})}>\n            <Icon icon=\"user-29\" />\n            <span>Groups</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.callFlows\" className={classNames({_active: $router.route.name === \"call_center.callFlows\"})}>\n            <Icon icon=\"share-7\" />\n            <span>Call Flows</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.settings\" className={classNames({_active: $router.route.name === \"call_center.settings\"})}>\n            <Icon icon=\"gear-1\" />\n            <span>Settings</span>\n          </BaseLink>\n        </div>\n\n        <div className=\"wrapper flex-container sb\">\n          <h1>Phone Number</h1>\n\n          {phoneNumberData?.permissions.edit_phone_number && !editing ? (\n            <button className=\"_wa _green\" onClick={() => setEditing(true)}>\n              Edit\n            </button>\n          ) : null}\n        </div>\n        \n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Main</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\" style={{zIndex: 6}}>\n                <span>Phone Number:</span>\n                \n                <input disabled={true} type=\"text\" defaultValue={phoneNumberData.phone_number.phone} onChange={({target: {value}}) => setNewPhoneNumberData({...newPhoneNumberData, phone: value})} />\n              </div>\n            </div>\n\n            \n            <div className=\"__right\">\n\n              <div className=\"field\" style={{zIndex: 6}}>\n                <span>Active:</span>\n                \n                <Switcher checked={newPhoneNumberData.active === 'On'} onChange={(value) => setNewPhoneNumberData({...newPhoneNumberData, active: value ? 'On' : 'Off'})} />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"legend\">Settings</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n\n              <div className=\"field\" style={{zIndex: 6}}>\n                <span>Types:</span>\n\n                <div className=\"input-wrapper\">\n                  <Select disabled={!editing} options={phoneNumberData.edit.types.map((type) => ({\n                    span: type,\n                    value: type\n                  }))} selectedOption={newPhoneNumberData.type as string} onChange={(value: string) => setNewPhoneNumberData({...newPhoneNumberData, type: value})}/>\n                </div>\n              </div>\n\n              <div className=\"field\">\n                <span>Sources:</span>\n\n                <div className=\"input-wrapper\">\n                  <Select disabled={!editing} options={phoneNumberData.edit.sources.map((source) => ({\n                    span: source,\n                    value: source\n                  }))} selectedOption={newPhoneNumberData.source as string} onChange={(value: string) => setNewPhoneNumberData({...newPhoneNumberData, source: value})}/>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"__right\">\n\n              <div className=\"field\" style={{zIndex: 6}}>\n                <span>Company:</span>\n\n                <div className=\"input-wrapper\">\n                  <Select disabled={!editing} options={phoneNumberData.edit.companies.map((company) => ({\n                    span: company,\n                    value: company\n                  }))} selectedOption={newPhoneNumberData.company as string} onChange={(value: string) => setNewPhoneNumberData({...newPhoneNumberData, company: value})}/>\n                </div>\n              </div>\n\n              <div className=\"field\" style={{zIndex: 5}}>\n                <span>Area:</span>\n\n                <div className=\"input-wrapper\">\n                  <Select disabled={!editing} options={phoneNumberData.edit.areas.map((area) => ({\n                    span: area,\n                    value: area\n                  }))} selectedOption={newPhoneNumberData.area as string} onChange={(value: string) => setNewPhoneNumberData({...newPhoneNumberData, area: value})}/>\n                </div>\n              </div>\n\n              <div className=\"field\">\n                <span>Call Flow:</span>\n\n                <div className=\"input-wrapper\">\n                  <Select disabled={!editing} options={phoneNumberData.edit.call_flows.map((call_flow) => ({\n                    span: call_flow,\n                    value: call_flow\n                  }))} selectedOption={newPhoneNumberData.call_flow as string} onChange={(value: string) => setNewPhoneNumberData({...newPhoneNumberData, call_flow: value})}/>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Info</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\">\n                <span>Date Created:</span>\n                <input type=\"text\" defaultValue={phoneNumberData.phone_number.created_at} disabled={ true } />\n              </div>\n\n              <div className=\"field\">\n                <span>Created by:</span>\n                <input type=\"text\" defaultValue={phoneNumberData.phone_number.created_by} disabled={ true } />\n              </div>\n            </div>\n\n            \n            <div className=\"__right\">\n\n              <div className=\"field\">\n                <span>Last Edited:</span>\n                <input type=\"text\" defaultValue={phoneNumberData.phone_number.last_edited_at} disabled={ true } />\n              </div>\n\n              <div className=\"field\">\n                <span>Last Edited By:</span>\n                <input type=\"text\" defaultValue={phoneNumberData.phone_number.last_edited_by} disabled={ true } />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {editing ? (\n          <div className=\"wrapper flex-container sb editing-buttons\">\n            <div>\n              <button className=\"_red\" onClick={() => setDeleting(true)}>Delete Phone Number</button>\n            </div>\n            <div className=\"buttons\">\n              <button className=\"_bordered _red\" onClick={() => setEditing(false)}>\n                Cancel\n              </button>\n              <button disabled={!readyToSave} className=\"_bordered _green\">\n                Save\n              </button>\n            </div>\n          </div>\n        ) : null}\n\n        {/* Item share popup */}\n        {deleting ? (\n          <div className=\"item-delete-popup\" onClick={() => setDeleting(false)}>\n\n            <div className=\"wrapper\" onClick={(e) => e.stopPropagation()}>\n            \n              <div className=\"title\">\n                Delete PhoneNumber\n              </div>\n\n              <div className=\"checkbox-wrapper\">\n                <Checkbox contents=\"I understand that after deleting the phone number it will not be possible to recover.\" value={readyToDelete} onChange={(value) => setReadyToDelete(value)} />\n              </div>\n\n              <div className=\"buttons\">\n\n                <button className=\"_bordered _green\" onClick={() => setDeleting(false)}>\n                  Cancel\n                </button>\n\n                <button disabled={!readyToDelete} className=\"_bordered _red\">\n                  Delete\n                </button>\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    ) : null}\n  </>)\n})\nexport default CallCenter_PhoneNumbersPage_Item\n"]},"metadata":{},"sourceType":"module"}