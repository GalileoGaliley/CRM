{"ast":null,"code":"var _jsxFileName = \"/Users/nicole/rrrr/crm/src/pages/CallCenter/CallGroups/New.tsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Icon from \"../../../components/Icon\";\nimport { nError } from \"../../../funcs\";\nimport { mapDispatchToProps, mapStateToProps } from \"../../../store\";\nimport \"../../../styles/pages/common/entity-edit.sass\";\nimport Select from \"../../../components/Select\";\nimport Checkbox from \"../../../components/Checkbox\";\nimport { BaseLink, useRoute } from \"react-router5\";\nimport classNames from \"classnames\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst emptyDispatcher = {\n  dispatcher_id: '',\n  name: '',\n  user: '',\n  phone: '',\n  is_phone: false,\n  is_softphone: false,\n  active: 'Active',\n  groups: '',\n  \"created_at\": \"05/04/2021 09:32am\",\n  \"created_by\": \"Alex\",\n  \"last_edited_at\": \"05/04/2021 10:34am\",\n  \"last_edited_by\": \"Alex\"\n};\nconst CallCenter_CallGroupsPage_New = connect(mapStateToProps, mapDispatchToProps)(_s(function (props) {\n  _s();\n\n  const [readyToSave, setReadyToSave] = useState(false);\n  const $router = useRoute();\n  const [dispatchers, setDispatchers] = useState(null);\n  const [availableDispatchers, setAvailableDispatchers] = useState([]);\n  const [selectedDispatcher, setSelectedDispatcher] = useState(emptyDispatcher);\n  const [newCallGroupData, setNewCallGroupData] = useState({\n    name: '',\n    dispatchers: []\n  }); // Load info function\n\n  async function loadInfo() {\n    try {\n      const {\n        data: callGroupsData\n      } = await axios.get('/json/call_center_call_groups.json');\n      setDispatchers(callGroupsData.edit.dispatchers);\n      setAvailableDispatchers([emptyDispatcher].concat(callGroupsData.edit.dispatchers));\n      setSelectedDispatcher([emptyDispatcher].concat(callGroupsData.edit.dispatchers)[0]);\n      setTimeout(() => setReadyToSave(false), 100);\n    } catch (error) {\n      nError(error);\n    }\n  } // Load callGroup data\n\n\n  useEffect(() => {\n    loadInfo();\n  }, []); // Add dispatcher function\n\n  function addDispatcher() {\n    if (!newCallGroupData.dispatchers || !newCallGroupData) return;\n    const newDispatchersList = [...newCallGroupData.dispatchers, selectedDispatcher];\n    setNewCallGroupData({ ...newCallGroupData,\n      dispatchers: newDispatchersList\n    });\n    let _availableDispatchers = [...availableDispatchers];\n    _availableDispatchers = _availableDispatchers.filter($dispatcher => {\n      return newDispatchersList.findIndex(dispatcher => {\n        return dispatcher.name === $dispatcher.name;\n      }) === -1;\n    });\n    setAvailableDispatchers([..._availableDispatchers]);\n    setSelectedDispatcher(emptyDispatcher);\n    setReadyToSave(true);\n  } // Remove dispatcher function\n\n\n  function removeDispatcher(i) {\n    let _callGroupDispatchers = [...newCallGroupData.dispatchers];\n    let _dispatcher = _callGroupDispatchers[i];\n\n    _callGroupDispatchers.splice(i, 1);\n\n    setNewCallGroupData({ ...newCallGroupData,\n      dispatchers: _callGroupDispatchers\n    });\n    setAvailableDispatchers([...availableDispatchers, _dispatcher]);\n    setReadyToSave(true);\n  }\n\n  useEffect(() => setReadyToSave(true), [newCallGroupData]); // Render function\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: true ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"CallCenter_CallGroupsPage_New entity-edit\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top-nav\",\n        children: [/*#__PURE__*/_jsxDEV(BaseLink, {\n          router: $router.router,\n          routeName: \"call_center.phoneNumbers\",\n          className: classNames({\n            _active: $router.route.name === \"call_center.phoneNumbers\"\n          }),\n          children: [/*#__PURE__*/_jsxDEV(Icon, {\n            icon: \"phone-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Phone Numbers\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BaseLink, {\n          router: $router.router,\n          routeName: \"call_center.dispatchers\",\n          className: classNames({\n            _active: $router.route.name === \"call_center.dispatchers\"\n          }),\n          children: [/*#__PURE__*/_jsxDEV(Icon, {\n            icon: \"user-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Dispatchers\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BaseLink, {\n          router: $router.router,\n          routeName: \"call_center.groups\",\n          className: classNames({\n            _active: $router.route.name === \"call_center.groups\"\n          }),\n          children: [/*#__PURE__*/_jsxDEV(Icon, {\n            icon: \"user-29\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Groups\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BaseLink, {\n          router: $router.router,\n          routeName: \"call_center.callFlows\",\n          className: classNames({\n            _active: $router.route.name === \"call_center.callFlows\"\n          }),\n          children: [/*#__PURE__*/_jsxDEV(Icon, {\n            icon: \"share-7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Call Flows\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BaseLink, {\n          router: $router.router,\n          routeName: \"call_center.settings\",\n          className: classNames({\n            _active: $router.route.name === \"call_center.settings\"\n          }),\n          children: [/*#__PURE__*/_jsxDEV(Icon, {\n            icon: \"gear-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Settings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrapper flex-container sb\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"New Call Group\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fieldset\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend\",\n          children: \"Main\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fields\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"__left\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Name:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                onChange: _ref => {\n                  let {\n                    target: {\n                      value\n                    }\n                  } = _ref;\n                  return setNewCallGroupData({ ...newCallGroupData,\n                    name: value\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fieldset\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-container sb wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend\",\n            children: \"Dispatchers\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-action-wrapper\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Dispatcher:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(Select, {\n                options: availableDispatchers.map(dispatcher => ({\n                  span: dispatcher.name,\n                  value: dispatcher.name\n                })),\n                selectedOption: selectedDispatcher.name,\n                onChange: value => setSelectedDispatcher(availableDispatchers.find(_dispatcher => _dispatcher.name === value))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                disabled: !selectedDispatcher.name,\n                className: \"_green\",\n                onClick: () => addDispatcher(),\n                children: \"Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: classNames('table', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"User\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Phone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Phone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Softphone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Active\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this), newCallGroupData.dispatchers.map((dispatcher, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: dispatcher.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: dispatcher.user\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: dispatcher.phone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                contents: '',\n                value: dispatcher.is_phone\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                contents: '',\n                value: dispatcher.is_softphone\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: classNames({\n                'red-text': dispatcher.active === 'Off',\n                'green-text': dispatcher.active === 'On'\n              }),\n              children: dispatcher.active\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"_zeroed _iconed _red\",\n                onClick: () => removeDispatcher(i),\n                children: /*#__PURE__*/_jsxDEV(Icon, {\n                  icon: \"x-mark-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classNames('mobile-table', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          }),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mobile-table-items\",\n            children: newCallGroupData.dispatchers.map((dispatcher, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item\",\n              onClick: () => $router.router.navigate('call_center.dispatchers.item', {}, {\n                reload: true\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"__top\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"__left\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: dispatcher.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 248,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: dispatcher.user\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"__right small\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: classNames({\n                      'red-text': dispatcher.active === 'Inactive',\n                      'green-text': dispatcher.active === 'Active'\n                    }),\n                    children: dispatcher.active\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: dispatcher.phone\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"__bottom\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"__left\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-container\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"gray\",\n                      children: \"Phone:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 271,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\" \", /*#__PURE__*/_jsxDEV(Checkbox, {\n                        contents: \"\",\n                        value: dispatcher.is_phone\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 272,\n                        columnNumber: 30\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 272,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-container\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"gray\",\n                      children: \"Softphone:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 275,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\" \", /*#__PURE__*/_jsxDEV(Checkbox, {\n                        contents: \"\",\n                        value: dispatcher.is_softphone\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 276,\n                        columnNumber: 30\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 276,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 274,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"__right small\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"_zeroed _iconed _red\",\n                      onClick: e => {\n                        e.stopPropagation();\n                        removeDispatcher(i);\n                      },\n                      children: /*#__PURE__*/_jsxDEV(Icon, {\n                        icon: \"x-mark-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 283,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 282,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 281,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrapper flex-container sb editing-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"_bordered _red\",\n            onClick: () => $router.router.navigate('call_center.groups', {}, {\n              reload: true\n            }),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !readyToSave,\n            className: \"_bordered _green\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this) : null\n  }, void 0, false);\n}, \"u+52gZqzdVen9vaDSDMYR5aTf1c=\", false, function () {\n  return [useRoute];\n}));\nexport default CallCenter_CallGroupsPage_New;","map":{"version":3,"sources":["/Users/nicole/rrrr/crm/src/pages/CallCenter/CallGroups/New.tsx"],"names":["axios","useEffect","useState","connect","Icon","nError","mapDispatchToProps","mapStateToProps","Select","Checkbox","BaseLink","useRoute","classNames","emptyDispatcher","dispatcher_id","name","user","phone","is_phone","is_softphone","active","groups","CallCenter_CallGroupsPage_New","props","readyToSave","setReadyToSave","$router","dispatchers","setDispatchers","availableDispatchers","setAvailableDispatchers","selectedDispatcher","setSelectedDispatcher","newCallGroupData","setNewCallGroupData","loadInfo","data","callGroupsData","get","edit","concat","setTimeout","error","addDispatcher","newDispatchersList","_availableDispatchers","filter","$dispatcher","findIndex","dispatcher","removeDispatcher","i","_callGroupDispatchers","_dispatcher","splice","router","_active","route","target","value","map","span","find","__respectAsidePanel","store","navActive","is","navigate","reload","e","stopPropagation"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Icon from \"../../../components/Icon\"\nimport { nError } from \"../../../funcs\"\nimport { StoreDispatch, StoreState, mapDispatchToProps, mapStateToProps } from \"../../../store\";\n\nimport \"../../../styles/pages/common/entity-edit.sass\"\nimport Select from \"../../../components/Select\"\nimport Checkbox from \"../../../components/Checkbox\"\nimport { BaseLink, useRoute } from \"react-router5\"\nimport { CallCenter_Dispatcher } from \"../../../models/CallCenter\"\nimport classNames from \"classnames\"\n\ninterface Props {\n  store: StoreState,\n  dispatcher: StoreDispatch\n}\n\nconst emptyDispatcher: CallCenter_Dispatcher = {\n  dispatcher_id: '',\n  name: '',\n  user: '',\n  phone: '',\n  is_phone: false,\n  is_softphone: false,\n  active: 'Active',\n  groups: '',\n  \"created_at\": \"05/04/2021 09:32am\",\n  \"created_by\": \"Alex\",\n  \"last_edited_at\": \"05/04/2021 10:34am\",\n  \"last_edited_by\": \"Alex\"\n}\n\nconst CallCenter_CallGroupsPage_New = connect(mapStateToProps, mapDispatchToProps)(function(props: Props) {\n\n  const [readyToSave, setReadyToSave] = useState(false)\n\n  const $router = useRoute()\n\n  const [dispatchers, setDispatchers] = useState<CallCenter_Dispatcher[] | null>(null)\n  const [availableDispatchers, setAvailableDispatchers] = useState<CallCenter_Dispatcher[]>([])\n  const [selectedDispatcher, setSelectedDispatcher] = useState<CallCenter_Dispatcher>(emptyDispatcher)\n  const [newCallGroupData, setNewCallGroupData] = useState({\n    name: '',\n    dispatchers: [] as CallCenter_Dispatcher[]\n  })\n  \n  // Load info function\n  async function loadInfo() {\n    try {\n      const { data: callGroupsData } = (await axios.get('/json/call_center_call_groups.json'))\n\n      setDispatchers(callGroupsData.edit.dispatchers)\n      setAvailableDispatchers([emptyDispatcher].concat(callGroupsData.edit.dispatchers))\n      setSelectedDispatcher([emptyDispatcher].concat(callGroupsData.edit.dispatchers)[0])\n\n      setTimeout(() => setReadyToSave(false), 100)\n    }\n    catch (error) {\n      nError(error)\n    }\n  }\n\n  // Load callGroup data\n  useEffect(() => {\n    loadInfo()\n  }, [])\n\n  // Add dispatcher function\n  function addDispatcher() {\n\n    if (!newCallGroupData.dispatchers || !newCallGroupData) return\n\n    const newDispatchersList = [\n      ...newCallGroupData.dispatchers,\n      selectedDispatcher\n    ]\n\n    setNewCallGroupData({\n      ...newCallGroupData,\n      dispatchers: newDispatchersList\n    })\n\n    let _availableDispatchers = [...availableDispatchers]\n\n    _availableDispatchers = _availableDispatchers.filter(($dispatcher) => {\n      \n      return newDispatchersList.findIndex((dispatcher) => {\n        return dispatcher.name === $dispatcher.name\n      }) === -1\n    })\n\n    setAvailableDispatchers([\n      ..._availableDispatchers\n    ])\n\n    setSelectedDispatcher(emptyDispatcher)\n\n    setReadyToSave(true)\n  }\n\n  // Remove dispatcher function\n  function removeDispatcher(i: number) {\n\n    let _callGroupDispatchers = [...newCallGroupData.dispatchers]\n\n    let _dispatcher = _callGroupDispatchers[i]\n    \n    _callGroupDispatchers.splice(i, 1)\n\n    setNewCallGroupData({\n      ...newCallGroupData,\n      dispatchers: _callGroupDispatchers\n    })\n\n    setAvailableDispatchers([\n      ...availableDispatchers,\n      _dispatcher\n    ])\n\n    setReadyToSave(true)\n  }\n\n  useEffect(() => setReadyToSave(true), [\n    newCallGroupData\n  ])\n  \n  // Render function\n  return (<>\n    {true ? (\n      <div className=\"CallCenter_CallGroupsPage_New entity-edit\">\n\n        {/* Top navigation */}\n        <div className=\"top-nav\">\n          <BaseLink router={$router.router} routeName=\"call_center.phoneNumbers\" className={classNames({_active: $router.route.name === \"call_center.phoneNumbers\"})}>\n            <Icon icon=\"phone-1\" />\n            <span>Phone Numbers</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.dispatchers\" className={classNames({_active: $router.route.name === \"call_center.dispatchers\"})}>\n            <Icon icon=\"user-1\" />\n            <span>Dispatchers</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.groups\" className={classNames({_active: $router.route.name === \"call_center.groups\"})}>\n            <Icon icon=\"user-29\" />\n            <span>Groups</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.callFlows\" className={classNames({_active: $router.route.name === \"call_center.callFlows\"})}>\n            <Icon icon=\"share-7\" />\n            <span>Call Flows</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.settings\" className={classNames({_active: $router.route.name === \"call_center.settings\"})}>\n            <Icon icon=\"gear-1\" />\n            <span>Settings</span>\n          </BaseLink>\n        </div>\n\n        <div className=\"wrapper flex-container sb\">\n          <h1>New Call Group</h1>\n        </div>\n        \n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Main</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\">\n                <span>Name:</span>\n                <input type=\"text\" onChange={({target: {value}}) => setNewCallGroupData({...newCallGroupData, name: value})} />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"flex-container sb wrap\">\n            <div className=\"legend\">Dispatchers</div>\n\n            <div className=\"legend-action-wrapper\">\n              <label>Dispatcher:</label>\n              <div className=\"input-wrapper\">\n                <Select options={availableDispatchers.map((dispatcher) => ({\n                  span: dispatcher.name,\n                  value: dispatcher.name\n                }))} selectedOption={selectedDispatcher.name} onChange={(value) => setSelectedDispatcher(availableDispatchers.find((_dispatcher) => _dispatcher.name === value) as CallCenter_Dispatcher)}/>\n                <button disabled={!selectedDispatcher.name} className=\"_green\" onClick={() => addDispatcher()}>\n                  Add\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <table className={classNames('table', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr>\n              <th>Name</th>\n              <th>User</th>\n              <th>Phone</th>\n              <th>Phone</th>\n              <th>Softphone</th>\n              <th>Active</th>\n              <th></th>\n            </tr>\n            {(newCallGroupData.dispatchers as CallCenter_Dispatcher[]).map((dispatcher, i) => (\n              <tr key={i}>\n                <td>{dispatcher.name}</td>\n                <td>{dispatcher.user}</td>\n                <td>{dispatcher.phone}</td>\n                <td>\n                  <Checkbox contents={''} value={dispatcher.is_phone} />\n                </td>\n                <td>\n                  <Checkbox contents={''} value={dispatcher.is_softphone} />\n                </td>\n                <td className={classNames({\n                  'red-text': dispatcher.active === 'Off',\n                  'green-text': dispatcher.active === 'On',\n                })}>{dispatcher.active}</td>\n                <td>\n                  <button className=\"_zeroed _iconed _red\" onClick={() => removeDispatcher(i)}>\n                    <Icon icon=\"x-mark-1\" />\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </table>\n\n          <div className={classNames('mobile-table', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n\n            <div className=\"mobile-table-items\">\n\n              {newCallGroupData.dispatchers.map((dispatcher, i: number) => (\n              <div className=\"item\" key={i} onClick={() => $router.router.navigate('call_center.dispatchers.item', {}, {reload: true})}>\n\n                <div className=\"__top\">\n\n                  <div className=\"__left\">\n                    <div><b>{dispatcher.name}</b></div>\n                    <div>\n                      {dispatcher.user}\n                    </div>\n                  </div>\n\n                  <div className=\"__right small\">\n                    <div className={classNames({\n                      'red-text': dispatcher.active === 'Inactive',\n                      'green-text': dispatcher.active === 'Active',\n                    })}>\n                      {dispatcher.active}\n                    </div>\n                    <div>\n                      {dispatcher.phone}\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"__bottom\">\n\n                  <div className=\"__left\">\n                    <div className=\"flex-container\">\n                      <span className=\"gray\">Phone:</span>\n                      <span> <Checkbox contents='' value={dispatcher.is_phone} /></span>\n                    </div>\n                    <div className=\"flex-container\">\n                      <span className=\"gray\">Softphone:</span>\n                      <span> <Checkbox contents='' value={dispatcher.is_softphone} /></span>\n                    </div>\n                  </div>\n\n                  <div className=\"__right small\">\n                    <div>\n                        <button className=\"_zeroed _iconed _red\" onClick={(e) => { e.stopPropagation(); removeDispatcher(i) }}>\n                        <Icon icon=\"x-mark-1\" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"wrapper flex-container sb editing-buttons\">\n          <div />\n          <div className=\"buttons\">\n            <button className=\"_bordered _red\" onClick={() => $router.router.navigate('call_center.groups', {}, {\n              reload: true\n            })}>\n              Cancel\n            </button>\n            <button disabled={!readyToSave} className=\"_bordered _green\">\n              Save\n            </button>\n          </div>\n        </div>\n      </div>\n    ) : null}\n  </>)\n})\nexport default CallCenter_CallGroupsPage_New\n"]},"metadata":{},"sourceType":"module"}