{"ast":null,"code":"import _objectSpread from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{nError}from\"../../../funcs\";import{mapDispatchToProps,mapStateToProps}from\"../../../store\";import Select from\"../../../components/Select\";import{BaseLink,useRoute}from\"react-router5\";import Switcher from\"../../../components/Switcher\";import\"../../../styles/pages/common/entity-edit.sass\";import Icon from\"../../../components/Icon\";import classNames from\"classnames\";import ReactInputMask from\"react-input-mask\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CallCenter_PhoneNumbersPage_New=connect(mapStateToProps,mapDispatchToProps)(function(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),readyToSave=_useState2[0],setReadyToSave=_useState2[1];var $router=useRoute();var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),edit=_useState4[0],setEdit=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),newPhoneNumberData=_useState6[0],setNewPhoneNumberData=_useState6[1];// Load info function\nfunction loadInfo(){return _loadInfo.apply(this,arguments);}// Load phoneNumber data\nfunction _loadInfo(){_loadInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,phoneNumbersData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/json/call_center_phone_numbers.json');case 3:_yield$axios$get=_context.sent;phoneNumbersData=_yield$axios$get.data;setEdit(phoneNumbersData.edit);setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{phone:'',active:'On',type:phoneNumbersData.edit.types[0],source:phoneNumbersData.edit.sources[0],company:phoneNumbersData.edit.companies[0],area:phoneNumbersData.edit.areas[0],call_flow:phoneNumbersData.edit.call_flows[0]}));setTimeout(function(){return setReadyToSave(false);},100);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);nError(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return _loadInfo.apply(this,arguments);}useEffect(function(){loadInfo();},[]);// Watch changes\nuseEffect(function(){setReadyToSave(true);},[newPhoneNumberData]);// Render function\nreturn/*#__PURE__*/_jsx(_Fragment,{children:newPhoneNumberData&&edit?/*#__PURE__*/_jsxs(\"div\",{className:\"CallCenter_PhoneNumbersPage_New entity-edit\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-nav\",children:[/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.phoneNumbers\",className:classNames({_active:$router.route.name===\"call_center.phoneNumbers\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"phone-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Phone Numbers\"})]}),/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.dispatchers\",className:classNames({_active:$router.route.name===\"call_center.dispatchers\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"user-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Dispatchers\"})]}),/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.groups\",className:classNames({_active:$router.route.name===\"call_center.groups\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"user-29\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Groups\"})]}),/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.callFlows\",className:classNames({_active:$router.route.name===\"call_center.callFlows\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"share-7\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Call Flows\"})]}),/*#__PURE__*/_jsxs(BaseLink,{router:$router.router,routeName:\"call_center.settings\",className:classNames({_active:$router.route.name===\"call_center.settings\"}),children:[/*#__PURE__*/_jsx(Icon,{icon:\"gear-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Settings\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"wrapper flex-container sb\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"New Phone Number\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Main\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"__left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{zIndex:6},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Phone Number:\"}),/*#__PURE__*/_jsx(ReactInputMask,{type:\"text\",mask:\"+1 (999) 999-9999\",defaultValue:newPhoneNumberData.phone,onChange:function onChange(_ref){var value=_ref.target.value;return setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{phone:value}));}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"__right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{zIndex:6},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Active:\"}),/*#__PURE__*/_jsx(Switcher,{checked:newPhoneNumberData.active==='On',onChange:function onChange(value){return setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{active:value?'On':'Off'}));}})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{zIndex:6},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Types:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-wrapper\",children:/*#__PURE__*/_jsx(Select,{options:edit.types.map(function(type){return{span:type,value:type};}),selectedOption:newPhoneNumberData.type,onChange:function onChange(value){return setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{type:value}));}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Sources:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-wrapper\",children:/*#__PURE__*/_jsx(Select,{options:edit.sources.map(function(source){return{span:source,value:source};}),selectedOption:newPhoneNumberData.source,onChange:function onChange(value){return setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{source:value}));}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{zIndex:6},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Company:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-wrapper\",children:/*#__PURE__*/_jsx(Select,{options:edit.companies.map(function(company){return{span:company,value:company};}),selectedOption:newPhoneNumberData.company,onChange:function onChange(value){return setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{company:value}));}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{zIndex:5},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Area:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-wrapper\",children:/*#__PURE__*/_jsx(Select,{options:edit.areas.map(function(area){return{span:area,value:area};}),selectedOption:newPhoneNumberData.area,onChange:function onChange(value){return setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{area:value}));}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Call Flow:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-wrapper\",children:/*#__PURE__*/_jsx(Select,{options:edit.call_flows.map(function(call_flow){return{span:call_flow,value:call_flow};}),selectedOption:newPhoneNumberData.call_flow,onChange:function onChange(value){return setNewPhoneNumberData(_objectSpread(_objectSpread({},newPhoneNumberData),{},{call_flow:value}));}})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper flex-container sb editing-buttons\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"_bordered _red\",onClick:function onClick(){return $router.router.navigate('call_center.phoneNumbers',{},{reload:true});},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{disabled:!readyToSave,className:\"_bordered _green\",children:\"Save\"})]})]})]}):null});});export default CallCenter_PhoneNumbersPage_New;","map":{"version":3,"sources":["/Users/nicole/rrrr/crm/src/pages/CallCenter/PhoneNumbers/New.tsx"],"names":["axios","useEffect","useState","connect","nError","mapDispatchToProps","mapStateToProps","Select","BaseLink","useRoute","Switcher","Icon","classNames","ReactInputMask","CallCenter_PhoneNumbersPage_New","props","readyToSave","setReadyToSave","$router","edit","setEdit","newPhoneNumberData","setNewPhoneNumberData","loadInfo","get","phoneNumbersData","data","phone","active","type","types","source","sources","company","companies","area","areas","call_flow","call_flows","setTimeout","router","_active","route","name","zIndex","value","target","map","span","navigate","reload"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { nError } from \"../../../funcs\"\nimport { StoreDispatch, StoreState, mapDispatchToProps, mapStateToProps } from \"../../../store\";\n\nimport Select from \"../../../components/Select\"\nimport { BaseLink, useRoute } from \"react-router5\"\nimport { CallCenter_PhoneNumber } from \"../../../models/CallCenter\"\nimport Switcher from \"../../../components/Switcher\"\n\nimport \"../../../styles/pages/common/entity-edit.sass\"\nimport Icon from \"../../../components/Icon\"\nimport classNames from \"classnames\"\nimport ReactInputMask from \"react-input-mask\"\n\ninterface Props {\n  store: StoreState,\n  dispatcher: StoreDispatch\n}\n\nconst CallCenter_PhoneNumbersPage_New = connect(mapStateToProps, mapDispatchToProps)(function(props: Props) {\n\n  const [readyToSave, setReadyToSave] = useState(false)\n\n  const $router = useRoute()\n\n  const [edit, setEdit] = useState<{\n\n    types: string[],\n    sources: string[],\n    companies: string[],\n    areas: string[],\n    call_flows: string[]\n  } | null>(null)\n\n  const [newPhoneNumberData, setNewPhoneNumberData] = useState<Partial<CallCenter_PhoneNumber> | null>(null)\n  \n  // Load info function\n  async function loadInfo() {\n    try {\n      const { data: phoneNumbersData } = (await axios.get('/json/call_center_phone_numbers.json'))\n\n      setEdit(phoneNumbersData.edit)\n\n      setNewPhoneNumberData({\n        ...newPhoneNumberData,\n\n        phone: '',\n        active: 'On',\n        type: phoneNumbersData.edit.types[0],\n        source: phoneNumbersData.edit.sources[0],\n        company: phoneNumbersData.edit.companies[0],\n        area: phoneNumbersData.edit.areas[0],\n        call_flow: phoneNumbersData.edit.call_flows[0],\n      })\n\n      setTimeout(() => setReadyToSave(false), 100)\n    }\n    catch (error) {\n      nError(error)\n    }\n  }\n\n  // Load phoneNumber data\n  useEffect(() => {\n    loadInfo()\n  }, [])\n\n  // Watch changes\n  useEffect(() => {\n    setReadyToSave(true)\n  }, [\n    newPhoneNumberData\n  ])\n  \n  // Render function\n  return (<>\n    {newPhoneNumberData && edit ? (\n      <div className=\"CallCenter_PhoneNumbersPage_New entity-edit\">\n\n        {/* Top navigation */}\n        <div className=\"top-nav\">\n          <BaseLink router={$router.router} routeName=\"call_center.phoneNumbers\" className={classNames({_active: $router.route.name === \"call_center.phoneNumbers\"})}>\n            <Icon icon=\"phone-1\" />\n            <span>Phone Numbers</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.dispatchers\" className={classNames({_active: $router.route.name === \"call_center.dispatchers\"})}>\n            <Icon icon=\"user-1\" />\n            <span>Dispatchers</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.groups\" className={classNames({_active: $router.route.name === \"call_center.groups\"})}>\n            <Icon icon=\"user-29\" />\n            <span>Groups</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.callFlows\" className={classNames({_active: $router.route.name === \"call_center.callFlows\"})}>\n            <Icon icon=\"share-7\" />\n            <span>Call Flows</span>\n          </BaseLink>\n\n          <BaseLink router={$router.router} routeName=\"call_center.settings\" className={classNames({_active: $router.route.name === \"call_center.settings\"})}>\n            <Icon icon=\"gear-1\" />\n            <span>Settings</span>\n          </BaseLink>\n        </div>\n\n        <div className=\"wrapper flex-container sb\">\n          <h1>New Phone Number</h1>\n        </div>\n        \n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Main</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\" style={{zIndex: 6}}>\n                <span>Phone Number:</span>\n                \n                <ReactInputMask type=\"text\" mask=\"+1 (999) 999-9999\" defaultValue={newPhoneNumberData.phone} onChange={({target: {value}}) => setNewPhoneNumberData({...newPhoneNumberData, phone: value})} />\n              </div>\n            </div>\n\n            \n            <div className=\"__right\">\n\n              <div className=\"field\" style={{zIndex: 6}}>\n                <span>Active:</span>\n                \n                <Switcher checked={newPhoneNumberData.active === 'On'} onChange={(value) => setNewPhoneNumberData({...newPhoneNumberData, active: value ? 'On' : 'Off'})} />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"legend\">Settings</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n\n              <div className=\"field\" style={{zIndex: 6}}>\n                <span>Types:</span>\n\n                <div className=\"input-wrapper\">\n                  <Select options={edit.types.map((type) => ({\n                    span: type,\n                    value: type\n                  }))} selectedOption={newPhoneNumberData.type as string} onChange={(value: string) => setNewPhoneNumberData({...newPhoneNumberData, type: value})}/>\n                </div>\n              </div>\n\n              <div className=\"field\">\n                <span>Sources:</span>\n\n                <div className=\"input-wrapper\">\n                  <Select options={edit.sources.map((source) => ({\n                    span: source,\n                    value: source\n                  }))} selectedOption={newPhoneNumberData.source as string} onChange={(value: string) => setNewPhoneNumberData({...newPhoneNumberData, source: value})}/>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"__right\">\n\n              <div className=\"field\" style={{zIndex: 6}}>\n                <span>Company:</span>\n\n                <div className=\"input-wrapper\">\n                  <Select options={edit.companies.map((company) => ({\n                    span: company,\n                    value: company\n                  }))} selectedOption={newPhoneNumberData.company as string} onChange={(value: string) => setNewPhoneNumberData({...newPhoneNumberData, company: value})}/>\n                </div>\n              </div>\n\n              <div className=\"field\" style={{zIndex: 5}}>\n                <span>Area:</span>\n\n                <div className=\"input-wrapper\">\n                  <Select options={edit.areas.map((area) => ({\n                    span: area,\n                    value: area\n                  }))} selectedOption={newPhoneNumberData.area as string} onChange={(value: string) => setNewPhoneNumberData({...newPhoneNumberData, area: value})}/>\n                </div>\n              </div>\n\n              <div className=\"field\">\n                <span>Call Flow:</span>\n\n                <div className=\"input-wrapper\">\n                  <Select options={edit.call_flows.map((call_flow) => ({\n                    span: call_flow,\n                    value: call_flow\n                  }))} selectedOption={newPhoneNumberData.call_flow as string} onChange={(value: string) => setNewPhoneNumberData({...newPhoneNumberData, call_flow: value})}/>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"wrapper flex-container sb editing-buttons\">\n          <div />\n          <div className=\"buttons\">\n            <button className=\"_bordered _red\" onClick={() => $router.router.navigate('call_center.phoneNumbers', {}, {\n              reload: true\n            })}>\n              Cancel\n            </button>\n            <button disabled={!readyToSave} className=\"_bordered _green\">\n              Save\n            </button>\n          </div>\n        </div>\n      </div>\n    ) : null}\n  </>)\n})\nexport default CallCenter_PhoneNumbersPage_New\n"]},"metadata":{},"sourceType":"module"}