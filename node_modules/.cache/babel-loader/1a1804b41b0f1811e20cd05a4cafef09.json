{"ast":null,"code":"import _objectSpread from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{nError}from\"../../funcs/base\";import{mapDispatchToProps,mapStateToProps}from\"../../store\";import\"../../styles/pages/common/entity-edit.sass\";import Select from\"../../components/Select\";import Checkbox from\"../../components/Checkbox\";import Switcher from\"../../components/Switcher\";import{useRoute}from\"react-router5\";import ReactInputMask from\"react-input-mask\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ServiceResourcesPage_Item=connect(mapStateToProps,mapDispatchToProps)(function(props){var $router=useRoute();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),readyToSave=_useState2[0],setReadyToSave=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),editing=_useState4[0],setEditing=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),deleting=_useState6[0],setDeleting=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),readyToDelete=_useState8[0],setReadyToDelete=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),serviceResourceData=_useState10[0],setServiceResourceData=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),newServiceResourceData=_useState12[0],setNewServiceResourceData=_useState12[1];// Load info function\nfunction loadInfo(){return _loadInfo.apply(this,arguments);}// Load service_resource data\nfunction _loadInfo(){_loadInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _ref5,_serviceResourceData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/json/service_resource.json');case 3:_ref5=_context.sent;_serviceResourceData=_ref5.data;setServiceResourceData(_serviceResourceData);setNewServiceResourceData(_serviceResourceData.service_resource);setTimeout(function(){return setReadyToSave(false);},100);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);nError(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return _loadInfo.apply(this,arguments);}useEffect(function(){loadInfo();},[]);useEffect(function(){return setReadyToSave(true);},[newServiceResourceData]);// Render function\nreturn/*#__PURE__*/_jsx(_Fragment,{children:serviceResourceData&&newServiceResourceData.active?/*#__PURE__*/_jsxs(\"div\",{className:\"ServiceResourcesPage_Item entity-edit\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper flex-container sb\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container _gap-narrow\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Service Resource:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"item-name\",children:newServiceResourceData.name})]}),serviceResourceData!==null&&serviceResourceData!==void 0&&serviceResourceData.permissions.edit_service_resource&&!editing?/*#__PURE__*/_jsx(\"button\",{className:\"_wa _green\",onClick:function onClick(){return setEditing(true);},children:\"Edit\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Main\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"__left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"NickName:\"}),/*#__PURE__*/_jsx(\"input\",{disabled:!editing,type:\"text\",defaultValue:serviceResourceData.service_resource.name,onChange:function onChange(_ref){var value=_ref.target.value;return setNewServiceResourceData(_objectSpread(_objectSpread({},newServiceResourceData),{},{name:value}));}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"__right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Active:\"}),/*#__PURE__*/_jsx(Switcher,{disabled:!editing,checked:newServiceResourceData.active,onChange:function onChange(value){return setNewServiceResourceData(_objectSpread(_objectSpread({},newServiceResourceData),{},{active:value}));}})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"User:\"}),/*#__PURE__*/_jsx(\"input\",{disabled:true,type:\"text\",defaultValue:serviceResourceData.service_resource.user})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{zIndex:5},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Area:\"}),/*#__PURE__*/_jsx(Select,{disabled:!editing,options:serviceResourceData.edit.area.map(function(option){return{span:option,value:option};}),selectedOption:newServiceResourceData.area,onChange:function onChange(value){return setNewServiceResourceData(_objectSpread(_objectSpread({},newServiceResourceData),{},{area:value}));}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"__right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Time Zone:\"}),/*#__PURE__*/_jsx(Select,{disabled:!editing,options:serviceResourceData.edit.time_zone.map(function(option){return{span:option,value:option};}),selectedOption:newServiceResourceData.time_zone,onChange:function onChange(value){return setNewServiceResourceData(_objectSpread(_objectSpread({},newServiceResourceData),{},{time_zone:value}));}})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Notifications\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Phone:\"}),/*#__PURE__*/_jsx(ReactInputMask,{disabled:!editing,type:\"text\",mask:\"+1 (999) 999-9999\",defaultValue:newServiceResourceData.phone,onChange:function onChange(_ref2){var value=_ref2.target.value;return setNewServiceResourceData(_objectSpread(_objectSpread({},newServiceResourceData),{},{phone:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Slack Channel:\"}),/*#__PURE__*/_jsx(\"input\",{disabled:!editing,type:\"text\",defaultValue:serviceResourceData.service_resource.slack_channel,onChange:function onChange(_ref3){var value=_ref3.target.value;return setNewServiceResourceData(_objectSpread(_objectSpread({},newServiceResourceData),{},{slack_channel:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Slack Member ID:\"}),/*#__PURE__*/_jsx(\"input\",{disabled:!editing,type:\"text\",defaultValue:serviceResourceData.service_resource.slack_member_id,onChange:function onChange(_ref4){var value=_ref4.target.value;return setNewServiceResourceData(_objectSpread(_objectSpread({},newServiceResourceData),{},{slack_member_id:value}));}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Phone:\"}),/*#__PURE__*/_jsx(Checkbox,{disabled:!editing,contents:\"\",value:newServiceResourceData.is_phone,onChange:function onChange(value){return setNewServiceResourceData(_objectSpread(_objectSpread({},newServiceResourceData),{},{is_phone:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Is Slack:\"}),/*#__PURE__*/_jsx(Checkbox,{disabled:!editing,contents:\"\",value:newServiceResourceData.is_slack,onChange:function onChange(value){return setNewServiceResourceData(_objectSpread(_objectSpread({},newServiceResourceData),{},{is_slack:value}));}})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Info\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Date Created:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:serviceResourceData.service_resource.created_at,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Created by:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:serviceResourceData.service_resource.created_by,disabled:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Last Edited:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:serviceResourceData.service_resource.last_edited_at,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Last Edited By:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:serviceResourceData.service_resource.last_edited_by,disabled:true})]})]})]})]}),editing?/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper flex-container sb editing-buttons\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"_red\",onClick:function onClick(){return setDeleting(true);},children:\"Delete Service Resource\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"_bordered _red\",onClick:function onClick(){return setEditing(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{disabled:!readyToSave,className:\"_bordered _green\",children:\"Save\"})]})]}):null,deleting?/*#__PURE__*/_jsx(\"div\",{className:\"item-delete-popup\",onClick:function onClick(){return setDeleting(false);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",onClick:function onClick(e){return e.stopPropagation();},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Delete ServiceResource\"}),/*#__PURE__*/_jsx(\"div\",{className:\"checkbox-wrapper\",children:/*#__PURE__*/_jsx(Checkbox,{contents:\"I understand that after deleting the service resource it will not be possible to recover.\",value:readyToDelete,onChange:function onChange(value){return setReadyToDelete(value);}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"_bordered _green\",onClick:function onClick(){return setDeleting(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{disabled:!readyToDelete,className:\"_bordered _red\",children:\"Delete\"})]})]})}):null]}):null});});export default ServiceResourcesPage_Item;","map":{"version":3,"sources":["/Users/nicole/rrrr/crm/src/pages/ServiceResources/Item.tsx"],"names":["axios","React","useEffect","useState","connect","nError","mapDispatchToProps","mapStateToProps","Select","Checkbox","Switcher","useRoute","ReactInputMask","ServiceResourcesPage_Item","props","$router","readyToSave","setReadyToSave","editing","setEditing","deleting","setDeleting","readyToDelete","setReadyToDelete","serviceResourceData","setServiceResourceData","newServiceResourceData","setNewServiceResourceData","loadInfo","get","data","service_resource","setTimeout","active","name","permissions","edit_service_resource","value","target","user","zIndex","edit","area","map","option","span","time_zone","phone","slack_channel","slack_member_id","is_phone","is_slack","created_at","created_by","last_edited_at","last_edited_by","e","stopPropagation"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Icon from \"../../components/Icon\"\nimport { nError } from \"../../funcs/base\"\nimport { StoreDispatch, StoreState, mapDispatchToProps, mapStateToProps } from \"../../store\";\n\nimport \"../../styles/pages/common/entity-edit.sass\"\nimport Select from \"../../components/Select\"\nimport Checkbox from \"../../components/Checkbox\"\nimport Switcher from \"../../components/Switcher\"\nimport classNames from \"classnames\"\nimport { BaseLink, useRoute } from \"react-router5\"\nimport ReactInputMask from \"react-input-mask\"\nimport ServiceResource from \"../../models/ServiceResource\"\n\ninterface Props {\n  store: StoreState,\n  dispatcher: StoreDispatch\n}\n\ninterface ServiceResourceData {\n  \n  permissions: {\n    \n    edit_service_resource: boolean,\n  },\n\n  service_resource: ServiceResource,\n\n  edit: {\n    time_zone: string[],\n    area: string[]\n  }\n}\n\nconst ServiceResourcesPage_Item = connect(mapStateToProps, mapDispatchToProps)(function(props: Props) {\n\n  const $router = useRoute()\n\n  const [readyToSave, setReadyToSave] = useState(false)\n\n  const [editing, setEditing] = useState(false)\n\n  const [deleting, setDeleting] = useState(false)\n  const [readyToDelete, setReadyToDelete] = useState(false)\n  \n  const [serviceResourceData, setServiceResourceData] = useState<ServiceResourceData | null>(null)\n\n  const [newServiceResourceData, setNewServiceResourceData] = useState<Partial<ServiceResource>>({\n    \n  })\n  \n  // Load info function\n  async function loadInfo() {\n    try {\n      const { data: serviceResourceData } = (await axios.get('/json/service_resource.json')) as {data: ServiceResourceData}\n\n      setServiceResourceData(serviceResourceData)\n\n      setNewServiceResourceData(serviceResourceData.service_resource)\n\n      setTimeout(() => setReadyToSave(false), 100)\n    }\n    catch (error) {\n      nError(error)\n    }\n  }\n\n  // Load service_resource data\n  useEffect(() => {\n    loadInfo()\n  }, [])\n\n  useEffect(() => setReadyToSave(true), [\n    newServiceResourceData\n  ])\n  \n  // Render function\n  return (<>\n    {serviceResourceData && newServiceResourceData.active ? (\n      <div className=\"ServiceResourcesPage_Item entity-edit\">\n\n        <div className=\"wrapper flex-container sb\">\n          <div className=\"flex-container _gap-narrow\">\n            <h1>Service Resource:</h1>\n\n            <div className=\"item-name\">\n              {newServiceResourceData.name}\n            </div>\n          </div>\n\n          {serviceResourceData?.permissions.edit_service_resource && !editing ? (\n            <button className=\"_wa _green\" onClick={() => setEditing(true)}>\n              Edit\n            </button>\n          ) : null}\n        </div>\n        \n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Main</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\">\n                <span>NickName:</span>\n                \n                <input disabled={!editing} type=\"text\" defaultValue={serviceResourceData.service_resource.name} onChange={({target: {value}}) => setNewServiceResourceData({...newServiceResourceData, name: value})} />\n              </div>\n            </div>\n\n            \n            <div className=\"__right\">\n\n              <div className=\"field\">\n                <span>Active:</span>\n                \n                <Switcher disabled={!editing} checked={newServiceResourceData.active as boolean} onChange={(value) => setNewServiceResourceData({...newServiceResourceData, active: value})} />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"legend\">Settings</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n\n              <div className=\"field\">\n                <span>User:</span>\n\n                <input disabled={true} type=\"text\" defaultValue={serviceResourceData.service_resource.user} />\n              </div>\n\n              <div className=\"field\" style={{zIndex: 5}}>\n                <span>Area:</span>\n                <Select disabled={!editing} options={serviceResourceData.edit.area.map((option) => ({\n                  span: option,\n                  value: option\n                }))} selectedOption={newServiceResourceData.area as string} onChange={(value: string) => setNewServiceResourceData({...newServiceResourceData, area: value})}/>\n              </div>\n            </div>\n\n            <div className=\"__right\">\n\n              <div className=\"field\">\n                <span>Time Zone:</span>\n                <Select disabled={!editing} options={serviceResourceData.edit.time_zone.map((option) => ({\n                  span: option,\n                  value: option\n                }))} selectedOption={newServiceResourceData.time_zone as string} onChange={(value: string) => setNewServiceResourceData({...newServiceResourceData, time_zone: value})}/>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n\n          <div className=\"legend\">Notifications</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n\n              <div className=\"field\">\n                <span>Phone:</span>\n                <ReactInputMask disabled={!editing} type=\"text\" mask=\"+1 (999) 999-9999\" defaultValue={newServiceResourceData.phone} onChange={({target: {value}}) => setNewServiceResourceData({...newServiceResourceData, phone: value})} />\n              </div>\n\n              <div className=\"field\">\n                <span>Slack Channel:</span>\n\n                <input disabled={!editing} type=\"text\" defaultValue={serviceResourceData.service_resource.slack_channel} onChange={({target: {value}}) => setNewServiceResourceData({...newServiceResourceData, slack_channel: value})} />\n              </div>\n\n              <div className=\"field\">\n                <span>Slack Member ID:</span>\n\n                <input disabled={!editing} type=\"text\" defaultValue={serviceResourceData.service_resource.slack_member_id} onChange={({target: {value}}) => setNewServiceResourceData({...newServiceResourceData, slack_member_id: value})} />\n              </div>\n\n            </div>\n\n            <div className=\"__right\">\n\n              <div className=\"field\">\n                <span>Phone:</span>\n\n                <Checkbox disabled={!editing} contents='' value={newServiceResourceData.is_phone} onChange={(value) => setNewServiceResourceData({...newServiceResourceData, is_phone: value})} />\n              </div>\n\n              <div className=\"field\">\n                <span>Is Slack:</span>\n\n                <Checkbox disabled={!editing} contents='' value={newServiceResourceData.is_slack} onChange={(value) => setNewServiceResourceData({...newServiceResourceData, is_slack: value})} />\n              </div>\n\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Info</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\">\n                <span>Date Created:</span>\n                <input type=\"text\" defaultValue={serviceResourceData.service_resource.created_at} disabled={ true } />\n              </div>\n\n              <div className=\"field\">\n                <span>Created by:</span>\n                <input type=\"text\" defaultValue={serviceResourceData.service_resource.created_by} disabled={ true } />\n              </div>\n            </div>\n\n            \n            <div className=\"__right\">\n\n              <div className=\"field\">\n                <span>Last Edited:</span>\n                <input type=\"text\" defaultValue={serviceResourceData.service_resource.last_edited_at} disabled={ true } />\n              </div>\n\n              <div className=\"field\">\n                <span>Last Edited By:</span>\n                <input type=\"text\" defaultValue={serviceResourceData.service_resource.last_edited_by} disabled={ true } />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {editing ? (\n          <div className=\"wrapper flex-container sb editing-buttons\">\n            <div>\n              <button className=\"_red\" onClick={() => setDeleting(true)}>Delete Service Resource</button>\n            </div>\n            <div className=\"buttons\">\n              <button className=\"_bordered _red\" onClick={() => setEditing(false)}>\n                Cancel\n              </button>\n              <button disabled={!readyToSave} className=\"_bordered _green\">\n                Save\n              </button>\n            </div>\n          </div>\n        ) : null}\n\n        {/* Item share popup */}\n        {deleting ? (\n          <div className=\"item-delete-popup\" onClick={() => setDeleting(false)}>\n\n            <div className=\"wrapper\" onClick={(e) => e.stopPropagation()}>\n            \n              <div className=\"title\">\n                Delete ServiceResource\n              </div>\n\n              <div className=\"checkbox-wrapper\">\n                <Checkbox contents=\"I understand that after deleting the service resource it will not be possible to recover.\" value={readyToDelete} onChange={(value) => setReadyToDelete(value)} />\n              </div>\n\n              <div className=\"buttons\">\n\n                <button className=\"_bordered _green\" onClick={() => setDeleting(false)}>\n                  Cancel\n                </button>\n\n                <button disabled={!readyToDelete} className=\"_bordered _red\">\n                  Delete\n                </button>\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    ) : null}\n  </>)\n})\nexport default ServiceResourcesPage_Item\n"]},"metadata":{},"sourceType":"module"}