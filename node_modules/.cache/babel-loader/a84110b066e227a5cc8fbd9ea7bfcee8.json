{"ast":null,"code":"import _objectSpread from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import Icon from\"../../components/Icon\";import{nError}from\"../../funcs\";import{mapDispatchToProps,mapStateToProps}from\"../../store\";import\"../../styles/pages/common/entity-edit.sass\";import Select from\"../../components/Select\";import Checkbox from\"../../components/Checkbox\";import{useRoute}from\"react-router5\";import Switcher from\"../../components/Switcher\";import ReactCrop from\"react-image-crop\";import ReactInputMask from\"react-input-mask\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AccountsPage_New=connect(mapStateToProps,mapDispatchToProps)(function(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),readyToSave=_useState2[0],setReadyToSave=_useState2[1];var $router=useRoute();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),avatarPopup=_useState4[0],setAvatarPopup=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),avatarImageSrc=_useState6[0],setAvatarImageSrc=_useState6[1];var _useState7=useState({unit:'%',width:30,aspect:1}),_useState8=_slicedToArray(_useState7,2),avatarCrop=_useState8[0],setAvatarCrop=_useState8[1];var _useState9=useState({twilio_account_sid:'password',twilio_call_token:'password',twilio_token:'password'}),_useState10=_slicedToArray(_useState9,2),inputTypes=_useState10[0],setInputTypes=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),editions=_useState12[0],setEditions=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),newAccountData=_useState14[0],setNewAccountData=_useState14[1];// Load info function\nfunction loadInfo(){return _loadInfo.apply(this,arguments);}// Load account data\nfunction _loadInfo(){_loadInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,accountsData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/json/accounts.json');case 3:_yield$axios$get=_context.sent;accountsData=_yield$axios$get.data;setEditions(accountsData.edit);setNewAccountData({name:'',owner:'',phone:'',status:'',email:'',source:'',users:'',phone_numbers:'',twilio_account_sid:'',twilio_call_token:'',twilio_token:'',slack_url:'',slack_active:true,mailing_street:'',mailing_unit:'',mailing_city:'',mailing_zip:'',mailing_state:accountsData.edit.state[0],billing_street:'',billing_unit:'',billing_city:'',billing_zip:'',billing_state:accountsData.edit.state[0]});setTimeout(function(){return setReadyToSave(false);},100);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);nError(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return _loadInfo.apply(this,arguments);}useEffect(function(){loadInfo();},[]);// On select file function\nfunction onSelectFile(e){if(e.target.files&&e.target.files.length>0){var reader=new FileReader();reader.addEventListener('load',function(){return setAvatarImageSrc(reader.result);});reader.readAsDataURL(e.target.files[0]);}}useEffect(function(){return setReadyToSave(true);},[newAccountData]);// Render function\nreturn/*#__PURE__*/_jsx(_Fragment,{children:editions?/*#__PURE__*/_jsxs(\"div\",{className:\"AccountsPage_New entity-edit\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"wrapper flex-container sb\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"New account\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Main\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newAccountData.name,onChange:function onChange(_ref){var value=_ref.target.value;return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{name:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Owner:\"}),/*#__PURE__*/_jsx(Select,{options:editions.owners.map(function(owner){return{span:owner.user,value:owner.user_id};}),selectedOption:newAccountData.owner,onChange:function onChange(value){return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{owner:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Phone:\"}),/*#__PURE__*/_jsx(ReactInputMask,{type:\"text\",mask:\"+1 (999) 999-9999\",defaultValue:newAccountData.phone,onChange:function onChange(_ref2){var value=_ref2.target.value;return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{phone:value}));}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",style:{zIndex:5},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Status:\"}),/*#__PURE__*/_jsx(Select,{options:editions.status.map(function(status){return{span:status,value:status};}),selectedOption:newAccountData.status,onChange:function onChange(value){return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{status:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newAccountData.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Source:\"}),/*#__PURE__*/_jsx(Select,{options:editions.source.map(function(source){return{span:source,value:source};}),selectedOption:newAccountData.source,onChange:function onChange(value){return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{source:value}));}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"avatar-editing\",children:/*#__PURE__*/_jsx(\"button\",{className:\"_zeroed _iconed\",onClick:function onClick(){return setAvatarPopup(true);},children:/*#__PURE__*/_jsx(Icon,{icon:\"user-20\"})})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Twilio\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Account SID:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field _iconed\",children:[/*#__PURE__*/_jsx(\"input\",{type:inputTypes.twilio_account_sid,readOnly:inputTypes.twilio_account_sid!=='text',defaultValue:newAccountData.twilio_account_sid,onChange:function onChange(_ref3){var value=_ref3.target.value;return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{twilio_account_sid:value}));}}),/*#__PURE__*/_jsx(\"button\",{className:\"_zeroed _iconed\",onClick:function onClick(){return setInputTypes(_objectSpread(_objectSpread({},inputTypes),{},{twilio_account_sid:inputTypes.twilio_account_sid==='text'?'password':'text'}));},children:/*#__PURE__*/_jsx(Icon,{icon:\"eye-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Call Token:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field _iconed\",children:[/*#__PURE__*/_jsx(\"input\",{type:inputTypes.twilio_call_token,readOnly:inputTypes.twilio_call_token!=='text',defaultValue:newAccountData.twilio_call_token,onChange:function onChange(_ref4){var value=_ref4.target.value;return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{twilio_call_token:value}));}}),/*#__PURE__*/_jsx(\"button\",{className:\"_zeroed _iconed\",onClick:function onClick(){return setInputTypes(_objectSpread(_objectSpread({},inputTypes),{},{twilio_call_token:inputTypes.twilio_call_token==='text'?'password':'text'}));},children:/*#__PURE__*/_jsx(Icon,{icon:\"eye-4\"})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"__right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Token:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field _iconed\",children:[/*#__PURE__*/_jsx(\"input\",{type:inputTypes.twilio_token,readOnly:inputTypes.twilio_token!=='text',defaultValue:newAccountData.twilio_token,onChange:function onChange(_ref5){var value=_ref5.target.value;return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{twilio_token:value}));}}),/*#__PURE__*/_jsx(\"button\",{className:\"_zeroed _iconed\",onClick:function onClick(){return setInputTypes(_objectSpread(_objectSpread({},inputTypes),{},{twilio_token:inputTypes.twilio_token==='text'?'password':'text'}));},children:/*#__PURE__*/_jsx(Icon,{icon:\"eye-4\"})})]})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Permission:\"}),/*#__PURE__*/_jsx(Select,{options:editions.permissions.map(function(permission){return{span:permission,value:permission};}),selectedOption:newAccountData.permission,onChange:function onChange(value){return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{permission:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Slack Url:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newAccountData.slack_url,onChange:function onChange(_ref6){var value=_ref6.target.value;return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{slack_url:value}));}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Time Zone:\"}),/*#__PURE__*/_jsx(Select,{options:editions.time_zone.map(function(time_zone){return{span:time_zone,value:time_zone};}),selectedOption:newAccountData.time_zone,onChange:function onChange(value){return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{time_zone:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Slack:\"}),/*#__PURE__*/_jsx(Switcher,{checked:newAccountData.slack_active,onChange:function onChange(value){return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{slack_active:value}));}})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Mailing Address\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Street:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newAccountData.mailing_street,onChange:function onChange(_ref7){var value=_ref7.target.value;return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{mailing_street:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Unit/Apt:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newAccountData.mailing_unit,onChange:function onChange(_ref8){var value=_ref8.target.value;return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{mailing_unit:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"City:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newAccountData.mailing_city,onChange:function onChange(_ref9){var value=_ref9.target.value;return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{mailing_city:value}));}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"State:\"}),/*#__PURE__*/_jsx(Select,{options:editions.state.map(function(option){return{span:option,value:option};}),selectedOption:newAccountData.mailing_state,onChange:function onChange(value){return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{mailing_state:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Zip:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newAccountData.mailing_zip,onChange:function onChange(_ref10){var value=_ref10.target.value;return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{mailing_zip:value}));}})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fieldset\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container sb wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend\",children:\"Billing Address\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-action-wrapper\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Same as Mailing Address:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-wrapper\",children:/*#__PURE__*/_jsx(Checkbox,{contents:\"\",value:newAccountData.same_address,onChange:function onChange(value){return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{same_address:value}));}})})]})]}),!newAccountData.same_address?/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Street:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newAccountData.billing_street,onChange:function onChange(_ref11){var value=_ref11.target.value;return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{billing_street:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Unit/Apt:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newAccountData.billing_unit,onChange:function onChange(_ref12){var value=_ref12.target.value;return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{billing_unit:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"City:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newAccountData.billing_city,onChange:function onChange(_ref13){var value=_ref13.target.value;return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{billing_city:value}));}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"__right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"State:\"}),/*#__PURE__*/_jsx(Select,{options:editions.state.map(function(option){return{span:option,value:option};}),selectedOption:newAccountData.billing_state,onChange:function onChange(value){return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{billing_state:value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Zip:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:newAccountData.billing_zip,onChange:function onChange(_ref14){var value=_ref14.target.value;return setNewAccountData(_objectSpread(_objectSpread({},newAccountData),{},{billing_zip:value}));}})]})]})]}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper flex-container sb editing-buttons\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"_bordered _red\",onClick:function onClick(){return $router.router.navigate('accounts',{},{reload:true});},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{disabled:!readyToSave,className:\"_bordered _green\",children:\"Save\"})]})]}),avatarPopup?/*#__PURE__*/_jsx(\"div\",{className:\"popup imageCrop\",onClick:function onClick(){return setAvatarPopup(false);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",onClick:function onClick(e){return e.stopPropagation();},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:onSelectFile,id:\"file-uploader\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"_wa _iconed _bordered _blue\",onClick:function onClick(){var _document$getElementB;return(_document$getElementB=document.getElementById('file-uploader'))===null||_document$getElementB===void 0?void 0:_document$getElementB.click();},children:[/*#__PURE__*/_jsx(Icon,{icon:\"account-33\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Upload a File\"})]})]}),/*#__PURE__*/_jsx(\"div\",{children:avatarImageSrc&&/*#__PURE__*/_jsx(ReactCrop,{src:avatarImageSrc,crop:avatarCrop,onChange:function onChange(value){return setAvatarCrop(value);}})})]})}):null]}):null});});export default AccountsPage_New;","map":{"version":3,"sources":["/Users/nicole/rrrr/crm/src/pages/Accounts/New.tsx"],"names":["axios","React","useEffect","useState","connect","Icon","nError","mapDispatchToProps","mapStateToProps","Select","Checkbox","useRoute","Switcher","ReactCrop","ReactInputMask","AccountsPage_New","props","readyToSave","setReadyToSave","$router","avatarPopup","setAvatarPopup","avatarImageSrc","setAvatarImageSrc","unit","width","aspect","avatarCrop","setAvatarCrop","twilio_account_sid","twilio_call_token","twilio_token","inputTypes","setInputTypes","editions","setEditions","newAccountData","setNewAccountData","loadInfo","get","accountsData","data","edit","name","owner","phone","status","email","source","users","phone_numbers","slack_url","slack_active","mailing_street","mailing_unit","mailing_city","mailing_zip","mailing_state","state","billing_street","billing_unit","billing_city","billing_zip","billing_state","setTimeout","onSelectFile","e","target","files","length","reader","FileReader","addEventListener","result","readAsDataURL","value","owners","map","span","user","user_id","zIndex","permissions","permission","time_zone","option","same_address","router","navigate","reload","stopPropagation","document","getElementById","click"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport Icon from \"../../components/Icon\"\nimport { nError } from \"../../funcs\"\nimport Account from \"../../models/Account\"\nimport { StoreDispatch, StoreState, mapDispatchToProps, mapStateToProps } from \"../../store\";\nimport Datetime from 'react-datetime'\n\nimport \"../../styles/pages/common/entity-edit.sass\"\nimport moment from \"moment\"\nimport Select from \"../../components/Select\"\nimport Checkbox from \"../../components/Checkbox\"\nimport { useRoute } from \"react-router5\"\nimport Switcher from \"../../components/Switcher\"\nimport ReactCrop, { Crop } from \"react-image-crop\"\nimport AccountCustom from \"../../models/AccountCustom\"\nimport ReactInputMask from \"react-input-mask\"\n\ninterface Props {\n  store: StoreState,\n  dispatcher: StoreDispatch\n}\n\nconst AccountsPage_New = connect(mapStateToProps, mapDispatchToProps)(function(props: Props) {\n\n  const [readyToSave, setReadyToSave] = useState(false)\n\n  const $router = useRoute()\n\n  const [avatarPopup, setAvatarPopup] = useState(false)\n  const [avatarImageSrc, setAvatarImageSrc] = useState('')\n  const [avatarCrop, setAvatarCrop] = useState<Partial<Crop>>({\n    unit: '%',\n    width: 30,\n    aspect: 1\n  })\n\n  const [inputTypes, setInputTypes] = useState({\n\n    twilio_account_sid: 'password' as 'text' | 'password',\n    twilio_call_token: 'password' as 'text' | 'password',\n    twilio_token: 'password' as 'text' | 'password',\n  })\n\n  const [editions, setEditions] = useState<{\n    time_zone: string[],\n    source: string[],\n    status: string[],\n    owners: {\n      user: string,\n      user_id: string\n    }[],\n    permissions: string[],\n    state: string[]\n  } | null>(null)\n\n  const [newAccountData, setNewAccountData] = useState<Partial<AccountCustom>>({\n    \n  })\n  \n  // Load info function\n  async function loadInfo() {\n    try {\n      const { data: accountsData } = (await axios.get('/json/accounts.json'))\n\n      setEditions(accountsData.edit)\n      setNewAccountData({\n        name: '',\n        owner: '',\n        phone: '',\n        status: '',\n        email: '',\n        source: '',\n        users: '',\n        phone_numbers: '',\n        twilio_account_sid: '',\n        twilio_call_token: '',\n        twilio_token: '',\n        slack_url: '',\n        slack_active: true,\n        mailing_street: '',\n        mailing_unit: '',\n        mailing_city: '',\n        mailing_zip: '',\n        mailing_state: accountsData.edit.state[0],\n        billing_street: '',\n        billing_unit: '',\n        billing_city: '',\n        billing_zip: '',\n        billing_state: accountsData.edit.state[0],\n      })\n\n      setTimeout(() => setReadyToSave(false), 100)\n    }\n    catch (error) {\n      nError(error)\n    }\n  }\n\n  // Load account data\n  useEffect(() => {\n    loadInfo()\n  }, [])\n\n  // On select file function\n  function onSelectFile(e: any) {\n    if (e.target.files && e.target.files.length > 0) {\n      const reader = new FileReader();\n      reader.addEventListener('load', () =>\n        setAvatarImageSrc(reader.result as string)\n      );\n      reader.readAsDataURL(e.target.files[0]);\n    }\n  }\n\n  useEffect(() => setReadyToSave(true), [\n    newAccountData\n  ])\n  \n  // Render function\n  return (<>\n    {editions ? (\n      <div className=\"AccountsPage_New entity-edit\">\n\n        <div className=\"wrapper flex-container sb\">\n          <h1>New account</h1>\n        </div>\n        \n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Main</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\">\n                <span>Name:</span>\n                <input type=\"text\" defaultValue={newAccountData.name} onChange={({target: {value}}) => setNewAccountData({...newAccountData, name: value})} />\n              </div>\n\n              <div className=\"field\">\n                <span>Owner:</span>\n                <Select options={editions.owners.map((owner) => ({\n                  span: owner.user,\n                  value: owner.user_id\n                }))} selectedOption={newAccountData.owner as string} onChange={(value: string) => setNewAccountData({...newAccountData, owner: value})}/>\n              </div>\n\n              <div className=\"field\">\n                <span>Phone:</span>\n                <ReactInputMask type=\"text\" mask=\"+1 (999) 999-9999\" defaultValue={newAccountData.phone} onChange={({target: {value}}) => setNewAccountData({...newAccountData, phone: value})} />\n              </div>\n            </div>\n\n            <div className=\"__right\">\n              <div className=\"field\" style={{zIndex: 5}}>\n                <span>Status:</span>\n                <Select options={editions.status.map((status) => ({\n                  span: status,\n                  value: status\n                }))} selectedOption={newAccountData.status as string} onChange={(value: string) => setNewAccountData({...newAccountData, status: value})}/>\n              </div>\n\n              <div className=\"field\">\n                <span>Email:</span>\n                <input type=\"text\" defaultValue={newAccountData.email} />\n              </div>\n\n              <div className=\"field\">\n                <span>Source:</span>\n                <Select options={editions.source.map((source) => ({\n                  span: source,\n                  value: source\n                }))} selectedOption={newAccountData.source as string} onChange={(value: string) => setNewAccountData({...newAccountData, source: value})}/>\n              </div>\n            </div>\n\n            <div className=\"avatar-editing\">\n              <button className=\"_zeroed _iconed\" onClick={() => setAvatarPopup(true)}>\n                <Icon icon=\"user-20\" />\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Twilio</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\">\n                <span>Account SID:</span>\n                <div className=\"form-field _iconed\">\n                  <input type={inputTypes.twilio_account_sid} readOnly={inputTypes.twilio_account_sid !== 'text'} defaultValue={newAccountData.twilio_account_sid} onChange={({target: {value}}) => setNewAccountData({...newAccountData, twilio_account_sid: value})} />\n                  <button className=\"_zeroed _iconed\" onClick={() => setInputTypes({...inputTypes, twilio_account_sid: inputTypes.twilio_account_sid === 'text' ? 'password' : 'text'})}>\n                    <Icon icon=\"eye-4\"/>\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"field\">\n                <span>Call Token:</span>\n                <div className=\"form-field _iconed\">\n                  <input type={inputTypes.twilio_call_token} readOnly={inputTypes.twilio_call_token !== 'text'} defaultValue={newAccountData.twilio_call_token} onChange={({target: {value}}) => setNewAccountData({...newAccountData, twilio_call_token: value})} />\n                  <button className=\"_zeroed _iconed\" onClick={() => setInputTypes({...inputTypes, twilio_call_token: inputTypes.twilio_call_token === 'text' ? 'password' : 'text'})}>\n                    <Icon icon=\"eye-4\"/>\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            \n            <div className=\"__right\">\n\n              <div className=\"field\">\n                <span>Token:</span>\n                <div className=\"form-field _iconed\">\n                  <input type={inputTypes.twilio_token} readOnly={inputTypes.twilio_token !== 'text'} defaultValue={newAccountData.twilio_token} onChange={({target: {value}}) => setNewAccountData({...newAccountData, twilio_token: value})} />\n                  <button className=\"_zeroed _iconed\" onClick={() => setInputTypes({...inputTypes, twilio_token: inputTypes.twilio_token === 'text' ? 'password' : 'text'})}>\n                    <Icon icon=\"eye-4\"/>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Settings</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n\n              <div className=\"field\">\n                <span>Permission:</span>\n                <Select options={editions.permissions.map((permission) => ({\n                  span: permission,\n                  value: permission\n                }))} selectedOption={newAccountData.permission as string} onChange={(value: string) => setNewAccountData({...newAccountData, permission: value})}/>\n              </div>\n              \n              <div className=\"field\">\n                <span>Slack Url:</span>\n                <input type=\"text\" defaultValue={newAccountData.slack_url} onChange={({target: {value}}) => setNewAccountData({...newAccountData, slack_url: value})} />\n              </div>\n            </div>\n\n            <div className=\"__right\">\n\n              <div className=\"field\">\n                <span>Time Zone:</span>\n                <Select options={editions.time_zone.map((time_zone) => ({\n                  span: time_zone,\n                  value: time_zone\n                }))} selectedOption={newAccountData.time_zone as string} onChange={(value: string) => setNewAccountData({...newAccountData, time_zone: value})}/>\n              </div>\n              \n              <div className=\"field\">\n                <span>Slack:</span>\n                <Switcher checked={newAccountData.slack_active} onChange={(value) => setNewAccountData({...newAccountData, slack_active: value})} />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n          \n          <div className=\"legend\">Mailing Address</div>\n\n          <div className=\"fields\">\n\n            <div className=\"__left\">\n              <div className=\"field\">\n                <span>Street:</span>\n                <input type=\"text\" defaultValue={newAccountData.mailing_street} onChange={({target: {value}}) => setNewAccountData({...newAccountData, mailing_street: value})} />\n              </div>\n\n              <div className=\"field\">\n                <span>Unit/Apt:</span>\n                <input type=\"text\" defaultValue={newAccountData.mailing_unit} onChange={({target: {value}}) => setNewAccountData({...newAccountData, mailing_unit: value})} />\n              </div>\n\n              <div className=\"field\">\n                <span>City:</span>\n                <input type=\"text\" defaultValue={newAccountData.mailing_city} onChange={({target: {value}}) => setNewAccountData({...newAccountData, mailing_city: value})} />\n              </div>\n            </div>\n\n            <div className=\"__right\">\n              <div className=\"field\">\n                <span>State:</span>\n                <Select options={editions.state.map((option) => ({\n                  span: option,\n                  value: option\n                }))} selectedOption={newAccountData.mailing_state as string} onChange={(value: string) => setNewAccountData({...newAccountData, mailing_state: value})}/>\n              </div>\n\n              <div className=\"field\">\n                <span>Zip:</span>\n                <input type=\"text\" defaultValue={newAccountData.mailing_zip} onChange={({target: {value}}) => setNewAccountData({...newAccountData, mailing_zip: value})} />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fieldset\">\n          \n          <div className=\"flex-container sb wrap\">\n            <div className=\"legend\">Billing Address</div>\n\n            <div className=\"legend-action-wrapper\">\n              <label>Same as Mailing Address:</label>\n\n              <div className=\"input-wrapper\">\n                <Checkbox contents='' value={newAccountData.same_address} onChange={(value) => setNewAccountData({...newAccountData, same_address: value})} />\n              </div>\n            </div>\n          </div>\n\n          {!newAccountData.same_address ? (\n            <div className=\"fields\">\n\n              <div className=\"__left\">\n                <div className=\"field\">\n                  <span>Street:</span>\n                  <input type=\"text\" defaultValue={newAccountData.billing_street} onChange={({target: {value}}) => setNewAccountData({...newAccountData, billing_street: value})} />\n                </div>\n\n                <div className=\"field\">\n                  <span>Unit/Apt:</span>\n                  <input type=\"text\" defaultValue={newAccountData.billing_unit} onChange={({target: {value}}) => setNewAccountData({...newAccountData, billing_unit: value})} />\n                </div>\n\n                <div className=\"field\">\n                  <span>City:</span>\n                  <input type=\"text\" defaultValue={newAccountData.billing_city} onChange={({target: {value}}) => setNewAccountData({...newAccountData, billing_city: value})} />\n                </div>\n              </div>\n\n              <div className=\"__right\">\n                <div className=\"field\">\n                  <span>State:</span>\n                  <Select options={editions.state.map((option) => ({\n                    span: option,\n                    value: option\n                  }))} selectedOption={newAccountData.billing_state as string} onChange={(value: string) => setNewAccountData({...newAccountData, billing_state: value})}/>\n                </div>\n\n                <div className=\"field\">\n                  <span>Zip:</span>\n                  <input type=\"text\" defaultValue={newAccountData.billing_zip} onChange={({target: {value}}) => setNewAccountData({...newAccountData, billing_zip: value})} />\n                </div>\n              </div>\n            </div>\n          ) : null}\n        </div>\n\n        <div className=\"wrapper flex-container sb editing-buttons\">\n          <div />\n          <div className=\"buttons\">\n            <button className=\"_bordered _red\" onClick={() => $router.router.navigate('accounts', {}, {\n              reload: true\n            })}>\n              Cancel\n            </button>\n            <button disabled={!readyToSave} className=\"_bordered _green\">\n              Save\n            </button>\n          </div>\n        </div>\n\n        {avatarPopup ? (\n          <div className=\"popup imageCrop\" onClick={() => setAvatarPopup(false)}>\n\n            <div className=\"wrapper\" onClick={(e) => e.stopPropagation()}>\n              \n              <div>\n                <input type=\"file\" accept=\"image/*\" onChange={onSelectFile} id=\"file-uploader\" />\n                <button className=\"_wa _iconed _bordered _blue\" onClick={() => document.getElementById('file-uploader')?.click()}>\n                  <Icon icon=\"account-33\" />\n                  <span>Upload a File</span>\n                </button>\n              </div>\n\n              <div>\n                {avatarImageSrc && (\n                  <ReactCrop\n                    src={avatarImageSrc}\n                    crop={avatarCrop}\n                    onChange={(value) => setAvatarCrop(value)}\n                  />\n                )}\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    ) : null}\n  </>)\n})\nexport default AccountsPage_New\n"]},"metadata":{},"sourceType":"module"}