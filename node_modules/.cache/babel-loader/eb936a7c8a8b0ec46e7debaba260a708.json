{"ast":null,"code":"import _objectSpread from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/nicole/rrrr/crm/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";import classNames from\"classnames\";import{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{useRoute}from\"react-router5\";import Icon from\"../../components/Icon\";import ReportFilters from\"../../components/reports/Filters\";import ReportTableControls from\"../../components/reports/TableControls\";import ReportTableField from\"../../components/reports/TableField\";import{nError}from\"../../funcs\";import{mapDispatchToProps,mapStateToProps}from\"../../store\";import\"../../styles/pages/common/report-list.sass\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AccountPermissionsPage_List=connect(mapStateToProps,mapDispatchToProps)(function(props){var $router=useRoute();var _useState=useState(Math.random()),_useState2=_slicedToArray(_useState,2),$updater=_useState2[0],$setUpdater=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),reportData=_useState4[0],setReportData=_useState4[1];var _useState5=useState({search:'',page:1,sort:{field:'name',direction:'up'},sortFields:[{span:'Name',value:'name'},{span:'Users',value:'users'}]}),_useState6=_slicedToArray(_useState5,2),localInterface=_useState6[0],setLocalInterface=_useState6[1];// Load accountPermissions function\nfunction loadAccountPermissions(){return _loadAccountPermissions.apply(this,arguments);}// Load accountPermissions on page mount\nfunction _loadAccountPermissions(){_loadAccountPermissions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _ref,accountPermissions;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/json/account_permissions.json');case 3:_ref=_context.sent;accountPermissions=_ref.data;setReportData(accountPermissions);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);nError(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return _loadAccountPermissions.apply(this,arguments);}useEffect(function(){loadAccountPermissions();},[$updater,localInterface.page]);// Render function\nreturn/*#__PURE__*/_jsx(_Fragment,{children:reportData?/*#__PURE__*/_jsxs(\"div\",{className:\"AccountPermissionsPage_List\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Account`s Permissions\"})}),/*#__PURE__*/_jsx(ReportFilters,{onSearchInputChange:function onSearchInputChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{search:value}));},onUpdate:function onUpdate(){return 2;}}),/*#__PURE__*/_jsx(ReportTableControls,{zIndex:5,onMaxRowsChange:function onMaxRowsChange(){return $setUpdater(Math.random());},amount:{total:reportData.interface.rows_all,start:reportData.interface.rows_start,end:reportData.interface.rows_end},page:localInterface.page,maxPages:reportData.interface.max_pages,onPagesStart:function onPagesStart(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:1}));},onPrevPage:function onPrevPage(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:localInterface.page-1}));},onNextPage:function onNextPage(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:localInterface.page+1}));},onPagesEnd:function onPagesEnd(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:reportData.interface.max_pages}));},sort:localInterface.sort,sortFields:localInterface.sortFields,onSortFieldChange:function onSortFieldChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:_objectSpread(_objectSpread({},localInterface.sort),{},{field:value})}));},onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:_objectSpread(_objectSpread({},localInterface.sort),{},{direction:value})}));},onSortFire:function onSortFire(){return 0;},addButton:/*#__PURE__*/_jsx(\"div\",{className:\"add-button-wrapper\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"_iconed _rounded add-button\",onClick:function onClick(){return $router.router.navigate('accounts_permissions.new');},children:[/*#__PURE__*/_jsx(Icon,{icon:\"plus-thin\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Add Account`s Permission\"}),/*#__PURE__*/_jsx(Icon,{icon:\"shield-28\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"contents\",children:[/*#__PURE__*/_jsxs(\"table\",{className:classNames('table','__show-on-wide',{__respectAsidePanel:props.store.navActive.is}),children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(ReportTableField,{contents:/*#__PURE__*/_jsx(\"span\",{children:\"Name\"}),sortDirection:localInterface.sort.field==='name'?localInterface.sort.direction:undefined,onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:{field:'name',direction:value}}));},onFilterFire:function onFilterFire(){return $setUpdater(Math.random());}}),/*#__PURE__*/_jsx(ReportTableField,{contents:/*#__PURE__*/_jsx(\"span\",{children:\"Accounts\"}),sortDirection:localInterface.sort.field==='accounts'?localInterface.sort.direction:undefined,onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:{field:'accounts',direction:value}}));},onFilterFire:function onFilterFire(){return $setUpdater(Math.random());}})]}),reportData.permissions_rows.map(function(accountPermission,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return $router.router.navigate('accounts_permissions.item',{permissionId:accountPermission.account_permission_id},{reload:true});},children:[/*#__PURE__*/_jsx(\"td\",{children:accountPermission.name}),/*#__PURE__*/_jsx(\"td\",{children:accountPermission.accounts})]},i);})]}),/*#__PURE__*/_jsxs(\"table\",{className:classNames('table','__hide-on-wide','__hide-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Accounts\"})]}),reportData.permissions_rows.map(function(accountPermission,i){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return $router.router.navigate('accounts_permissions.item',{permissionId:accountPermission.account_permission_id},{reload:true});},children:[/*#__PURE__*/_jsx(\"td\",{children:accountPermission.name}),/*#__PURE__*/_jsx(\"td\",{children:accountPermission.accounts})]},i);})]}),/*#__PURE__*/_jsx(\"div\",{className:classNames('mobile-table-items','__show-on-mobile',{__respectAsidePanel:props.store.navActive.is}),children:reportData.permissions_rows.map(function(accountPermission,i){return/*#__PURE__*/_jsx(\"div\",{className:\"item\",onClick:function onClick(){return $router.router.navigate('accounts_permissions.item',{permissionId:accountPermission.account_permission_id},{reload:true});},children:/*#__PURE__*/_jsx(\"div\",{className:\"__top\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"__left\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"b\",{children:accountPermission.name})}),/*#__PURE__*/_jsx(\"div\",{children:accountPermission.accounts||/*#__PURE__*/_jsx(\"span\",{children:\"\\xA0\"})})]})})},i);})})]}),/*#__PURE__*/_jsx(ReportTableControls,{isUnder:true,onMaxRowsChange:function onMaxRowsChange(){return $setUpdater(Math.random());},amount:{total:reportData.interface.rows_all,start:reportData.interface.rows_start,end:reportData.interface.rows_end},page:localInterface.page,maxPages:reportData.interface.max_pages,onPagesStart:function onPagesStart(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:1}));},onPrevPage:function onPrevPage(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:localInterface.page-1}));},onNextPage:function onNextPage(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:localInterface.page+1}));},onPagesEnd:function onPagesEnd(){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{page:reportData.interface.max_pages}));},sort:localInterface.sort,sortFields:localInterface.sortFields,onSortFieldChange:function onSortFieldChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:_objectSpread(_objectSpread({},localInterface.sort),{},{field:value})}));},onSortDirectionChange:function onSortDirectionChange(value){return setLocalInterface(_objectSpread(_objectSpread({},localInterface),{},{sort:_objectSpread(_objectSpread({},localInterface.sort),{},{direction:value})}));},onSortFire:function onSortFire(){return 0;}})]}):null});});export default AccountPermissionsPage_List;","map":{"version":3,"sources":["/Users/nicole/rrrr/crm/src/pages/AccountPermissions/List.tsx"],"names":["axios","classNames","useEffect","useState","connect","useRoute","Icon","ReportFilters","ReportTableControls","ReportTableField","nError","mapDispatchToProps","mapStateToProps","AccountPermissionsPage_List","props","$router","Math","random","$updater","$setUpdater","reportData","setReportData","search","page","sort","field","direction","sortFields","span","value","localInterface","setLocalInterface","loadAccountPermissions","get","accountPermissions","data","total","interface","rows_all","start","rows_start","end","rows_end","max_pages","router","navigate","__respectAsidePanel","store","navActive","is","undefined","permissions_rows","map","accountPermission","i","permissionId","account_permission_id","reload","name","accounts"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport classNames from \"classnames\"\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useRoute } from \"react-router5\"\nimport Icon from \"../../components/Icon\"\nimport ReportFilters from \"../../components/reports/Filters\"\nimport ReportTableControls from \"../../components/reports/TableControls\"\nimport ReportTableField from \"../../components/reports/TableField\"\nimport { nError } from \"../../funcs\"\nimport AccountPermission from \"../../models/AccountPermission\"\nimport { StoreDispatch, StoreState, mapDispatchToProps, mapStateToProps } from \"../../store\";\n\nimport \"../../styles/pages/common/report-list.sass\"\n\ninterface Props {\n  store: StoreState,\n  dispatcher: StoreDispatch\n}\n\ninterface AccountPermissionsReport {\n\n  interface: {\n\n    max_pages: number,\n    rows_start: number,\n    rows_end: number,\n    rows_all: number,\n  },\n\n  accountPermissions: {\n    show_account_permission: boolean,\n    add_account_permission: boolean\n  },\n\n  permissions_rows: AccountPermission[],\n\n  edit: {\n    actions: string[]\n  }\n}\n\nconst AccountPermissionsPage_List = connect(mapStateToProps, mapDispatchToProps)(function(props: Props) {\n\n  const $router = useRoute()\n\n  const [$updater, $setUpdater] = useState<any>(Math.random())\n\n  const [reportData, setReportData] = useState<AccountPermissionsReport | null>(null)\n  const [localInterface, setLocalInterface] = useState({\n\n    search: '',\n\n    page: 1,\n\n    sort: {\n      field: 'name',\n      direction: 'up' as 'up' | 'down'\n    },\n    sortFields: [{\n      span: 'Name',\n      value: 'name'\n    },{\n      span: 'Users',\n      value: 'users'\n    }]\n\n  })\n\n  // Load accountPermissions function\n  async function loadAccountPermissions() {\n\n    try {\n      const { data: accountPermissions } = (await axios.get('/json/account_permissions.json')) as {data: AccountPermissionsReport}\n\n      setReportData(accountPermissions)\n    }\n    catch (error) {\n      nError(error)\n    }\n  }\n\n  // Load accountPermissions on page mount\n  useEffect(() => { loadAccountPermissions() }, [\n    $updater,\n    localInterface.page\n  ])\n\n  // Render function\n  return (<>\n    {reportData ? (\n      <div className=\"AccountPermissionsPage_List\" >\n\n        { /* Page header */}\n        <div className=\"page-header\">\n          <h1>Account`s Permissions</h1>\n        </div>\n\n        { /* List filters */}\n        <ReportFilters\n          onSearchInputChange={(value) => setLocalInterface({...localInterface, search: value})}\n\n          onUpdate={() => 2}\n        />\n\n        {/* Table controls */}\n        <ReportTableControls\n          zIndex={5}\n\n          onMaxRowsChange={() => $setUpdater(Math.random())}\n\n          amount={{\n            total: reportData.interface.rows_all,\n            start: reportData.interface.rows_start,\n            end: reportData.interface.rows_end\n          }}\n\n          page={localInterface.page}\n          maxPages={reportData.interface.max_pages}\n          onPagesStart={() => setLocalInterface({...localInterface, page: 1})}\n          onPrevPage={() => setLocalInterface({...localInterface, page: localInterface.page-1})}\n          onNextPage={() => setLocalInterface({...localInterface, page: localInterface.page+1})}\n          onPagesEnd={() => setLocalInterface({...localInterface, page: reportData.interface.max_pages})}\n          \n          sort={localInterface.sort}\n          sortFields={localInterface.sortFields}\n          onSortFieldChange={(value) => setLocalInterface({...localInterface, sort: {...localInterface.sort, field: value}})}\n          onSortDirectionChange={(value) => setLocalInterface({ ...localInterface, sort: { ...localInterface.sort, direction: value } })}\n          onSortFire={() => 0}\n        \n          addButton={(\n            <div className=\"add-button-wrapper\">\n              <button className=\"_iconed _rounded add-button\" onClick={() => $router.router.navigate('accounts_permissions.new')}>\n                <Icon icon=\"plus-thin\" />\n                <span>Add Account`s Permission</span>\n                <Icon icon=\"shield-28\" />\n              </button>\n            </div>\n          )}\n        />\n\n        <div className=\"contents\">\n\n          {/* Wide desktop table */}\n          <table className={classNames('table', '__show-on-wide', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr>\n              <ReportTableField\n                contents={(<span>Name</span>)}\n\n                sortDirection={localInterface.sort.field === 'name' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'name', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Accounts</span>)}\n\n                sortDirection={localInterface.sort.field === 'accounts' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'accounts', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n            </tr>\n            {reportData.permissions_rows.map((accountPermission, i) => (\n              <tr key={i} onClick={() => $router.router.navigate('accounts_permissions.item', {\n                permissionId: accountPermission.account_permission_id\n              }, {\n                reload: true\n              })}>\n                <td>{accountPermission.name}</td>\n                <td>{accountPermission.accounts}</td>\n              </tr>\n            ))}\n          </table>\n\n          {/* Medium desktop table */}\n          <table className={classNames('table', '__hide-on-wide', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr>\n              <th>Name</th>\n              <th>Accounts</th>\n            </tr>\n            {reportData.permissions_rows.map((accountPermission, i) => (\n              <tr key={i} onClick={() => $router.router.navigate('accounts_permissions.item', {\n                permissionId: accountPermission.account_permission_id\n              }, {\n                reload: true\n              })}>\n                <td>{accountPermission.name}</td>\n                <td>{accountPermission.accounts}</td>\n              </tr>\n            ))}\n          </table>\n\n          {/* Mobile table items */}\n          <div className={classNames('mobile-table-items', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n\n            {reportData.permissions_rows.map((accountPermission, i: number) => (\n              <div className=\"item\" key={i} onClick={() => $router.router.navigate('accounts_permissions.item', {\n                permissionId: accountPermission.account_permission_id\n              }, {\n                reload: true\n              })}>\n\n                <div className=\"__top\">\n\n                  <div className=\"__left\">\n                    <div><b>{accountPermission.name}</b></div>\n                    <div>\n                      {accountPermission.accounts || <span>&nbsp;</span>}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Table controls */}\n        <ReportTableControls\n          isUnder={true}\n\n          onMaxRowsChange={() => $setUpdater(Math.random())}\n\n          amount={{\n            total: reportData.interface.rows_all,\n            start: reportData.interface.rows_start,\n            end: reportData.interface.rows_end\n          }}\n\n          page={localInterface.page}\n          maxPages={reportData.interface.max_pages}\n          onPagesStart={() => setLocalInterface({...localInterface, page: 1})}\n          onPrevPage={() => setLocalInterface({...localInterface, page: localInterface.page-1})}\n          onNextPage={() => setLocalInterface({...localInterface, page: localInterface.page+1})}\n          onPagesEnd={() => setLocalInterface({...localInterface, page: reportData.interface.max_pages})}\n          \n          sort={localInterface.sort}\n          sortFields={localInterface.sortFields}\n          onSortFieldChange={(value) => setLocalInterface({...localInterface, sort: {...localInterface.sort, field: value}})}\n          onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {...localInterface.sort, direction: value}})}\n          onSortFire={() => 0}\n        />\n      </div>\n    ) : null}\n  </>)\n})\nexport default AccountPermissionsPage_List\n"]},"metadata":{},"sourceType":"module"}