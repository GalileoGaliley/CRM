{"ast":null,"code":"var _jsxFileName = \"/Users/nicole/rrrr/crm/src/pages/Clients/List.tsx\",\n    _s = $RefreshSig$();\n\nimport classNames from \"classnames\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useRoute } from \"react-router5\";\nimport Icon from \"../../components/Icon\";\nimport ReportFilters from \"../../components/reports/Filters\";\nimport ReportTableControls from \"../../components/reports/TableControls\";\nimport ReportTableField from \"../../components/reports/TableField\";\nimport { getActiveAccount, httpClient, nError } from \"../../funcs\";\nimport { mapDispatchToProps, mapStateToProps } from \"../../store\";\nimport \"../../styles/pages/common/report-list.sass\";\nimport qs from \"qs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ClientsPage_List = connect(mapStateToProps, mapDispatchToProps)(_s(function (props) {\n  _s();\n\n  const $router = useRoute();\n  const activeAccount = getActiveAccount(props.store);\n  const [$updater, $setUpdater] = useState(Math.random());\n  const [reportData, setReportData] = useState(null);\n  const [localInterface, setLocalInterface] = useState({\n    search: '',\n    page: 1,\n    max_rows: 100,\n    filter_words: {\n      source: []\n    },\n    sort: {\n      field: 'name',\n      direction: 'up'\n    },\n    sortFields: [{\n      span: 'Name',\n      value: 'name'\n    }, {\n      span: 'Date',\n      value: 'created_at'\n    }, {\n      span: 'Main Phone',\n      value: 'phone'\n    }, {\n      span: 'Source',\n      value: 'source'\n    }, {\n      span: 'Jobs',\n      value: 'jobs'\n    }, {\n      span: 'Appointments',\n      value: 'appointments'\n    }, {\n      span: 'Recalls',\n      value: 'recalls'\n    }, {\n      span: 'Total',\n      value: 'total'\n    }, {\n      span: 'Paid',\n      value: 'paid'\n    }, {\n      span: 'Unpaid',\n      value: 'unpaid'\n    }]\n  }); // Load clients function\n\n  async function loadClients() {\n    let activeFilters = { ...localInterface.filter_words\n    };\n    Object.keys(localInterface.filter_words).forEach(key => !activeFilters[key].length && delete activeFilters[key]);\n    let reqData = {\n      account_id: activeAccount.account_id,\n      limit_rows: props.store.reportsMaxRows,\n      page: localInterface.page,\n      sort_field: localInterface.sort.field,\n      sort_type: localInterface.sort.direction === 'up' ? 'asc' : 'desc',\n      filter_field: JSON.stringify(activeFilters),\n      ...(localInterface.search ? {\n        search: localInterface.search\n      } : {})\n    };\n\n    try {\n      const {\n        data: clients\n      } = await httpClient.post('/clients/report', qs.stringify(reqData));\n      setReportData(clients);\n    } catch (error) {\n      nError(error);\n    }\n  } // Load clients on page mount\n\n\n  useEffect(() => {\n    loadClients();\n  }, [$updater, localInterface.page]); // Is filter selected function\n\n  function isFilterSelected(field, value) {\n    return localInterface.filter_words[field].includes(value);\n  }\n\n  function isAllFiltersSelected(field) {\n    return localInterface.filter_words[field].length === 0;\n  }\n\n  function switchFilter(field, value, toggle) {\n    let _arr = [...localInterface.filter_words[field]];\n\n    if (toggle && value === \"All\") {\n      _arr = [];\n    } else if (!toggle) {\n      while (true) {\n        let i = _arr.findIndex(filter => filter === value);\n\n        if (i === -1) break;\n\n        _arr.splice(i, 1);\n      }\n    } else {\n      if (reportData !== null && reportData !== void 0 && reportData.interface.filter_words[field].every(option => _arr.concat([value]).includes(option))) _arr = [];else if (_arr.findIndex(filter => filter === value) === -1) _arr.push(value);\n    }\n\n    setLocalInterface({ ...localInterface,\n      filter_words: { ...localInterface.filter_words,\n        [field]: _arr\n      }\n    });\n  } // Render function\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: reportData ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ClientsPage_List\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reports-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cell\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"amount\",\n            children: reportData.dashboard.all\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend\",\n            children: \"All Clients\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cell\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"amount\",\n            children: reportData.dashboard.unpaid\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend\",\n            children: \"Unpaid\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cell\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"amount\",\n            children: reportData.dashboard.new_this_month\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend\",\n            children: \"New This Month\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cell\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"amount\",\n            children: reportData.dashboard.new_last_month\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend\",\n            children: \"New Last Month\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Clients\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReportFilters, {\n        onSearchInputChange: value => setLocalInterface({ ...localInterface,\n          search: value\n        }),\n        onUpdate: () => {\n          $setUpdater(Math.random());\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReportTableControls, {\n        zIndex: 5,\n        onMaxRowsChange: () => {\n          $setUpdater(Math.random());\n        },\n        amount: {\n          total: reportData.interface.rows_all,\n          start: reportData.interface.rows_start,\n          end: reportData.interface.rows_end\n        },\n        page: localInterface.page,\n        maxPages: reportData.interface.max_pages,\n        onPagesStart: () => setLocalInterface({ ...localInterface,\n          page: 1\n        }),\n        onPrevPage: () => setLocalInterface({ ...localInterface,\n          page: localInterface.page - 1\n        }),\n        onNextPage: () => setLocalInterface({ ...localInterface,\n          page: localInterface.page + 1\n        }),\n        onPagesEnd: () => setLocalInterface({ ...localInterface,\n          page: reportData.interface.max_pages\n        }),\n        sort: localInterface.sort,\n        sortFields: localInterface.sortFields,\n        onSortFieldChange: value => setLocalInterface({ ...localInterface,\n          sort: { ...localInterface.sort,\n            field: value\n          }\n        }),\n        onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n          sort: { ...localInterface.sort,\n            direction: value\n          }\n        }),\n        onSortFire: () => 0,\n        addButton: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-button-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"_iconed _rounded add-button\",\n            onClick: () => $router.router.navigate('clients.new', {}, {\n              reload: true\n            }),\n            children: [/*#__PURE__*/_jsxDEV(Icon, {\n              icon: \"plus-thin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Add Client\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Icon, {\n              icon: \"user-29\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"contents\",\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          className: classNames('table', '__show-on-wide', {\n            __respectAsidePanel: props.store.navActive.is\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 28\n              }, this),\n              sortDirection: localInterface.sort.field === 'name' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'name',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Main phone\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 28\n              }, this),\n              sortDirection: localInterface.sort.field === 'phone' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'phone',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Source\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 28\n              }, this),\n              allFiltersSelected: isAllFiltersSelected(\"source\"),\n              onAllFiltersChange: value => switchFilter(\"source\", \"All\", value),\n              filterWords: reportData.interface.filter_words.source.map(filterWord => ({\n                word: filterWord,\n                selected: isFilterSelected(\"source\", filterWord)\n              })),\n              onFilterChange: value => switchFilter(\"source\", value.word, value.selected),\n              sortDirection: localInterface.sort.field === 'source' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'source',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Jobs\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 28\n              }, this),\n              sortDirection: localInterface.sort.field === 'jobs' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'jobs',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Appointments\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 28\n              }, this),\n              sortDirection: localInterface.sort.field === 'appointments' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'appointments',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Recalls\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 28\n              }, this),\n              sortDirection: localInterface.sort.field === 'recalls' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'recalls',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 28\n              }, this),\n              sortDirection: localInterface.sort.field === 'total' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'total',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Paid\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 28\n              }, this),\n              sortDirection: localInterface.sort.field === 'paid' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'paid',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ReportTableField, {\n              contents: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Unpaid\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 28\n              }, this),\n              sortDirection: localInterface.sort.field === 'unpaid' ? localInterface.sort.direction : undefined,\n              onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n                sort: {\n                  field: 'unpaid',\n                  direction: value\n                }\n              }),\n              onFilterFire: () => $setUpdater(Math.random())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this), reportData.clients.map((client, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            onClick: () => $router.router.navigate('clients.item', {\n              clientId: client.client_id\n            }, {\n              reload: true\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: client.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: client.main_phone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: client.source\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: client.jobs\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: client.appointments\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: client.recalls\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: client.total\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: client.paid\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: client.unpaid\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: classNames('table', '__hide-on-wide', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this), reportData.clients.map((client, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            onClick: () => $router.router.navigate('clients.item', {\n              clientId: client.client_id\n            }, {\n              reload: true\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: client.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: client.main_phone\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: client.source\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Jobs: \", client.jobs]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Appointments: \", client.appointments]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Recalls: \", client.recalls]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Total: \", client.total]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Paid: \", client.paid]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Unpaid: \", client.unpaid]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"\\xA0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classNames('mobile-table-items', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          }),\n          children: reportData.clients.map((client, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"item\",\n            onClick: () => $router.router.navigate('clients.item', {\n              clientId: client.client_id\n            }, {\n              reload: true\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"__top\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"__left\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: client.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 419,\n                    columnNumber: 26\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: client.main_phone\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 420,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"__right\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"Total: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: client.total\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 427,\n                    columnNumber: 30\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"Paid: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: client.paid\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"Unpaid: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: client.unpaid\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 433,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"__bottom\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"__left\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"gray\",\n                    children: \"Jobs:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 442,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\" \", client.jobs]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 443,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"gray\",\n                    children: \"Recalls:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 446,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\" \", client.recalls]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 447,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"gray\",\n                    children: \"Appointments:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 450,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\" \", client.appointments]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 451,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"__right small\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: client.source\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 457,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ReportTableControls, {\n        isUnder: true,\n        onMaxRowsChange: () => $setUpdater(Math.random()),\n        amount: {\n          total: reportData.interface.rows_all,\n          start: reportData.interface.rows_start,\n          end: reportData.interface.rows_end\n        },\n        page: localInterface.page,\n        maxPages: reportData.interface.max_pages,\n        onPagesStart: () => setLocalInterface({ ...localInterface,\n          page: 1\n        }),\n        onPrevPage: () => setLocalInterface({ ...localInterface,\n          page: localInterface.page - 1\n        }),\n        onNextPage: () => setLocalInterface({ ...localInterface,\n          page: localInterface.page + 1\n        }),\n        onPagesEnd: () => setLocalInterface({ ...localInterface,\n          page: reportData.interface.max_pages\n        }),\n        sort: localInterface.sort,\n        sortFields: localInterface.sortFields,\n        onSortFieldChange: value => setLocalInterface({ ...localInterface,\n          sort: { ...localInterface.sort,\n            field: value\n          }\n        }),\n        onSortDirectionChange: value => setLocalInterface({ ...localInterface,\n          sort: { ...localInterface.sort,\n            direction: value\n          }\n        }),\n        onSortFire: () => 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this) : null\n  }, void 0, false);\n}, \"SxHkPLO5yaX0bCAbILpbfl8oEU0=\", false, function () {\n  return [useRoute];\n}));\nexport default ClientsPage_List;","map":{"version":3,"sources":["/Users/nicole/rrrr/crm/src/pages/Clients/List.tsx"],"names":["classNames","useEffect","useState","connect","useRoute","Icon","ReportFilters","ReportTableControls","ReportTableField","getActiveAccount","httpClient","nError","mapDispatchToProps","mapStateToProps","qs","ClientsPage_List","props","$router","activeAccount","store","$updater","$setUpdater","Math","random","reportData","setReportData","localInterface","setLocalInterface","search","page","max_rows","filter_words","source","sort","field","direction","sortFields","span","value","loadClients","activeFilters","Object","keys","forEach","key","length","reqData","account_id","limit_rows","reportsMaxRows","sort_field","sort_type","filter_field","JSON","stringify","data","clients","post","error","isFilterSelected","includes","isAllFiltersSelected","switchFilter","toggle","_arr","i","findIndex","filter","splice","interface","every","option","concat","push","dashboard","all","unpaid","new_this_month","new_last_month","total","rows_all","start","rows_start","end","rows_end","max_pages","router","navigate","reload","__respectAsidePanel","navActive","is","undefined","map","filterWord","word","selected","client","clientId","client_id","name","main_phone","jobs","appointments","recalls","paid"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport classNames from \"classnames\"\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useRoute } from \"react-router5\"\nimport Icon from \"../../components/Icon\"\nimport ReportFilters from \"../../components/reports/Filters\"\nimport ReportTableControls from \"../../components/reports/TableControls\"\nimport ReportTableField from \"../../components/reports/TableField\"\nimport {getActiveAccount, httpClient, nError} from \"../../funcs\"\nimport Client from \"../../models/Client\"\nimport { StoreDispatch, StoreState, mapDispatchToProps, mapStateToProps } from \"../../store\";\n\nimport \"../../styles/pages/common/report-list.sass\"\nimport storage from \"redux-persist/lib/storage\";\nimport qs from \"qs\";\nimport Account from \"../../models/Account\";\n\ninterface Props {\n  store: StoreState,\n  dispatcher: StoreDispatch\n}\n\ntype FilterWord = 'source'\n\ninterface ClientsReport {\n\n  interface: {\n\n    filter_words: {\n\n      source: string[],\n    },\n\n    max_pages: number,\n    rows_start: number,\n    rows_end: number,\n    rows_all: number,\n  },\n\n  permissions: {\n    show_client: boolean,\n  },\n\n  dashboard: {\n\n    all: string,\n    unpaid: string,\n    new_this_month: string,\n    new_last_month: string\n  },\n\n  clients: Client[]\n}\n\nconst ClientsPage_List = connect(mapStateToProps, mapDispatchToProps)(function(props: Props) {\n\n  const $router = useRoute();\n  const activeAccount = getActiveAccount(props.store) as Account\n  const [$updater, $setUpdater] = useState<any>(Math.random())\n\n  const [reportData, setReportData] = useState<ClientsReport | null>(null)\n  const [localInterface, setLocalInterface] = useState({\n\n    search: '',\n\n    page: 1,\n    max_rows: 100 as 50 | 100 | 250 | 500,\n\n    filter_words: {\n\n      source: [] as string[],\n    },\n\n    sort: {\n      field: 'name',\n      direction: 'up' as 'up' | 'down'\n    },\n    sortFields: [{\n      span: 'Name',\n      value: 'name'\n    },\n    {\n      span: 'Date',\n      value: 'created_at'\n    },{\n      span: 'Main Phone',\n      value: 'phone'\n    },{\n      span: 'Source',\n      value: 'source'\n    },{\n      span: 'Jobs',\n      value: 'jobs'\n    },{\n      span: 'Appointments',\n      value: 'appointments'\n    },{\n      span: 'Recalls',\n      value: 'recalls'\n    },{\n      span: 'Total',\n      value: 'total'\n    },{\n      span: 'Paid',\n      value: 'paid'\n    },{\n      span: 'Unpaid',\n      value: 'unpaid'\n    }]\n\n  })\n\n  // Load clients function\n  async function loadClients() {\n    let activeFilters: any = {...localInterface.filter_words}\n    Object.keys(localInterface.filter_words).forEach((key: any) => !activeFilters[key].length && delete activeFilters[key])\n    let reqData = {\n      account_id:activeAccount.account_id,\n      limit_rows: props.store.reportsMaxRows,\n      page: localInterface.page,\n      sort_field: localInterface.sort.field,\n      sort_type: localInterface.sort.direction === 'up' ? 'asc' : 'desc',\n      filter_field: JSON.stringify(activeFilters),\n      ...(localInterface.search ? {search: localInterface.search} : {})\n    };\n    try {\n      const { data: clients } = (await httpClient.post('/clients/report',qs.stringify(reqData))) as {data: ClientsReport}\n\n      setReportData(clients)\n\n\n    }\n    catch (error) {\n\n      nError(error)\n    }\n  }\n\n  // Load clients on page mount\n\n  useEffect(() => { loadClients()}, [\n    $updater,\n    localInterface.page\n  ])\n  // Is filter selected function\n  function isFilterSelected(field: FilterWord, value: string) {\n    return localInterface.filter_words[field].includes(value)\n  }\n\n  function isAllFiltersSelected(field: \"source\") {\n    return localInterface.filter_words[field].length === 0\n  }\n\n  function switchFilter(field: FilterWord, value: string, toggle: boolean) {\n\n    let _arr = [...localInterface.filter_words[field]]\n\n    if (toggle && value === \"All\") { _arr = [] }\n    \n    else if (!toggle) {\n\n      while (true) {\n        let i = _arr.findIndex((filter) => filter === value)\n        if(i === -1) break\n        _arr.splice(i, 1)\n      }\n    }\n      \n    else {\n\n      if (reportData?.interface.filter_words[field].every((option) => _arr.concat([value]).includes(option)))\n        _arr = []\n\n      else if(_arr.findIndex((filter) => filter === value) === -1)\n        _arr.push(value)\n    }\n\n    setLocalInterface({...localInterface, filter_words: {...localInterface.filter_words, [field]: _arr}})\n  }\n\n  // Render function\n  return (<>\n    {reportData ? (\n      <div className=\"ClientsPage_List\" >\n      \n        { /* Reports grid */}\n        <div className=\"reports-grid\">\n        \n          <div className=\"cell\">\n\n            <div className=\"amount\">{reportData.dashboard.all}</div>\n            <div className=\"legend\">All Clients</div>\n          </div>\n\n          <div className=\"cell\">\n\n            <div className=\"amount\">{reportData.dashboard.unpaid}</div>\n            <div className=\"legend\">Unpaid</div>\n          </div>\n\n          <div className=\"cell\">\n\n            <div className=\"amount\">{reportData.dashboard.new_this_month}</div>\n            <div className=\"legend\">New This Month</div>\n          </div>\n\n          <div className=\"cell\">\n\n            <div className=\"amount\">{reportData.dashboard.new_last_month}</div>\n            <div className=\"legend\">New Last Month</div>\n          </div>\n        </div>\n\n        { /* Page header */}\n        <div className=\"page-header\">\n          <h1>Clients</h1>\n        </div>\n\n        { /* List filters */}\n        <ReportFilters\n          onSearchInputChange={(value) => setLocalInterface({...localInterface, search: value})}\n\n          onUpdate={() => {\n            $setUpdater(Math.random());\n          }}\n        />\n\n        {/* Table controls */}\n        <ReportTableControls\n          zIndex={5}\n          \n          onMaxRowsChange={() => {\n            $setUpdater(Math.random());\n          }}\n\n          amount={{\n            total: reportData.interface.rows_all,\n            start: reportData.interface.rows_start,\n            end: reportData.interface.rows_end\n          }}\n\n          page={localInterface.page}\n          maxPages={reportData.interface.max_pages}\n          onPagesStart={() => setLocalInterface({...localInterface, page: 1})}\n          onPrevPage={() => setLocalInterface({...localInterface, page: localInterface.page-1})}\n          onNextPage={() => setLocalInterface({...localInterface, page: localInterface.page+1})}\n          onPagesEnd={() => setLocalInterface({...localInterface, page: reportData.interface.max_pages})}\n          \n          sort={localInterface.sort}\n          sortFields={localInterface.sortFields}\n          onSortFieldChange={(value) => setLocalInterface({...localInterface, sort: {...localInterface.sort, field: value}})}\n          onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {...localInterface.sort, direction: value}})}\n          onSortFire={() => 0}\n\n          addButton={(\n            <div className=\"add-button-wrapper\">\n              <button className=\"_iconed _rounded add-button\" onClick={() => $router.router.navigate('clients.new', {}, {reload: true})}>\n                <Icon icon=\"plus-thin\" />\n                <span>Add Client</span>\n                <Icon icon=\"user-29\" />\n              </button>\n            </div>\n          )}\n        />\n\n        <div className=\"contents\">\n\n          {/* Wide desktop table */}\n          <table className={classNames('table', '__show-on-wide', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr>\n              <ReportTableField\n                contents={(<span>Name</span>)}\n\n                sortDirection={localInterface.sort.field === 'name' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'name', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Main phone</span>)}\n\n                sortDirection={localInterface.sort.field === 'phone' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'phone', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Source</span>)}\n\n                allFiltersSelected={isAllFiltersSelected(\"source\")}\n                onAllFiltersChange={(value) => switchFilter(\"source\", \"All\", value)}\n\n                filterWords={reportData.interface.filter_words.source.map((filterWord) => ({\n                  word: filterWord,\n                  selected: isFilterSelected(\"source\", filterWord)\n                }))}\n                onFilterChange={(value) => switchFilter(\"source\", value.word, value.selected)}\n\n                sortDirection={localInterface.sort.field === 'source' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'source', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Jobs</span>)}\n\n                sortDirection={localInterface.sort.field === 'jobs' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'jobs', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Appointments</span>)}\n\n                sortDirection={localInterface.sort.field === 'appointments' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'appointments', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Recalls</span>)}\n\n                sortDirection={localInterface.sort.field === 'recalls' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'recalls', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Total</span>)}\n\n                sortDirection={localInterface.sort.field === 'total' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'total', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Paid</span>)}\n\n                sortDirection={localInterface.sort.field === 'paid' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'paid', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n              <ReportTableField\n                contents={(<span>Unpaid</span>)}\n\n                sortDirection={localInterface.sort.field === 'unpaid' ? localInterface.sort.direction : undefined}\n                onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {field: 'unpaid', direction: value}})}\n\n                onFilterFire={() => $setUpdater(Math.random())}\n              />\n            </tr>\n            {reportData.clients.map((client, i) => (\n              <tr key={i} onClick={() => $router.router.navigate('clients.item', {\n                clientId: client.client_id\n              }, {reload: true})}>\n                <td>{client.name}</td>\n                <td>{client.main_phone}</td>\n                <td>{client.source}</td>\n                <td>{client.jobs}</td>\n                <td>{client.appointments}</td>\n                <td>{client.recalls}</td>\n                <td>{client.total}</td>\n                <td>{client.paid}</td>\n                <td>{client.unpaid}</td>\n              </tr>\n            ))}\n          </table>\n\n          {/* Medium screen table */}\n          <table className={classNames('table', '__hide-on-wide', '__hide-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n            <tr></tr>\n            {reportData.clients.map((client, i) => (\n              <tr key={i} onClick={() => $router.router.navigate('clients.item', {\n                clientId: client.client_id\n              }, {reload: true})}>\n                <td>\n                  <div>{client.name}</div>\n                  <div>{client.main_phone}</div>\n                </td>\n                <td>\n                  <div>{client.source}</div>\n                  <div>Jobs: {client.jobs}</div>\n                </td>\n                <td>\n                  <div>Appointments: {client.appointments}</div>\n                  <div>Recalls: {client.recalls}</div>\n                </td>\n                <td>\n                  <div>Total: {client.total}</div>\n                  <div>Paid: {client.paid}</div>\n                </td>\n                <td>\n                  <div>Unpaid: {client.unpaid}</div>\n                  <div>&nbsp;</div>\n                </td>\n              </tr>\n            ))}\n          </table>\n\n          {/* Mobile table items */}\n          <div className={classNames('mobile-table-items', '__show-on-mobile', {\n            __respectAsidePanel: props.store.navActive.is\n          })}>\n\n            {reportData.clients.map((client, i: number) => (\n              <div className=\"item\" key={i} onClick={() => $router.router.navigate('clients.item', {\n                clientId: client.client_id\n              }, {reload: true})}>\n\n                <div className=\"__top\">\n\n                  <div className=\"__left\">\n                    <div><b>{client.name}</b></div>\n                    <div>\n                      {client.main_phone}\n                    </div>\n                  </div>\n\n                  <div className=\"__right\">\n                    <div>\n                      Total: <b>{client.total}</b>\n                    </div>\n                    <div>\n                      Paid: <b>{client.paid}</b>\n                    </div>\n                    <div>\n                      Unpaid: <b>{client.unpaid}</b>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"__bottom\">\n\n                  <div className=\"__left\">\n                    <div>\n                      <span className=\"gray\">Jobs:</span>\n                      <span> {client.jobs}</span>\n                    </div>\n                    <div>\n                      <span className=\"gray\">Recalls:</span>\n                      <span> {client.recalls}</span>\n                    </div>\n                    <div>\n                      <span className=\"gray\">Appointments:</span>\n                      <span> {client.appointments}</span>\n                    </div>\n                  </div>\n\n                  <div className=\"__right small\">\n                    <div>\n                      <b>{client.source}</b>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Table controls */}\n        <ReportTableControls\n          isUnder={true}\n\n          onMaxRowsChange={() => $setUpdater(Math.random())}\n\n          amount={{\n            total: reportData.interface.rows_all,\n            start: reportData.interface.rows_start,\n            end: reportData.interface.rows_end\n          }}\n\n          page={localInterface.page}\n          maxPages={reportData.interface.max_pages}\n          onPagesStart={() => setLocalInterface({...localInterface, page: 1})}\n          onPrevPage={() => setLocalInterface({...localInterface, page: localInterface.page-1})}\n          onNextPage={() => setLocalInterface({...localInterface, page: localInterface.page+1})}\n          onPagesEnd={() => setLocalInterface({...localInterface, page: reportData.interface.max_pages})}\n          \n          sort={localInterface.sort}\n          sortFields={localInterface.sortFields}\n          onSortFieldChange={(value) => setLocalInterface({...localInterface, sort: {...localInterface.sort, field: value}})}\n          onSortDirectionChange={(value) => setLocalInterface({...localInterface, sort: {...localInterface.sort, direction: value}})}\n          onSortFire={() => 0}\n        />\n      </div>\n    ) : null}\n  </>)\n})\nexport default ClientsPage_List\n"]},"metadata":{},"sourceType":"module"}